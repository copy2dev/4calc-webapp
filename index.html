<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4Calc - ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans Thai', sans-serif; }
        .calculator-card:hover { transform: translateY(-2px); transition: transform 0.2s ease; }
        .lang-btn { position: relative; }
        .lang-dropdown { display: none; position: absolute; top: 100%; right: 0; background: white; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); z-index: 50; min-width: 120px; }
        .lang-dropdown.show { display: block; }
    </style>

<!-- 4Calc v1.1.0 -->
<!-- Built: 2025-07-05T02:15:00.000Z -->
<!-- Environment: production -->
<!-- Branch: main -->
<!-- Commit: enhanced-mrt-calculator -->
<!-- Deployed on Netlify -->
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-6">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-gray-900">
                        <span class="text-blue-600">4</span>Calc
                    </h1>
                    <span id="siteSubtitle" class="ml-2 text-sm text-gray-500">
                        ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô
                    </span>
                </div>
                <div class="flex items-center space-x-4">
                    <nav class="hidden md:flex space-x-8">
                        <a href="#" id="nav-home" class="text-gray-700 hover:text-blue-600 transition-colors">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
                        <a href="#" id="nav-categories" class="text-gray-700 hover:text-blue-600 transition-colors">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</a>
                        <a href="#" id="nav-about" class="text-gray-700 hover:text-blue-600 transition-colors">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a>
                    </nav>
                    
                    <!-- Language Switcher -->
                    <div class="lang-btn">
                        <button id="langButton" class="flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 transition-colors">
                            <span id="currentFlag">üáπüá≠</span>
                            <span id="currentLang">‡πÑ‡∏ó‡∏¢</span>
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div id="langDropdown" class="lang-dropdown">
                            <button onclick="switchLanguage('th')" class="w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 transition-colors rounded-t-lg">
                                <span>üáπüá≠</span>
                                <span>‡πÑ‡∏ó‡∏¢</span>
                            </button>
                            <button onclick="switchLanguage('en')" class="w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 transition-colors rounded-b-lg">
                                <span>üá∫üá∏</span>
                                <span>English</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- Header Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                <span id="welcomeText">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà</span> <span class="text-blue-600">4Calc</span>
            </h1>
            <p id="welcomeDescription" class="text-xl text-gray-600 mb-8">
                ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            </p>
            
            <!-- Search Bar -->
            <div class="max-w-md mx-auto mb-8">
                <input
                    type="text"
                    id="searchInput"
                    placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç..."
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
            </div>
        </div>

        <!-- Categories -->
        <div class="flex flex-wrap justify-center gap-2 mb-8" id="categoryButtons">
            <button class="category-btn px-4 py-2 bg-blue-600 text-white border border-blue-600 rounded-lg hover:bg-blue-700 transition-colors" data-category="all">
                <span class="mr-2">üîç</span>
                <span>‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="transportation">
                <span class="mr-2">üöó</span>
                <span>‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏°</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="health">
                <span class="mr-2">üè•</span>
                <span>‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="finance">
                <span class="mr-2">üí≥</span>
                <span>‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="utilities">
                <span class="mr-2">üè†</span>
                <span>‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏π‡∏õ‡πÇ‡∏†‡∏Ñ</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="geography">
                <span class="mr-2">üåç</span>
                <span>‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</span>
            </button>
        </div>
        
        <!-- Calculator Grid -->
        <div id="calculatorGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Calculators will be populated by JavaScript -->
        </div>

        <!-- No Results -->
        <div id="noResults" class="text-center py-12 hidden">
            <div class="text-4xl mb-4">üîç</div>
            <h3 class="text-xl font-semibold mb-2">‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç</h3>
            <p class="text-gray-600">‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏≠‡∏∑‡πà‡∏ô</p>
        </div>

        <!-- Add Calculator Card -->
        <div class="mt-8 bg-white p-6 rounded-lg shadow-md border-2 border-dashed border-gray-300">
            <div class="text-center">
                <div class="text-3xl mb-4">‚ûï</div>
                <h3 id="needNewCalc" class="text-lg font-semibold mb-2">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà?</h3>
                <p id="newCalcDesc" class="text-gray-600 mb-4">
                    ‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                </p>
                <button id="requestCalcBtn" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    ‡∏Ç‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-100 border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <p id="footerText" class="text-gray-600">
                    ¬© 2024 4Calc ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏π‡πà‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
                </p>
            </div>
        </div>
    </footer>

    <!-- Calculator Modal -->
    <div id="calculatorModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg max-w-4xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 id="modalTitle" class="text-2xl font-bold"></h2>
                    <button onclick="closeCalculator()" class="text-gray-500 hover:text-gray-700 text-2xl">√ó</button>
                </div>
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <script>
        // Import MRT Station Data - Updated 2024
        const MRT_LINES = {
          blue: {
            id: 'blue',
            nameTH: '‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô',
            nameEN: 'Blue Line (Chaloem Ratchamongkhon)',
            color: '#0066CC',
            totalStations: 38,
            operational: true,
            stations: [
              { id: 'THA', nameTH: '‡∏ó‡πà‡∏≤‡∏û‡∏£‡∏∞', nameEN: 'Tha Phra', code: 'BL01' },
              { id: 'CHA1', nameTH: '‡∏à‡∏£‡∏±‡∏•‡∏™‡∏ô‡∏¥‡∏ó‡∏ß‡∏á‡∏®‡πå 13', nameEN: 'Charan Sanit Wong 13', code: 'BL02' },
              { id: 'FAR', nameTH: '‡∏ü‡∏≤‡∏£‡πå‡∏±‡∏ô ‡∏û‡∏á‡∏©‡πå', nameEN: 'Faran Phong', code: 'BL03' },
              { id: 'KHB', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡πÑ‡∏ú‡πà', nameEN: 'Khlong Bang Phai', code: 'BL04' },
              { id: 'BAN7', nameTH: '‡∏ö‡∏≤‡∏á‡∏¢‡∏µ‡πà‡∏Ç‡∏±‡∏ô', nameEN: 'Bang Yi Khan', code: 'BL05' },
              { id: 'SIR', nameTH: '‡∏®‡∏¥‡∏£‡∏¥‡∏£‡∏≤‡∏ä', nameEN: 'Siriraj', code: 'BL06' },
              { id: 'THO1', nameTH: '‡∏ò‡∏ô‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Thonburi', code: 'BL07' },
              { id: 'ISA1', nameTH: '‡∏≠‡∏¥‡∏™‡∏£‡∏†‡∏≤‡∏û', nameEN: 'Itsaraphap', code: 'BL08' },
              { id: 'SAN1', nameTH: '‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏ä‡∏¢', nameEN: 'Sanam Chai', code: 'BL09' },
              { id: 'SAY1', nameTH: '‡∏™‡∏≤‡∏°‡∏¢‡∏≠‡∏î', nameEN: 'Sam Yot', code: 'BL10' },
              { id: 'WAT1', nameTH: '‡∏ß‡∏±‡∏î‡∏°‡∏±‡∏á‡∏Å‡∏£', nameEN: 'Wat Mangkon', code: 'BL11' },
              { id: 'HUL1', nameTH: '‡∏´‡∏±‡∏ß‡∏•‡∏≥‡πÇ‡∏û‡∏á', nameEN: 'Hua Lamphong', code: 'BL12' },
              { id: 'SAM1', nameTH: '‡∏™‡∏≤‡∏°‡∏¢‡πà‡∏≤‡∏ô', nameEN: 'Sam Yan', code: 'BL13' },
              { id: 'SIL1', nameTH: '‡∏™‡∏µ‡∏•‡∏°', nameEN: 'Silom', code: 'BL14' },
              { id: 'LUM1', nameTH: '‡∏•‡∏∏‡∏°‡∏û‡∏¥‡∏ô‡∏µ', nameEN: 'Lumphini', code: 'BL15' },
              { id: 'KLO1', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢', nameEN: 'Khlong Toei', code: 'BL16' },
              { id: 'QSI1', nameTH: '‡∏Ñ‡∏ß‡∏µ‡∏ô‡∏™‡∏¥‡∏£‡∏¥‡∏Å‡∏¥‡∏ï‡∏¥‡πå', nameEN: 'Queen Sirikit', code: 'BL17' },
              { id: 'SUK1', nameTH: '‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó', nameEN: 'Sukhumvit', code: 'BL18' },
              { id: 'PET1', nameTH: '‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Phetchaburi', code: 'BL19' },
              { id: 'PRA1', nameTH: '‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏° 9', nameEN: 'Phra Ram 9', code: 'BL20' },
              { id: 'CUL1', nameTH: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°', nameEN: 'Thailand Cultural Centre', code: 'BL21' },
              { id: 'HUA1', nameTH: '‡∏´‡πâ‡∏ß‡∏¢‡∏Ç‡∏ß‡∏≤‡∏á', nameEN: 'Huai Khwang', code: 'BL22' },
              { id: 'SUT1', nameTH: '‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏™‡∏≤‡∏£', nameEN: 'Sutthisan', code: 'BL23' },
              { id: 'RAT1', nameTH: '‡∏£‡∏±‡∏ä‡∏î‡∏≤‡∏†‡∏¥‡πÄ‡∏©‡∏Å', nameEN: 'Ratchadaphisek', code: 'BL24' },
              { id: 'LAD1', nameTH: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß', nameEN: 'Lat Phrao', code: 'BL25' },
              { id: 'PAH1', nameTH: '‡∏û‡∏´‡∏•‡πÇ‡∏¢‡∏ò‡∏¥‡∏ô', nameEN: 'Phahon Yothin', code: 'BL26' },
              { id: 'CHA2', nameTH: '‡∏à‡∏ï‡∏∏‡∏à‡∏±‡∏Å‡∏£', nameEN: 'Chatuchak Park', code: 'BL27' },
              { id: 'KAM1', nameTH: '‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£', nameEN: 'Kamphaeng Phet', code: 'BL28' },
              { id: 'BAN1', nameTH: '‡∏ö‡∏≤‡∏á‡∏ã‡∏∑‡πà‡∏≠', nameEN: 'Bang Sue', code: 'BL29' },
              { id: 'LAT1', nameTH: '‡∏•‡∏≤‡∏î‡∏¢‡∏≤‡∏ß', nameEN: 'Lat Yao', code: 'BL30' },
              { id: 'BKM1', nameTH: '‡∏ö‡∏≤‡∏á‡πÅ‡∏Ñ', nameEN: 'Bang Khae', code: 'BL31' },
              { id: 'PET2', nameTH: '‡πÄ‡∏û‡∏ä‡∏£‡πÄ‡∏Å‡∏©‡∏° 48', nameEN: 'Phetkasem 48', code: 'BL32' },
              { id: 'BAW1', nameTH: '‡∏ö‡∏≤‡∏á‡∏´‡∏ß‡πâ‡∏≤', nameEN: 'Bang Wa', code: 'BL33' },
              { id: 'BNG1', nameTH: '‡∏ö‡∏≤‡∏á‡πÑ‡∏ú‡πà', nameEN: 'Bang Phai', code: 'BL34' },
              { id: 'WUT1', nameTH: '‡∏ß‡∏∏‡∏í‡∏≤‡∏Å‡∏≤‡∏®', nameEN: 'Wutthakat', code: 'BL35' },
              { id: 'TAL1', nameTH: '‡∏ï‡∏•‡∏≤‡∏î‡∏û‡∏•‡∏π', nameEN: 'Talad Phlu', code: 'BL36' },
              { id: 'PHO1', nameTH: '‡πÇ‡∏û‡∏ò‡∏¥‡πå‡∏ô‡∏¥‡∏°‡∏¥‡∏ï‡∏£', nameEN: 'Pho Nimit', code: 'BL37' },
              { id: 'LAK1', nameTH: '‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≠‡∏á', nameEN: 'Lak Song', code: 'BL38' }
            ]
          },
          purple: {
            id: 'purple',
            nameTH: '‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á',
            nameEN: 'Purple Line (Chaloem Ratchadham)',
            color: '#663399',
            totalStations: 16,
            operational: true,
            stations: [
              { id: 'KLO2', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡πÑ‡∏ú‡πà', nameEN: 'Khlong Bang Phai', code: 'PP01' },
              { id: 'TAL2', nameTH: '‡∏ï‡∏•‡∏≤‡∏î‡∏ö‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà', nameEN: 'Talad Bang Yai', code: 'PP02' },
              { id: 'SAM2', nameTH: '‡∏™‡∏≤‡∏°‡πÅ‡∏¢‡∏Å‡∏ö‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà', nameEN: 'Sam Yaek Bang Yai', code: 'PP03' },
              { id: 'BAN2', nameTH: '‡∏ö‡∏≤‡∏á‡∏û‡∏•‡∏π', nameEN: 'Bang Phlu', code: 'PP04' },
              { id: 'BAN3', nameTH: '‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å‡πÉ‡∏´‡∏ç‡πà', nameEN: 'Bang Rak Yai', code: 'PP05' },
              { id: 'BAN4', nameTH: '‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å‡∏ô‡πâ‡∏≠‡∏¢-‡∏ó‡πà‡∏≤‡∏≠‡∏¥‡∏ê', nameEN: 'Bang Rak Noi Tha It', code: 'PP06' },
              { id: 'SAI', nameTH: '‡πÑ‡∏ó‡∏£‡∏°‡πâ‡∏≤', nameEN: 'Sai Ma', code: 'PP07' },
              { id: 'PLI', nameTH: '‡∏û‡∏•‡∏µ‡πÄ‡∏û‡∏•‡∏¥‡∏ô', nameEN: 'Pli Ploen', code: 'PP08' },
              { id: 'MAN', nameTH: '‡∏°‡∏±‡∏¢‡∏•‡∏≤‡∏†', nameEN: 'Mai Lap', code: 'PP09' },
              { id: 'NON', nameTH: '‡∏´‡∏ô‡∏≠‡∏á‡∏õ‡∏£‡∏∑‡∏≠', nameEN: 'Nong Prue', code: 'PP10' },
              { id: 'YAE', nameTH: '‡πÅ‡∏¢‡∏Å‡∏ï‡∏¥‡∏ß‡∏≤‡∏ô‡∏ô‡∏ó‡πå', nameEN: 'Yaek Tiwanon', code: 'PP11' },
              { id: 'TIW', nameTH: '‡∏ï‡∏¥‡∏ß‡∏≤‡∏ô‡∏ô‡∏ó‡πå', nameEN: 'Tiwanon', code: 'PP12' },
              { id: 'THA2', nameTH: '‡∏ó‡πà‡∏≤‡∏≠‡∏¥‡∏ê', nameEN: 'Tha It', code: 'PP13' },
              { id: 'PAK', nameTH: '‡∏õ‡∏≤‡∏Å‡πÄ‡∏Å‡∏£‡πá‡∏î', nameEN: 'Pak Kret', code: 'PP14' },
              { id: 'KHA', nameTH: '‡πÅ‡∏Ç‡∏ß‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏á‡∏û‡∏≤', nameEN: 'Khaeng Wiang Pha', code: 'PP15' },
              { id: 'TAO', nameTH: '‡πÄ‡∏ï‡∏≤‡∏õ‡∏π‡∏ô', nameEN: 'Tao Poon', code: 'PP16' }
            ]
          },
          
          yellow: {
            id: 'yellow',
            nameTH: '‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á',
            nameEN: 'Yellow Line (Nakhon Phiphat)',
            color: '#FFD700',
            totalStations: 23,
            operational: true,
            stations: [
              { id: 'LAD2', nameTH: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß', nameEN: 'Lat Phrao', code: 'YL01' },
              { id: 'PHW', nameTH: '‡∏û‡∏´‡∏•‡πÇ‡∏¢‡∏ò‡∏¥‡∏ô 24', nameEN: 'Phahon Yothin 24', code: 'YL02' },
              { id: 'CHO', nameTH: '‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏±‡∏¢ 4', nameEN: 'Chok Chai 4', code: 'YL03' },
              { id: 'LAD3', nameTH: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß 71', nameEN: 'Lat Phrao 71', code: 'YL04' },
              { id: 'LAD4', nameTH: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß 83', nameEN: 'Lat Phrao 83', code: 'YL05' },
              { id: 'MAL', nameTH: '‡∏°‡∏≤‡∏•‡∏±‡∏¢‡πÅ‡∏°‡∏ô', nameEN: 'Malai Man', code: 'YL06' },
              { id: 'RAM', nameTH: '‡∏£‡∏≤‡∏°‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏≤ 4 ‡∏Å‡∏°.', nameEN: 'Ram Inthra Km.4', code: 'YL07' },
              { id: 'LAD5', nameTH: '‡∏•‡∏≤‡∏î‡∏õ‡∏•‡∏≤‡πÄ‡∏Ñ‡πâ‡∏≤', nameEN: 'Lat Plakhao', code: 'YL08' },
              { id: 'RAM2', nameTH: '‡∏£‡∏≤‡∏°‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏≤ 6 ‡∏Å‡∏°.', nameEN: 'Ram Inthra Km.6', code: 'YL09' },
              { id: 'KRU2', nameTH: '‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Å‡∏£‡∏µ‡∏ë‡∏≤', nameEN: 'Krungthep Kreetha', code: 'YL10' },
              { id: 'HUA2', nameTH: '‡∏´‡∏±‡∏ß‡∏´‡∏°‡∏≤‡∏Å', nameEN: 'Hua Mak', code: 'YL11' },
              { id: 'RAM3', nameTH: '‡∏£‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏´‡∏á', nameEN: 'Ram Khamhaeng', code: 'YL12' },
              { id: 'RAJ', nameTH: '‡∏£‡∏≤‡∏ä‡∏°‡∏±‡∏á‡∏Ñ‡∏•‡∏≤‡∏Å‡∏µ‡∏¨‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô', nameEN: 'Rajamangala Stadium', code: 'YL13' },
              { id: 'SRI', nameTH: '‡∏®‡∏£‡∏µ‡∏ô‡∏ß‡∏•', nameEN: 'Si Nuan', code: 'YL14' },
              { id: 'HUA3', nameTH: '‡∏´‡∏±‡∏ß‡∏ï‡∏∞‡πÄ‡∏Ç‡πâ', nameEN: 'Hua Takhe', code: 'YL15' },
              { id: 'BAN8', nameTH: '‡∏ö‡∏≤‡∏á‡∏≠‡πâ‡∏≠', nameEN: 'Bang O', code: 'YL16' },
              { id: 'SAM4', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á', nameEN: 'Samrong Klang', code: 'YL17' },
              { id: 'SAM5', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á', nameEN: 'Samrong', code: 'YL18' },
              { id: 'SAM6', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á ‡∏Å‡∏°.3', nameEN: 'Samrong Km.3', code: 'YL19' },
              { id: 'SAM7', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á ‡∏Å‡∏°.6', nameEN: 'Samrong Km.6', code: 'YL20' },
              { id: 'SAM8', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á ‡∏Å‡∏°.9', nameEN: 'Samrong Km.9', code: 'YL21' },
              { id: 'SAM9', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á ‡∏Å‡∏°.12', nameEN: 'Samrong Km.12', code: 'YL22' },
              { id: 'KEH', nameTH: '‡πÄ‡∏Ñ‡∏´‡∏∞', nameEN: 'Kheha', code: 'YL23' }
            ]
          },
          
          pink: {
            id: 'pink',
            nameTH: '‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π',
            nameEN: 'Pink Line',
            color: '#FF1493',
            totalStations: 32,
            operational: true,
            stations: [
              { id: 'KHR', nameTH: '‡πÅ‡∏Ñ‡∏£‡∏≤‡∏¢', nameEN: 'Khae Rai', code: 'PK01' },
              { id: 'MUT', nameTH: '‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á‡∏ò‡∏≤‡∏ô‡∏µ', nameEN: 'Muang Thong Thani', code: 'PK02' },
              { id: 'IMP', nameTH: '‡∏≠‡∏¥‡∏°‡πÅ‡∏û‡πá‡∏Ñ ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á‡∏ò‡∏≤‡∏ô‡∏µ', nameEN: 'IMPACT Muang Thong Thani', code: 'PK03' },
              { id: 'COS', nameTH: '‡∏Ñ‡∏≠‡∏™‡πÇ‡∏°‡∏ö‡∏≤‡∏ã‡∏≤‡∏£‡πå', nameEN: 'Cosmo Bazaar', code: 'PK04' },
              { id: 'GOV', nameTH: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Government Complex', code: 'PK05' },
              { id: 'MIN', nameTH: '‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç', nameEN: 'Ministry of Public Health', code: 'PK06' },
              { id: 'YAE2', nameTH: '‡πÅ‡∏¢‡∏Å‡∏ï‡∏¥‡∏ß‡∏≤‡∏ô‡∏ô‡∏ó‡πå', nameEN: 'Yaek Tiwanon', code: 'PK07' },
              { id: 'SAM10', nameTH: '‡∏™‡∏≤‡∏°‡∏±‡∏Ñ‡∏Ñ‡∏µ', nameEN: 'Samakkhi', code: 'PK08' },
              { id: 'ROY', nameTH: '‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏£‡∏≤‡∏ä‡∏ß‡∏¥‡∏ñ‡∏µ', nameEN: 'Rajavithi Hospital', code: 'PK09' },
              { id: 'RAN2', nameTH: '‡∏£‡∏≤‡∏á‡∏ô‡πâ‡∏≥', nameEN: 'Rang Nam', code: 'PK10' },
              { id: 'PRA2', nameTH: '‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏ô‡πâ‡∏≥', nameEN: 'Pratunam', code: 'PK11' },
              { id: 'RAT2', nameTH: '‡∏£‡∏≤‡∏ä‡∏õ‡∏£‡∏≤‡∏£‡∏†', nameEN: 'Ratchaprarop', code: 'PK12' },
              { id: 'MAK', nameTH: '‡∏°‡∏±‡∏Å‡∏Å‡∏∞‡∏™‡∏±‡∏ô', nameEN: 'Makkasan', code: 'PK13' },
              { id: 'RAM4', nameTH: '‡∏£‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏´‡∏á 12', nameEN: 'Ram Khamhaeng 12', code: 'PK14' },
              { id: 'LAM', nameTH: '‡∏•‡∏≤‡∏î‡∏°‡∏∞‡∏¢‡∏°', nameEN: 'Lad Mayom', code: 'PK15' },
              { id: 'RAM5', nameTH: '‡∏£‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏´‡∏á 34', nameEN: 'Ram Khamhaeng 34', code: 'PK16' },
              { id: 'WAT3', nameTH: '‡∏ß‡∏±‡∏î‡πÄ‡∏ó‡∏û‡∏•‡∏µ‡∏•‡∏≤', nameEN: 'Wat Thep Lila', code: 'PK17' },
              { id: 'KLO3', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡πâ‡∏≤', nameEN: 'Khlong Ban Ma', code: 'PK18' },
              { id: 'HIP', nameTH: '‡∏Æ‡∏¥‡∏õ‡πÇ‡∏õ‡πÇ‡∏î‡∏£‡∏°', nameEN: 'Hippodrome', code: 'PK19' },
              { id: 'CHO2', nameTH: '‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏ô‡∏ó‡∏£‡∏µ', nameEN: 'Chong Nonsi', code: 'PK20' },
              { id: 'KLO4', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢', nameEN: 'Khlong Toei', code: 'PK21' },
              { id: 'WAT4', nameTH: '‡∏ß‡∏±‡∏î‡∏ó‡∏∞‡πÄ‡∏•‡∏ó‡∏≠‡∏á', nameEN: 'Wat Tha Le Thong', code: 'PK22' },
              { id: 'MIN2', nameTH: '‡∏°‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Min Buri', code: 'PK23' },
              { id: 'MIN3', nameTH: '‡∏°‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ ‡∏Å‡∏°.7', nameEN: 'Min Buri Km.7', code: 'PK24' },
              { id: 'MIN4', nameTH: '‡∏°‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ ‡∏Å‡∏°.8', nameEN: 'Min Buri Km.8', code: 'PK25' },
              { id: 'LAT6', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á', nameEN: 'Lat Krabang', code: 'PK26' },
              { id: 'LAT7', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á ‡∏Å‡∏°.2', nameEN: 'Lat Krabang Km.2', code: 'PK27' },
              { id: 'LAT8', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á ‡∏Å‡∏°.4.5', nameEN: 'Lat Krabang Km.4.5', code: 'PK28' },
              { id: 'LAT9', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á ‡∏Å‡∏°.7.5', nameEN: 'Lat Krabang Km.7.5', code: 'PK29' },
              { id: 'LAT10', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á ‡∏Å‡∏°.10', nameEN: 'Lat Krabang Km.10', code: 'PK30' },
              { id: 'LAT11', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á ‡∏Å‡∏°.12', nameEN: 'Lat Krabang Km.12', code: 'PK31' },
              { id: 'MIN5', nameTH: '‡∏°‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ ‡∏Å‡∏°.14', nameEN: 'Min Buri Km.14', code: 'PK32' }
            ]
          }
        };

        const INTERCHANGE_STATIONS = [
          { station: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß', lines: ['blue', 'yellow'], codes: ['BL25', 'YL01'] },
          { station: '‡πÄ‡∏ï‡∏≤‡∏õ‡∏π‡∏ô', lines: ['purple'], codes: ['PP16'] },
          { station: '‡πÅ‡∏¢‡∏Å‡∏ï‡∏¥‡∏ß‡∏≤‡∏ô‡∏ô‡∏ó‡πå', lines: ['purple', 'pink'], codes: ['PP11', 'PK07'] }
        ];

        const TRAVEL_INFO = {
          averageTimePerStation: 2,
          averageWaitTime: 3,
          baseFare: 16,
          farePerStation: 2,
          maxFare: 42
        };

        function calculateDistance(fromStationId, toStationId, lineId) {
          const line = MRT_LINES[lineId];
          if (!line || !line.stations) return null;
          
          const fromIndex = line.stations.findIndex(station => station.id === fromStationId);
          const toIndex = line.stations.findIndex(station => station.id === toStationId);
          
          if (fromIndex === -1 || toIndex === -1) return null;
          
          return Math.abs(toIndex - fromIndex);
        }
        
        function getRouteStations(fromStationId, toStationId, lineId) {
          const line = MRT_LINES[lineId];
          if (!line || !line.stations) return [];
          
          const fromIndex = line.stations.findIndex(s => s.id === fromStationId);
          const toIndex = line.stations.findIndex(s => s.id === toStationId);
          
          if (fromIndex === -1 || toIndex === -1) return [];
          
          const start = Math.min(fromIndex, toIndex);
          const end = Math.max(fromIndex, toIndex);
          
          const routeStations = line.stations.slice(start, end + 1);
          
          // ‡∏´‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö
          if (fromIndex > toIndex) {
            routeStations.reverse();
          }
          
          return routeStations;
        }

        function calculateFare(distance) {
          if (distance === 0) return 0;
          
          const fare = TRAVEL_INFO.baseFare + (distance * TRAVEL_INFO.farePerStation);
          return Math.min(fare, TRAVEL_INFO.maxFare);
        }

        function calculateTravelTime(distance, isPeakHour = false) {
          if (distance === 0) return 0;
          
          const travelTime = (distance * TRAVEL_INFO.averageTimePerStation) + TRAVEL_INFO.averageWaitTime;
          const peakMultiplier = isPeakHour ? 1.3 : 1;
          
          return Math.round(travelTime * peakMultiplier);
        }

        let currentLanguage = localStorage.getItem('language') || 'th'; 
        let selectedCategory = null; 
        
        const translations = { 
          th: { 
            siteSubtitle: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô', 
            welcomeText: '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà', 
            welcomeDescription: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì', 
            searchPlaceholder: '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç...', 
            navHome: '‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å', 
            navCategories: '‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà', 
            navAbout: '‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤', 
            allCategories: '‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà', 
            transportation: '‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏°', 
            health: '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û', 
            finance: '‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô', 
            utilities: '‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏π‡∏õ‡πÇ‡∏†‡∏Ñ', 
            geography: '‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', 
            needNewCalc: '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà?', 
            newCalcDesc: '‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ', 
            requestCalcBtn: '‡∏Ç‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç', 
            footerText: '¬© 2024 4Calc ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏π‡πà‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì', 
            noResultsTitle: '‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç', 
            noResultsDesc: '‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏≠‡∏∑‡πà‡∏ô' 
          }, 
          en: { 
            siteSubtitle: 'All-in-One Calculator Hub', 
            welcomeText: 'Welcome to', 
            welcomeDescription: 'Your comprehensive calculator hub for all your daily calculations', 
            searchPlaceholder: 'Search calculators...', 
            navHome: 'Home', 
            navCategories: 'Categories', 
            navAbout: 'About', 
            allCategories: 'All Categories', 
            transportation: 'Transportation', 
            health: 'Health', 
            finance: 'Finance', 
            utilities: 'Utilities', 
            geography: 'Geography', 
            needNewCalc: 'Need a New Calculator?', 
            newCalcDesc: "We're constantly adding new calculators based on user needs", 
            requestCalcBtn: 'Request Calculator', 
            footerText: '¬© 2024 4Calc. All rights reserved. Your trusted calculator companion', 
            noResultsTitle: 'No calculators found', 
            noResultsDesc: 'Try adjusting your search or selecting a different category' 
          } 
        }; const calculators = { th: [ { id: 'mrt-time', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á MRT', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ MRT', emoji: 'üöá', category: 'transportation' }, { id: 'taxi-fare', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤', emoji: 'üöï', category: 'transportation' }, { id: 'pregnancy', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏£‡∏£‡∏†‡πå', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏•‡∏≠‡∏î‡πÅ‡∏•‡∏∞ milestone ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç', emoji: 'ü§±', category: 'health' }, { id: 'interest', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ó‡∏ö‡∏ï‡πâ‡∏ô', emoji: 'üí∞', category: 'finance' }, { id: 'btu', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BTU', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ BTU ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®', emoji: '‚ùÑÔ∏è', category: 'utilities' }, { id: 'distance', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏≠‡∏á‡∏à‡∏∏‡∏î', emoji: 'üìç', category: 'geography' } ], en: [ { id: 'mrt-time', name: 'MRT Time Calculator', description: 'Calculate travel time between MRT stations', emoji: 'üöá', category: 'transportation' }, { id: 'taxi-fare', name: 'Taxi Fare Calculator', description: 'Calculate taxi fare based on distance and time', emoji: 'üöï', category: 'transportation' }, { id: 'pregnancy', name: 'Pregnancy Calculator', description: 'Calculate due date and pregnancy milestones', emoji: 'ü§±', category: 'health' }, { id: 'interest', name: 'Interest Calculator', description: 'Calculate simple and compound interest', emoji: 'üí∞', category: 'finance' }, { id: 'btu', name: 'BTU Calculator', description: 'Calculate BTU requirements for air conditioning', emoji: '‚ùÑÔ∏è', category: 'utilities' }, { id: 'distance', name: 'Distance Calculator', description: 'Calculate distance between two points', emoji: 'üìç', category: 'geography' } ] }; document.addEventListener('DOMContentLoaded', function() { updateLanguage(); renderCalculators(); setupEventListeners(); }); function setupEventListeners() { document.getElementById('langButton').addEventListener('click', function() { const dropdown = document.getElementById('langDropdown'); dropdown.classList.toggle('show'); }); document.addEventListener('click', function(event) { if (!event.target.closest('.lang-btn')) { document.getElementById('langDropdown').classList.remove('show'); } }); document.getElementById('searchInput').addEventListener('input', function(e) { renderCalculators(e.target.value); }); document.querySelectorAll('.category-btn').forEach(btn => { btn.addEventListener('click', function() { const category = this.dataset.category; document.querySelectorAll('.category-btn').forEach(b => { b.className = 'category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors'; }); this.className = 'category-btn px-4 py-2 bg-blue-600 text-white border border-blue-600 rounded-lg hover:bg-blue-700 transition-colors'; selectedCategory = category === 'all' ? null : category; renderCalculators(); }); }); } function switchLanguage(lang) { currentLanguage = lang; localStorage.setItem('language', lang); const flagMap = { th: 'üáπüá≠', en: 'üá∫üá∏' }; const nameMap = { th: '‡πÑ‡∏ó‡∏¢', en: 'English' }; document.getElementById('currentFlag').textContent = flagMap[lang]; document.getElementById('currentLang').textContent = nameMap[lang]; document.getElementById('langDropdown').classList.remove('show'); updateLanguage(); renderCalculators(); } function updateLanguage() { const t = translations[currentLanguage]; document.getElementById('siteSubtitle').textContent = t.siteSubtitle; document.getElementById('welcomeText').textContent = t.welcomeText; document.getElementById('welcomeDescription').textContent = t.welcomeDescription; document.getElementById('searchInput').placeholder = t.searchPlaceholder; document.getElementById('nav-home').textContent = t.navHome; document.getElementById('nav-categories').textContent = t.navCategories; document.getElementById('nav-about').textContent = t.navAbout; document.getElementById('needNewCalc').textContent = t.needNewCalc; document.getElementById('newCalcDesc').textContent = t.newCalcDesc; document.getElementById('requestCalcBtn').textContent = t.requestCalcBtn; document.getElementById('footerText').textContent = t.footerText; const categoryTexts = [t.allCategories, t.transportation, t.health, t.finance, t.utilities, t.geography]; document.querySelectorAll('.category-btn span:last-child').forEach((span, index) => { span.textContent = categoryTexts[index]; }); } function renderCalculators(searchTerm = '') { const grid = document.getElementById('calculatorGrid'); const noResults = document.getElementById('noResults'); const currentCalculators = calculators[currentLanguage]; let filtered = currentCalculators.filter(calc => { const matchesSearch = calc.name.toLowerCase().includes(searchTerm.toLowerCase()) || calc.description.toLowerCase().includes(searchTerm.toLowerCase()); const matchesCategory = !selectedCategory || calc.category === selectedCategory; return matchesSearch && matchesCategory; }); if (filtered.length === 0) { grid.classList.add('hidden'); noResults.classList.remove('hidden'); return; } grid.classList.remove('hidden'); noResults.classList.add('hidden'); grid.innerHTML = filtered.map(calc => ` <div class="calculator-card bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer" onclick="showCalculator('${calc.id}')"> <div class="text-3xl mb-4">${calc.emoji}</div> <h3 class="text-lg font-semibold mb-2">${calc.name}</h3> <p class="text-gray-600 mb-3">${calc.description}</p> <span class="text-sm text-blue-600 font-medium"> ${translations[currentLanguage][calc.category]} </span> </div> `).join(''); } function showCalculator(type) { const modal = document.getElementById('calculatorModal'); const title = document.getElementById('modalTitle'); const content = document.getElementById('modalContent'); modal.classList.remove('hidden'); modal.classList.add('flex'); if (type === 'mrt-time') { title.textContent = currentLanguage === 'th' ? 'üöá ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á MRT' : 'üöá MRT Time Calculator'; content.innerHTML = getMRTCalculatorHTML(); } else { title.textContent = currentLanguage === 'th' ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤!' : 'Calculator Coming Soon!'; content.innerHTML = `<p class="text-center py-8 text-gray-500">${currentLanguage === 'th' ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á!' : 'This calculator is under development. Please check back later!'}</p>`; } } function closeCalculator() { const modal = document.getElementById('calculatorModal'); modal.classList.add('hidden'); modal.classList.remove('flex'); } function getMRTCalculatorHTML() {
          const isEnglish = currentLanguage === 'en';
          
          // Generate station options from comprehensive data
          let stationOptions = '';
          Object.keys(MRT_LINES).forEach(lineKey => {
            const line = MRT_LINES[lineKey];
            if (line.stations) {
              stationOptions += `<optgroup label="${isEnglish ? line.nameEN : line.nameTH}">`;
              line.stations.forEach(station => {
                const stationName = isEnglish ? station.nameEN : station.nameTH;
                stationOptions += `<option value="${station.id}" data-line="${lineKey}">${station.code} - ${stationName}</option>`;
              });
              stationOptions += '</optgroup>';
            }
          });
          
          return `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Trip Details' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á'}</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'From Station' : '‡∏à‡∏≤‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</label>
                    <select id="fromStation" class="w-full px-3 py-2 border rounded-lg">
                      <option value="">${isEnglish ? 'Select departure station' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á'}</option>
                      ${stationOptions}
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'To Station' : '‡πÑ‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</label>
                    <select id="toStation" class="w-full px-3 py-2 border rounded-lg">
                      <option value="">${isEnglish ? 'Select destination station' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á'}</option>
                      ${stationOptions}
                    </select>
                  </div>
                  <div>
                    <label class="flex items-center">
                      <input type="checkbox" id="isPeakHour" class="mr-2">
                      <span class="text-sm">${isEnglish ? 'Peak hours (Rush hour)' : '‡∏ä‡πà‡∏ß‡∏á‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô'}</span>
                    </label>
                  </div>
                  <button onclick="calculateMRT()" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    ${isEnglish ? 'Calculate' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                  </button>
                </div>
              </div>
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Results' : '‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå'}</h3>
                <div id="mrtResults" class="text-center py-8 text-gray-500">
                  ${isEnglish ? 'Select stations and click calculate' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </div>
              </div>
            </div>
          `;
        }

        // Global variables to store current route data
        let currentRouteData = null;
        
        function toggleRouteDetails() {
          // ‡∏´‡∏≤ elements ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ innerHTML ‡∏≠‡∏≤‡∏à‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
          const routeContainer = document.getElementById('routeDetails');
          const toggleIcon = document.getElementById('routeToggleIcon');
          const isEnglish = currentLanguage === 'en';
          
          if (!routeContainer) {
            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
            return;
          }
          
          if (!currentRouteData) {
            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô');
            return;
          }
          
          // Check if route is currently expanded
          const isExpanded = routeContainer.style.maxHeight !== '0px' && routeContainer.style.maxHeight !== '';
          
          if (!isExpanded) {
            // Expand route details
            const { fromStationId, toStationId, lineId } = currentRouteData;
            const routeStations = getRouteStations(fromStationId, toStationId, lineId);
            
            if (routeStations.length === 0) {
              const innerDiv = routeContainer.querySelector('div');
              if (innerDiv) {
                innerDiv.innerHTML = `<p class="text-red-500">${isEnglish ? 'Unable to calculate route' : '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏î‡πâ'}</p>`;
              }
              return;
            }
              
              let routeHTML = `
                <div class="bg-white p-4 rounded border">
                  <h4 class="font-semibold mb-3 text-gray-800">${isEnglish ? 'Route Details' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á'}</h4>
                  <div class="space-y-2">
              `;
              
              routeStations.forEach((station, index) => {
                const stationName = isEnglish ? station.nameEN : station.nameTH;
                const lineInfo = MRT_LINES[lineId];
                const lineColor = lineInfo.color;
                
                let timeInfo = '';
                if (index > 0) {
                  const timeFromPrevious = 2; // 2 minutes per station
                  timeInfo = `<span class="text-sm text-gray-500 ml-2">(+${timeFromPrevious} ${isEnglish ? 'min' : '‡∏ô‡∏≤‡∏ó‡∏µ'})</span>`;
                } else {
                  timeInfo = `<span class="text-sm text-gray-500 ml-2">(${isEnglish ? 'Start' : '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô'})</span>`;
                }
                
                const isStart = index === 0;
                const isEnd = index === routeStations.length - 1;
                
                routeHTML += `
                  <div class="flex items-center py-2 ${isStart ? 'bg-green-50' : isEnd ? 'bg-red-50' : 'bg-blue-50'} rounded px-3">
                    <div class="w-3 h-3 rounded-full mr-3" style="background-color: ${lineColor}"></div>
                    <div class="flex-1">
                      <strong>${station.code}</strong> - ${stationName}
                      ${timeInfo}
                    </div>
                    ${isStart ? '<span class="text-green-600 text-sm font-medium">üöá ' + (isEnglish ? 'Start' : '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô') + '</span>' : ''}
                    ${isEnd ? '<span class="text-red-600 text-sm font-medium">üèÅ ' + (isEnglish ? 'End' : '‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á') + '</span>' : ''}
                  </div>
                `;
              });
              
              routeHTML += `
                  </div>
                  <div class="mt-3 p-2 bg-gray-100 rounded text-sm">
                    <strong>${isEnglish ? 'Total stations:' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏£‡∏ß‡∏°:'}</strong> ${routeStations.length}<br>
                    <strong>${isEnglish ? 'Estimated time:' : '‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì:'}</strong> ${(routeStations.length - 1) * 2 + 3} ${isEnglish ? 'minutes' : '‡∏ô‡∏≤‡∏ó‡∏µ'}
                  </div>
                </div>
              `;
              
              // Set content first
              const innerDiv = routeContainer.querySelector('div');
              if (innerDiv) {
                innerDiv.innerHTML = routeHTML;
              } else {
                return;
              }
              
              // Force reflow to calculate actual height
              routeContainer.style.maxHeight = 'none';
              const actualHeight = routeContainer.scrollHeight;
              routeContainer.style.maxHeight = '0px';
              
              // Trigger expansion with slight delay for smooth animation
              setTimeout(() => {
                routeContainer.style.maxHeight = actualHeight + 'px';
              }, 10);
              
              // Rotate icon
              if (toggleIcon) {
                toggleIcon.style.transform = 'rotate(180deg)';
              }
          } else {
            // Collapse route details
            routeContainer.style.maxHeight = '0px';
            
            // Rotate icon back
            if (toggleIcon) {
              toggleIcon.style.transform = 'rotate(0deg)';
            }
          }
        }

        function calculateMRT() {
          const fromStationId = document.getElementById('fromStation').value;
          const toStationId = document.getElementById('toStation').value;
          const isPeakHour = document.getElementById('isPeakHour').checked;
          const results = document.getElementById('mrtResults');
          const isEnglish = currentLanguage === 'en';
          
          // Reset route details state
          currentRouteData = null;
          
          if (!fromStationId || !toStationId) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please select both stations' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á'}</p>`;
            return;
          }
          
          if (fromStationId === toStationId) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please select different stations' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô'}</p>`;
            return;
          }
          
          // Find stations and their lines
          let fromStation = null, toStation = null;
          let fromLine = null, toLine = null;
          
          Object.keys(MRT_LINES).forEach(lineKey => {
            const line = MRT_LINES[lineKey];
            if (line.stations) {
              const foundFrom = line.stations.find(s => s.id === fromStationId);
              const foundTo = line.stations.find(s => s.id === toStationId);
              
              if (foundFrom) {
                fromStation = foundFrom;
                fromLine = lineKey;
              }
              if (foundTo) {
                toStation = foundTo;
                toLine = lineKey;
              }
            }
          });
          
          if (!fromStation || !toStation) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Station not found' : '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</p>`;
            return;
          }
          
          // Calculate if same line or need transfer
          let distance = 0;
          let transferInfo = '';
          
          if (fromLine === toLine) {
            // Same line - direct calculation
            distance = calculateDistance(fromStationId, toStationId, fromLine);
            
            // Store route data for toggle function
            currentRouteData = {
              fromStationId: fromStationId,
              toStationId: toStationId,
              lineId: fromLine
            };
          } else {
            // Different lines - need transfer (simplified calculation)
            // For now, we'll calculate approximate distance via interchange stations
            distance = 8; // Estimated average for cross-line transfers
            transferInfo = isEnglish 
              ? `<div class="p-2 bg-yellow-100 rounded text-sm"><strong>Note:</strong> Transfer required between lines</div>`
              : `<div class="p-2 bg-yellow-100 rounded text-sm"><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢</div>`;
              
            // Store route data for toggle function (use primary line for now)
            currentRouteData = {
              fromStationId: fromStationId,
              toStationId: toStationId,
              lineId: fromLine
            };
          }
          
          const time = calculateTravelTime(distance, isPeakHour);
          const fare = calculateFare(distance);
          
          const fromName = isEnglish ? fromStation.nameEN : fromStation.nameTH;
          const toName = isEnglish ? toStation.nameEN : toStation.nameTH;
          const fromLineDisplay = isEnglish ? MRT_LINES[fromLine].nameEN : MRT_LINES[fromLine].nameTH;
          const toLineDisplay = isEnglish ? MRT_LINES[toLine].nameEN : MRT_LINES[toLine].nameTH;
          
          results.innerHTML = `
            <div class="space-y-3 text-left">
              <div class="p-3 bg-blue-50 rounded">
                <strong>${isEnglish ? 'From:' : '‡∏à‡∏≤‡∏Å:'}</strong> ${fromStation.code} - ${fromName}<br>
                <small class="text-gray-600">${fromLineDisplay}</small><br>
                <strong>${isEnglish ? 'To:' : '‡πÑ‡∏õ:'}</strong> ${toStation.code} - ${toName}<br>
                <small class="text-gray-600">${toLineDisplay}</small>
              </div>
              ${transferInfo}
              <div class="p-3 bg-green-50 rounded">
                <strong>${isEnglish ? 'Travel Time:' : '‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á:'}</strong> ${time} ${isEnglish ? 'minutes' : '‡∏ô‡∏≤‡∏ó‡∏µ'}
                ${isPeakHour ? `<br><small class="text-gray-600">${isEnglish ? '(Including peak hour delay)' : '(‡∏£‡∏ß‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤‡∏ä‡πà‡∏ß‡∏á‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô)'}</small>` : ''}
              </div>
              <div class="p-3 bg-yellow-50 rounded cursor-pointer hover:bg-yellow-100 transition-colors" onclick="toggleRouteDetails()">
                <div class="flex items-center justify-between">
                  <div>
                    <strong>${isEnglish ? 'Distance:' : '‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á:'}</strong> 
                    <span class="text-blue-600 hover:text-blue-800 underline">${distance} ${isEnglish ? 'stations' : '‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</span>
                  </div>
                  <div class="flex items-center">
                    <span class="text-sm text-gray-500 mr-2">(${isEnglish ? 'Click to view route' : '‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏π‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á'})</span>
                    <svg id="routeToggleIcon" class="w-5 h-5 text-gray-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                  </div>
                </div>
              </div>
              <div id="routeDetails" class="overflow-hidden transition-all duration-300 ease-in-out" style="max-height: 0;">
                <div class="p-3 bg-gray-50 rounded border mt-3">
                  <!-- Route details will be inserted here -->
                </div>
              </div>
              <div class="p-3 bg-purple-50 rounded">
                <strong>${isEnglish ? 'Fare:' : '‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£:'}</strong> ‡∏ø${fare}
              </div>
            </div>
          `;
        }

        // ======================
        // TAXI FARE CALCULATOR
        // ======================

        // Import taxi calculator functions (inline version)
        const TAXI_RATES = {
          regular: {
            name: '‡∏£‡∏ñ‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏Å‡∏ï‡∏¥',
            nameEN: 'Regular Size Taxi',
            baseFare: 35.00,
            rates: [
              { min: 1.01, max: 10, rate: 6.50 },
              { min: 10.01, max: 20, rate: 7.00 },
              { min: 20.01, max: 40, rate: 8.00 },
              { min: 40.01, max: 60, rate: 8.50 },
              { min: 60.01, max: 80, rate: 9.00 },
              { min: 80.01, max: Infinity, rate: 10.50 }
            ]
          },
          large: {
            name: '‡∏£‡∏ñ‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà',
            nameEN: 'Large Size Taxi',
            baseFare: 40.00,
            rates: [
              { min: 1.01, max: 10, rate: 6.50 },
              { min: 10.01, max: 20, rate: 7.00 },
              { min: 20.01, max: 40, rate: 8.00 },
              { min: 40.01, max: 60, rate: 8.50 },
              { min: 60.01, max: 80, rate: 9.00 },
              { min: 80.01, max: Infinity, rate: 10.50 }
            ]
          }
        };

        const WAITING_RATE = {
          ratePerMinute: 3.00,
          speedThreshold: 6
        };

        const ADDITIONAL_CHARGES = {
          appBooking: 20,
          airportSurcharge: 50
        };

        function calculateDistanceFare(distance, taxiType = 'regular') {
          if (distance <= 0) return 0;
          
          const rateConfig = TAXI_RATES[taxiType];
          if (!rateConfig) return 0;
          
          let totalFare = rateConfig.baseFare;
          
          if (distance <= 1) {
            return totalFare;
          }
          
          let remainingDistance = distance - 1;
          
          for (const rateRange of rateConfig.rates) {
            if (remainingDistance <= 0) break;
            
            const distanceInRange = Math.min(
              remainingDistance,
              rateRange.max - Math.max(rateRange.min - 1, 0)
            );
            
            totalFare += distanceInRange * rateRange.rate;
            remainingDistance -= distanceInRange;
          }
          
          return Math.round(totalFare * 100) / 100;
        }

        function calculateWaitingFare(waitingTimeMinutes) {
          if (waitingTimeMinutes <= 0) return 0;
          return Math.round(waitingTimeMinutes * WAITING_RATE.ratePerMinute * 100) / 100;
        }

        function calculateTaxiFare({
          distance,
          waitingTime = 0,
          taxiType = 'regular',
          isAppBooking = false,
          isAirportPickup = false
        }) {
          if (distance <= 0) {
            return {
              error: '‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0 ‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£',
              errorEN: 'Distance must be greater than 0 kilometers'
            };
          }
          
          const distanceFare = calculateDistanceFare(distance, taxiType);
          const waitingFare = calculateWaitingFare(waitingTime);
          
          let additionalFee = 0;
          const additionalCharges = [];
          
          if (isAppBooking) {
            additionalFee += ADDITIONAL_CHARGES.appBooking;
            additionalCharges.push({
              name: '‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏≠‡∏õ',
              nameEN: 'App Booking Fee',
              amount: ADDITIONAL_CHARGES.appBooking
            });
          }
          
          if (isAirportPickup) {
            additionalFee += ADDITIONAL_CHARGES.airportSurcharge;
            additionalCharges.push({
              name: '‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô',
              nameEN: 'Airport Surcharge',
              amount: ADDITIONAL_CHARGES.airportSurcharge
            });
          }
          
          const totalFare = distanceFare + waitingFare + additionalFee;
          
          return {
            success: true,
            breakdown: {
              distanceFare,
              waitingFare,
              additionalFee,
              additionalCharges
            },
            total: Math.round(totalFare * 100) / 100,
            taxiInfo: TAXI_RATES[taxiType],
            distance,
            waitingTime
          };
        }

        // Update showCalculator function to handle taxi-fare
        const originalShowCalculator = showCalculator;
        showCalculator = function(type) {
          const modal = document.getElementById('calculatorModal');
          const title = document.getElementById('modalTitle');
          const content = document.getElementById('modalContent');
          
          modal.classList.remove('hidden');
          modal.classList.add('flex');
          
          if (type === 'mrt-time') {
            title.textContent = currentLanguage === 'th' ? 'üöá ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á MRT' : 'üöá MRT Time Calculator';
            content.innerHTML = getMRTCalculatorHTML();
          } else if (type === 'taxi-fare') {
            title.textContent = currentLanguage === 'th' ? 'üöï ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà' : 'üöï Taxi Fare Calculator';
            content.innerHTML = getTaxiCalculatorHTML();
          } else if (type === 'btu') {
            title.textContent = currentLanguage === 'th' ? '‚ùÑÔ∏è ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BTU ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®' : '‚ùÑÔ∏è BTU Air Conditioner Calculator';
            content.innerHTML = getBTUCalculatorHTML();
          } else if (type === 'pregnancy') {
            title.textContent = currentLanguage === 'th' ? 'ü§± ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏£‡∏£‡∏†‡πå' : 'ü§± Pregnancy Calculator';
            content.innerHTML = getPregnancyCalculatorHTML();
          } else if (type === 'interest') {
            title.textContent = currentLanguage === 'th' ? 'üí∞ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢' : 'üí∞ Interest Calculator';
            content.innerHTML = getInterestCalculatorHTML();
          } else {
            title.textContent = currentLanguage === 'th' ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤!' : 'Calculator Coming Soon!';
            content.innerHTML = `<p class="text-center py-8 text-gray-500">${currentLanguage === 'th' ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á!' : 'This calculator is under development. Please check back later!'}</p>`;
          }
        };

        function getTaxiCalculatorHTML() {
          const isEnglish = currentLanguage === 'en';
          
          return `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Trip Details' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á'}</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'Distance (km)' : '‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£)'}</label>
                    <input type="number" id="taxiDistance" placeholder="${isEnglish ? 'Enter distance in kilometers' : '‡πÉ‡∏™‡πà‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£'}" 
                           class="w-full px-3 py-2 border rounded-lg" min="0.1" step="0.1">
                  </div>
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'Traffic Time (minutes)' : '‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏¥‡∏î/‡∏£‡∏≠ (‡∏ô‡∏≤‡∏ó‡∏µ)'}</label>
                    <input type="number" id="taxiWaitTime" placeholder="${isEnglish ? 'Enter waiting time in minutes' : '‡πÉ‡∏™‡πà‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏≤‡∏ó‡∏µ'}" 
                           class="w-full px-3 py-2 border rounded-lg" min="0" step="1" value="0">
                  </div>
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'Taxi Type' : '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà'}</label>
                    <select id="taxiType" class="w-full px-3 py-2 border rounded-lg">
                      <option value="regular">${isEnglish ? 'Regular Size (‡∏ø35 base)' : '‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (‡∏ø35 ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)'}</option>
                      <option value="large">${isEnglish ? 'Large Size (‡∏ø40 base)' : '‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà (‡∏ø40 ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)'}</option>
                    </select>
                  </div>
                  <div class="space-y-2">
                    <label class="flex items-center">
                      <input type="checkbox" id="isAppBooking" class="mr-2">
                      <span class="text-sm">${isEnglish ? 'App booking (+‡∏ø20)' : '‡∏à‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏õ (+‡∏ø20)'}</span>
                    </label>
                    <label class="flex items-center">
                      <input type="checkbox" id="isAirportPickup" class="mr-2">
                      <span class="text-sm">${isEnglish ? 'Airport pickup (+‡∏ø50)' : '‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô (+‡∏ø50)'}</span>
                    </label>
                  </div>
                  <button onclick="calculateTaxi()" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    ${isEnglish ? 'Calculate Fare' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£'}
                  </button>
                </div>
              </div>
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Fare Breakdown' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£'}</h3>
                <div id="taxiResults" class="text-center py-8 text-gray-500">
                  ${isEnglish ? 'Enter distance and click calculate' : '‡πÉ‡∏™‡πà‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </div>
              </div>
            </div>
          `;
        }

        function calculateTaxi() {
          const distance = parseFloat(document.getElementById('taxiDistance').value);
          const waitingTime = parseInt(document.getElementById('taxiWaitTime').value) || 0;
          const taxiType = document.getElementById('taxiType').value;
          const isAppBooking = document.getElementById('isAppBooking').checked;
          const isAirportPickup = document.getElementById('isAirportPickup').checked;
          const results = document.getElementById('taxiResults');
          const isEnglish = currentLanguage === 'en';
          
          if (!distance || distance <= 0) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please enter a valid distance' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'}</p>`;
            return;
          }
          
          const result = calculateTaxiFare({
            distance,
            waitingTime,
            taxiType,
            isAppBooking,
            isAirportPickup
          });
          
          if (result.error) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? result.errorEN : result.error}</p>`;
            return;
          }
          
          const taxiInfo = result.taxiInfo;
          const breakdown = result.breakdown;
          
          let additionalChargesHTML = '';
          if (breakdown.additionalCharges.length > 0) {
            additionalChargesHTML = breakdown.additionalCharges.map(charge => 
              `<div class="flex justify-between">
                <span>${isEnglish ? charge.nameEN : charge.name}:</span>
                <span>‡∏ø${charge.amount}</span>
              </div>`
            ).join('');
          }
          
          results.innerHTML = `
            <div class="space-y-3 text-left">
              <div class="p-3 bg-blue-50 rounded">
                <strong>${isEnglish ? 'Taxi Type:' : '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ:'}</strong> ${isEnglish ? taxiInfo.nameEN : taxiInfo.name}<br>
                <strong>${isEnglish ? 'Distance:' : '‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á:'}</strong> ${distance} ${isEnglish ? 'km' : '‡∏Å‡∏°.'}<br>
                ${waitingTime > 0 ? `<strong>${isEnglish ? 'Waiting Time:' : '‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠:'}</strong> ${waitingTime} ${isEnglish ? 'minutes' : '‡∏ô‡∏≤‡∏ó‡∏µ'}<br>` : ''}
              </div>
              
              <div class="p-3 bg-green-50 rounded">
                <h4 class="font-semibold mb-2">${isEnglish ? 'Fare Breakdown' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£'}</h4>
                <div class="space-y-1 text-sm">
                  <div class="flex justify-between">
                    <span>${isEnglish ? 'Base fare (1st km):' : '‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (1 ‡∏Å‡∏°.‡πÅ‡∏£‡∏Å):'}</span>
                    <span>‡∏ø${taxiInfo.baseFare}</span>
                  </div>
                  ${distance > 1 ? `
                  <div class="flex justify-between">
                    <span>${isEnglish ? 'Distance fare:' : '‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á:'}</span>
                    <span>‡∏ø${(breakdown.distanceFare - taxiInfo.baseFare).toFixed(2)}</span>
                  </div>` : ''}
                  ${breakdown.waitingFare > 0 ? `
                  <div class="flex justify-between">
                    <span>${isEnglish ? 'Waiting fare:' : '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠:'}</span>
                    <span>‡∏ø${breakdown.waitingFare}</span>
                  </div>` : ''}
                  ${additionalChargesHTML}
                  <hr class="my-2">
                  <div class="flex justify-between font-semibold text-lg">
                    <span>${isEnglish ? 'Total Fare:' : '‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏£‡∏ß‡∏°:'}</span>
                    <span class="text-green-600">‡∏ø${result.total}</span>
                  </div>
                </div>
              </div>
              
              <div class="p-3 bg-yellow-50 rounded text-sm">
                <strong>${isEnglish ? 'Note:' : '‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:'}</strong>
                ${isEnglish ? 'Rates according to Ministry of Transport announcement (effective Jan 13, 2023)' : '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏° (‡∏°‡∏µ‡∏ú‡∏•‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ 13 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2566)'}
              </div>
            </div>
          `;
        }

        // ======================
        // BTU CALCULATOR
        // ======================

        // BTU Constants (inline version)
        const BTU_CONSTANTS = {
          BASE_BTU_PER_SQM: 600,
          BASE_BTU_PER_SQFT: 25,
          
          DIRECTION_FACTORS: {
            north: 0.9,
            northeast: 0.95,
            east: 1.0,
            southeast: 1.1,
            south: 1.15,
            southwest: 1.1,
            west: 1.05,
            northwest: 0.95
          },
          
          FLOOR_FACTORS: {
            ground: 0.95,
            middle: 1.0,
            top: 1.15
          },
          
          PEOPLE_BTU: 600,
          
          APPLIANCE_BTU: {
            computer: 300,
            tv: 200,
            refrigerator: 1000,
            lighting: 100,
            oven: 2000
          },
          
          CEILING_HEIGHT_FACTORS: {
            low: 0.9,
            normal: 1.0,
            high: 1.1
          },
          
          ROOM_TYPE_FACTORS: {
            bedroom: 0.9,
            living: 1.0,
            kitchen: 1.2,
            office: 1.1,
            server: 1.5
          }
        };

        const STANDARD_BTU_SIZES = [
          { btu: 9000, ton: 0.75, type: '9,000 BTU (3/4 ‡∏ï‡∏±‡∏ô)' },
          { btu: 12000, ton: 1.0, type: '12,000 BTU (1 ‡∏ï‡∏±‡∏ô)' },
          { btu: 18000, ton: 1.5, type: '18,000 BTU (1.5 ‡∏ï‡∏±‡∏ô)' },
          { btu: 24000, ton: 2.0, type: '24,000 BTU (2 ‡∏ï‡∏±‡∏ô)' },
          { btu: 30000, ton: 2.5, type: '30,000 BTU (2.5 ‡∏ï‡∏±‡∏ô)' },
          { btu: 36000, ton: 3.0, type: '36,000 BTU (3 ‡∏ï‡∏±‡∏ô)' },
          { btu: 42000, ton: 3.5, type: '42,000 BTU (3.5 ‡∏ï‡∏±‡∏ô)' },
          { btu: 48000, ton: 4.0, type: '48,000 BTU (4 ‡∏ï‡∏±‡∏ô)' }
        ];

        function calculateBaseBTU(area, unit = 'sqm') {
          if (area <= 0) return 0;
          
          if (unit === 'sqft') {
            return area * BTU_CONSTANTS.BASE_BTU_PER_SQFT;
          } else {
            return area * BTU_CONSTANTS.BASE_BTU_PER_SQM;
          }
        }

        function findRecommendedACSize(requiredBTU) {
          const suitable = STANDARD_BTU_SIZES.find(size => size.btu >= requiredBTU);
          
          if (!suitable) {
            const largestSize = STANDARD_BTU_SIZES[STANDARD_BTU_SIZES.length - 1];
            const machineCount = Math.ceil(requiredBTU / largestSize.btu);
            
            return {
              single: false,
              machineCount,
              eachMachine: largestSize,
              totalBTU: machineCount * largestSize.btu,
              message: `‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ ${machineCount} ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡∏Ç‡∏ô‡∏≤‡∏î ${largestSize.type} ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á`
            };
          }
          
          return {
            single: true,
            recommended: suitable,
            efficiency: Math.round((requiredBTU / suitable.btu) * 100),
            message: `‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ç‡∏ô‡∏≤‡∏î ${suitable.type}`
          };
        }

        function calculateBTUTotal({
          area,
          unit = 'sqm',
          direction = 'east',
          floor = 'middle',
          peopleCount = 2,
          roomType = 'living',
          ceilingHeight = 'normal',
          appliances = {
            computer: 0,
            tv: 0,
            refrigerator: 0,
            lighting: 0,
            oven: 0
          }
        }) {
          if (area <= 0) {
            return {
              error: '‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0',
              errorEN: 'Room area must be greater than 0'
            };
          }
          
          const baseBTU = calculateBaseBTU(area, unit);
          
          const directionFactor = BTU_CONSTANTS.DIRECTION_FACTORS[direction] || 1.0;
          const floorFactor = BTU_CONSTANTS.FLOOR_FACTORS[floor] || 1.0;
          const roomTypeFactor = BTU_CONSTANTS.ROOM_TYPE_FACTORS[roomType] || 1.0;
          const ceilingFactor = BTU_CONSTANTS.CEILING_HEIGHT_FACTORS[ceilingHeight] || 1.0;
          
          const peopleBTU = peopleCount * BTU_CONSTANTS.PEOPLE_BTU;
          
          let applianceBTU = 0;
          Object.keys(appliances).forEach(appliance => {
            const count = appliances[appliance] || 0;
            const btuPerUnit = BTU_CONSTANTS.APPLIANCE_BTU[appliance] || 0;
            applianceBTU += count * btuPerUnit;
          });
          
          const adjustedBaseBTU = baseBTU * directionFactor * floorFactor * roomTypeFactor * ceilingFactor;
          const totalBTU = adjustedBaseBTU + peopleBTU + applianceBTU;
          
          const recommendedSize = findRecommendedACSize(totalBTU);
          
          return {
            success: true,
            calculation: {
              baseBTU: Math.round(baseBTU),
              adjustedBaseBTU: Math.round(adjustedBaseBTU),
              peopleBTU,
              applianceBTU,
              totalBTU: Math.round(totalBTU)
            },
            factors: {
              direction: directionFactor,
              floor: floorFactor,
              roomType: roomTypeFactor,
              ceiling: ceilingFactor
            },
            recommendation: recommendedSize,
            area,
            unit
          };
        }

        function getBTUCalculatorHTML() {
          const isEnglish = currentLanguage === 'en';
          
          return `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Room Details' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡πâ‡∏≠‡∏á'}</h3>
                <div class="space-y-4">
                  <div class="grid grid-cols-2 gap-2">
                    <div>
                      <label class="block text-sm font-medium mb-2">${isEnglish ? 'Area' : '‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà'}</label>
                      <input type="number" id="btuArea" placeholder="${isEnglish ? 'Enter area' : '‡πÉ‡∏™‡πà‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà'}" 
                             class="w-full px-3 py-2 border rounded-lg" min="1" step="0.1">
                    </div>
                    <div>
                      <label class="block text-sm font-medium mb-2">${isEnglish ? 'Unit' : '‡∏´‡∏ô‡πà‡∏ß‡∏¢'}</label>
                      <select id="btuUnit" class="w-full px-3 py-2 border rounded-lg">
                        <option value="sqm">${isEnglish ? 'Square meters (m¬≤)' : '‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏°‡∏ï‡∏£ (‡∏ï‡∏£.‡∏°.)'}</option>
                        <option value="sqft">${isEnglish ? 'Square feet (ft¬≤)' : '‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ü‡∏∏‡∏ï (‡∏ï‡∏£.‡∏ü‡∏ï.)'}</option>
                      </select>
                    </div>
                  </div>
                  
                  <div class="grid grid-cols-2 gap-2">
                    <div>
                      <label class="block text-sm font-medium mb-2">${isEnglish ? 'Direction' : '‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á'}</label>
                      <select id="btuDirection" class="w-full px-3 py-2 border rounded-lg">
                        <option value="north">${isEnglish ? 'North' : '‡πÄ‡∏´‡∏ô‡∏∑‡∏≠'}</option>
                        <option value="northeast">${isEnglish ? 'Northeast' : '‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏â‡∏µ‡∏¢‡∏á‡πÄ‡∏´‡∏ô‡∏∑‡∏≠'}</option>
                        <option value="east" selected>${isEnglish ? 'East' : '‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å'}</option>
                        <option value="southeast">${isEnglish ? 'Southeast' : '‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏â‡∏µ‡∏¢‡∏á‡πÉ‡∏ï‡πâ'}</option>
                        <option value="south">${isEnglish ? 'South' : '‡πÉ‡∏ï‡πâ'}</option>
                        <option value="southwest">${isEnglish ? 'Southwest' : '‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å‡πÄ‡∏â‡∏µ‡∏¢‡∏á‡πÉ‡∏ï‡πâ'}</option>
                        <option value="west">${isEnglish ? 'West' : '‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å'}</option>
                        <option value="northwest">${isEnglish ? 'Northwest' : '‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å‡πÄ‡∏â‡∏µ‡∏¢‡∏á‡πÄ‡∏´‡∏ô‡∏∑‡∏≠'}</option>
                      </select>
                    </div>
                    <div>
                      <label class="block text-sm font-medium mb-2">${isEnglish ? 'Floor' : '‡∏ä‡∏±‡πâ‡∏ô'}</label>
                      <select id="btuFloor" class="w-full px-3 py-2 border rounded-lg">
                        <option value="ground">${isEnglish ? 'Ground floor' : '‡∏ä‡∏±‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á'}</option>
                        <option value="middle" selected>${isEnglish ? 'Middle floor' : '‡∏ä‡∏±‡πâ‡∏ô‡∏Å‡∏•‡∏≤‡∏á'}</option>
                        <option value="top">${isEnglish ? 'Top floor' : '‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏ô‡∏™‡∏∏‡∏î'}</option>
                      </select>
                    </div>
                  </div>
                  
                  <div class="grid grid-cols-2 gap-2">
                    <div>
                      <label class="block text-sm font-medium mb-2">${isEnglish ? 'Room Type' : '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡πâ‡∏≠‡∏á'}</label>
                      <select id="btuRoomType" class="w-full px-3 py-2 border rounded-lg">
                        <option value="bedroom">${isEnglish ? 'Bedroom' : '‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô'}</option>
                        <option value="living" selected>${isEnglish ? 'Living room' : '‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô'}</option>
                        <option value="kitchen">${isEnglish ? 'Kitchen' : '‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ß'}</option>
                        <option value="office">${isEnglish ? 'Office' : '‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô'}</option>
                        <option value="server">${isEnglish ? 'Server room' : '‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå'}</option>
                      </select>
                    </div>
                    <div>
                      <label class="block text-sm font-medium mb-2">${isEnglish ? 'Ceiling Height' : '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏û‡∏î‡∏≤‡∏ô'}</label>
                      <select id="btuCeiling" class="w-full px-3 py-2 border rounded-lg">
                        <option value="low">${isEnglish ? 'Low (< 2.5m)' : '‡∏ï‡πà‡∏≥ (< 2.5 ‡∏°.)'}</option>
                        <option value="normal" selected>${isEnglish ? 'Normal (2.5-3m)' : '‡∏õ‡∏Å‡∏ï‡∏¥ (2.5-3 ‡∏°.)'}</option>
                        <option value="high">${isEnglish ? 'High (> 3m)' : '‡∏™‡∏π‡∏á (> 3 ‡∏°.)'}</option>
                      </select>
                    </div>
                  </div>
                  
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'Number of People' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô'}</label>
                    <input type="number" id="btuPeople" value="2" min="0" max="50"
                           class="w-full px-3 py-2 border rounded-lg">
                  </div>
                  
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'Electrical Appliances' : '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÑ‡∏ü‡∏ü‡πâ‡∏≤'}</label>
                    <div class="grid grid-cols-2 gap-2 text-sm">
                      <div class="flex justify-between items-center">
                        <span>${isEnglish ? 'Computer' : '‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå'}</span>
                        <input type="number" id="btuComputer" value="0" min="0" max="10" class="w-16 px-2 py-1 border rounded text-center">
                      </div>
                      <div class="flex justify-between items-center">
                        <span>${isEnglish ? 'TV' : '‡∏ó‡∏µ‡∏ß‡∏µ'}</span>
                        <input type="number" id="btuTv" value="0" min="0" max="5" class="w-16 px-2 py-1 border rounded text-center">
                      </div>
                      <div class="flex justify-between items-center">
                        <span>${isEnglish ? 'Refrigerator' : '‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô'}</span>
                        <input type="number" id="btuRefrigerator" value="0" min="0" max="3" class="w-16 px-2 py-1 border rounded text-center">
                      </div>
                      <div class="flex justify-between items-center">
                        <span>${isEnglish ? 'Lighting' : '‡∏´‡∏•‡∏≠‡∏î‡πÑ‡∏ü'}</span>
                        <input type="number" id="btuLighting" value="0" min="0" max="20" class="w-16 px-2 py-1 border rounded text-center">
                      </div>
                    </div>
                  </div>
                  
                  <button onclick="calculateBTU()" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    ${isEnglish ? 'Calculate BTU' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BTU'}
                  </button>
                </div>
              </div>
              
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Calculation Results' : '‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}</h3>
                <div id="btuResults" class="text-center py-8 text-gray-500">
                  ${isEnglish ? 'Enter room details and click calculate' : '‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </div>
              </div>
            </div>
          `;
        }

        function calculateBTU() {
          const area = parseFloat(document.getElementById('btuArea').value);
          const unit = document.getElementById('btuUnit').value;
          const direction = document.getElementById('btuDirection').value;
          const floor = document.getElementById('btuFloor').value;
          const roomType = document.getElementById('btuRoomType').value;
          const ceilingHeight = document.getElementById('btuCeiling').value;
          const peopleCount = parseInt(document.getElementById('btuPeople').value) || 0;
          
          const appliances = {
            computer: parseInt(document.getElementById('btuComputer').value) || 0,
            tv: parseInt(document.getElementById('btuTv').value) || 0,
            refrigerator: parseInt(document.getElementById('btuRefrigerator').value) || 0,
            lighting: parseInt(document.getElementById('btuLighting').value) || 0,
            oven: 0
          };
          
          const results = document.getElementById('btuResults');
          const isEnglish = currentLanguage === 'en';
          
          if (!area || area <= 0) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please enter a valid area' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'}</p>`;
            return;
          }
          
          const result = calculateBTUTotal({
            area,
            unit,
            direction,
            floor,
            peopleCount,
            roomType,
            ceilingHeight,
            appliances
          });
          
          if (result.error) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? result.errorEN : result.error}</p>`;
            return;
          }
          
          const calculation = result.calculation;
          const recommendation = result.recommendation;
          
          results.innerHTML = `
            <div class="space-y-3 text-left">
              <div class="p-3 bg-blue-50 rounded">
                <strong>${isEnglish ? 'Room:' : '‡∏´‡πâ‡∏≠‡∏á:'}</strong> ${area} ${unit === 'sqm' ? (isEnglish ? 'm¬≤' : '‡∏ï‡∏£.‡∏°.') : (isEnglish ? 'ft¬≤' : '‡∏ï‡∏£.‡∏ü‡∏ï.')}<br>
                <strong>${isEnglish ? 'People:' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô:'}</strong> ${peopleCount} ${isEnglish ? 'people' : '‡∏Ñ‡∏ô'}
              </div>
              
              <div class="p-3 bg-green-50 rounded">
                <h4 class="font-semibold mb-2">${isEnglish ? 'BTU Breakdown' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î BTU'}</h4>
                <div class="space-y-1 text-sm">
                  <div class="flex justify-between">
                    <span>${isEnglish ? 'Base BTU:' : 'BTU ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô:'}</span>
                    <span>${calculation.baseBTU.toLocaleString()}</span>
                  </div>
                  <div class="flex justify-between">
                    <span>${isEnglish ? 'Room adjustments:' : '‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏´‡πâ‡∏≠‡∏á:'}</span>
                    <span>${(calculation.adjustedBaseBTU - calculation.baseBTU).toLocaleString()}</span>
                  </div>
                  ${calculation.peopleBTU > 0 ? `
                  <div class="flex justify-between">
                    <span>${isEnglish ? 'People BTU:' : 'BTU ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ô:'}</span>
                    <span>+${calculation.peopleBTU.toLocaleString()}</span>
                  </div>` : ''}
                  ${calculation.applianceBTU > 0 ? `
                  <div class="flex justify-between">
                    <span>${isEnglish ? 'Appliances BTU:' : 'BTU ‡∏à‡∏≤‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå:'}</span>
                    <span>+${calculation.applianceBTU.toLocaleString()}</span>
                  </div>` : ''}
                  <hr class="my-2">
                  <div class="flex justify-between font-semibold text-lg">
                    <span>${isEnglish ? 'Total BTU Required:' : 'BTU ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°:'}</span>
                    <span class="text-green-600">${calculation.totalBTU.toLocaleString()}</span>
                  </div>
                </div>
              </div>
              
              <div class="p-3 bg-purple-50 rounded">
                <h4 class="font-semibold mb-2">${isEnglish ? 'Recommendation' : '‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥'}</h4>
                ${recommendation.single ? `
                  <p class="text-sm"><strong>${isEnglish ? 'Recommended Size:' : '‡∏Ç‡∏ô‡∏≤‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:'}</strong></p>
                  <p class="text-lg font-semibold text-purple-600">${recommendation.recommended.type}</p>
                  <p class="text-sm text-gray-600">${isEnglish ? 'Efficiency:' : '‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û:'} ${recommendation.efficiency}%</p>
                ` : `
                  <p class="text-sm text-orange-600"><strong>${isEnglish ? 'Large Area Alert:' : '‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà:'}</strong></p>
                  <p class="text-sm">${recommendation.message}</p>
                `}
              </div>
              
              <div class="p-3 bg-yellow-50 rounded text-sm">
                <strong>${isEnglish ? 'Tips:' : '‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:'}</strong>
                ${isEnglish ? 'Choose Inverter AC for energy saving. Consider room insulation for better efficiency.' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏≠‡∏£‡πå Inverter ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏ü ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏â‡∏ô‡∏ß‡∏ô‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô'}
              </div>
            </div>
          `;
        }

        // ======================
        // PREGNANCY CALCULATOR
        // ======================

        // Pregnancy constants (inline version)
        const PREGNANCY_CONSTANTS = {
          STANDARD_PREGNANCY_DAYS: 280,
          STANDARD_PREGNANCY_WEEKS: 40,
          
          TRIMESTERS: {
            first: { start: 0, end: 13, name: '‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™‡πÅ‡∏£‡∏Å', nameEN: 'First Trimester' },
            second: { start: 14, end: 27, name: '‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á', nameEN: 'Second Trimester' },
            third: { start: 28, end: 42, name: '‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°', nameEN: 'Third Trimester' }
          },
          
          NORMAL_DELIVERY_RANGE: {
            early: 37,
            late: 42
          }
        };

        const PREGNANCY_MILESTONES = {
          4: {
            th: "‚ù§Ô∏è ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ï‡πâ‡∏ô, ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ó‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤",
            en: "‚ù§Ô∏è Heart starts beating, nervous system begins developing"
          },
          8: {
            th: "üë∂ ‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏¥‡∏î, ‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 1.6 ‡∏ã‡∏°.",
            en: "üë∂ Major organs begin forming, about 1.6 cm in size"
          },
          12: {
            th: "ü¶¥ ‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏Ç‡πá‡∏á, ‡πÄ‡∏û‡∏®‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô",
            en: "ü¶¥ Bones start hardening, gender becomes clear"
          },
          16: {
            th: "üëÇ ‡∏´‡∏π‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡∏ô, ‡∏ú‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏à‡∏£‡∏¥‡∏ç",
            en: "üëÇ Ears start hearing, hair begins growing"
          },
          20: {
            th: "ü§± ‡πÅ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏î‡πá‡∏Å‡∏î‡∏¥‡πâ‡∏ô, ‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 25 ‡∏ã‡∏°.",
            en: "ü§± Mother starts feeling movement, about 25 cm long"
          },
          24: {
            th: "üëÅÔ∏è ‡∏ï‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ, ‡∏õ‡∏≠‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤",
            en: "üëÅÔ∏è Eyes can open, lungs start developing"
          },
          28: {
            th: "üß† ‡∏™‡∏°‡∏≠‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏£‡πá‡∏ß, ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏£‡∏≠‡∏î‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏•‡∏≠‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î",
            en: "üß† Rapid brain development, viable if born premature"
          },
          32: {
            th: "üí™ ‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏Ç‡∏∂‡πâ‡∏ô, ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏∞‡∏™‡∏°‡πÑ‡∏Ç‡∏°‡∏±‡∏ô",
            en: "üí™ Stronger muscles, fat storage begins"
          },
          36: {
            th: "ü´Å ‡∏õ‡∏≠‡∏î‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°, ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2.5 ‡∏Å‡∏Å.",
            en: "ü´Å Lungs nearly ready, weight about 2.5 kg"
          },
          40: {
            th: "üçº ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏•‡∏≠‡∏î! ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 3-3.5 ‡∏Å‡∏Å.",
            en: "üçº Ready for birth! Weight about 3-3.5 kg"
          }
        };

        const TRIMESTER_ADVICE = {
          first: {
            th: [
              "ü•ó ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ó‡∏≤‡∏ô‡πÇ‡∏ü‡∏•‡∏¥‡∏Å‡πÅ‡∏≠‡∏ã‡∏¥‡∏î 400-800 ‡πÑ‡∏°‡πÇ‡∏Ñ‡∏£‡∏Å‡∏£‡∏±‡∏°/‡∏ß‡∏±‡∏ô",
              "üö≠ ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà ‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå ‡πÅ‡∏•‡∏∞‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î",
              "‚òï ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏≤‡πÄ‡∏ü‡∏≠‡∏µ‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 200 ‡∏°‡∏Å./‡∏ß‡∏±‡∏ô",
              "üò¥ ‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î"
            ],
            en: [
              "ü•ó Take 400-800 mcg folic acid daily",
              "üö≠ Avoid smoking, alcohol, and drugs",
              "‚òï Limit caffeine to under 200mg/day",
              "üò¥ Get adequate rest, manage stress"
            ]
          },
          second: {
            th: [
              "üèÉ‚Äç‚ôÄÔ∏è ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏î‡∏¥‡∏ô ‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥ ‡πÇ‡∏¢‡∏Ñ‡∏∞",
              "ü©∫ ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏£‡∏£‡∏†‡πå‡∏ó‡∏∏‡∏Å 4 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå",
              "ü•õ ‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 8-10 ‡πÅ‡∏Å‡πâ‡∏ß/‡∏ß‡∏±‡∏ô",
              "üëï ‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏Ñ‡∏•‡∏≤‡∏¢‡∏ó‡πâ‡∏≠‡∏á ‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏™‡πâ‡∏ô‡πÄ‡∏ï‡∏µ‡πâ‡∏¢"
            ],
            en: [
              "üèÉ‚Äç‚ôÄÔ∏è Exercise regularly: walking, swimming, yoga",
              "ü©∫ Prenatal checkups every 4 weeks",
              "ü•õ Stay hydrated, at least 8-10 glasses/day",
              "üëï Wear loose clothing, low-heeled shoes"
            ]
          },
          third: {
            th: [
              "üéí ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏Ñ‡∏•‡∏≠‡∏î ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏î‡πá‡∏Å",
              "üè• ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏•‡∏≤‡∏™‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏•‡∏≠‡∏î ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•",
              "üòå ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏à‡∏¥‡∏ï‡πÉ‡∏à ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ó‡πà‡∏≤‡∏Ñ‡∏•‡∏≠‡∏î",
              "üë• ‡∏à‡∏±‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏•‡∏≠‡∏î"
            ],
            en: [
              "üéí Pack hospital bag, buy baby essentials",
              "üè• Attend birthing classes, choose hospital",
              "üòå Mental preparation, learn birthing positions",
              "üë• Arrange postpartum support system"
            ]
          }
        };

        function calculatePregnancyFromLMP(lmpDate, currentDate = new Date()) {
          if (!lmpDate || !(lmpDate instanceof Date)) {
            return {
              error: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á',
              errorEN: 'Invalid LMP date'
            };
          }
          
          const daysDiff = Math.floor((currentDate - lmpDate) / (1000 * 60 * 60 * 24));
          
          if (daysDiff < 0) {
            return {
              error: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏ß‡∏±‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô',
              errorEN: 'LMP date cannot be in the future'
            };
          }
          
          if (daysDiff > 300) {
            return {
              error: '‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏£‡∏£‡∏†‡πå‡πÄ‡∏Å‡∏¥‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥',
              errorEN: 'Pregnancy age exceeds normal range'
            };
          }
          
          const weeks = Math.floor(daysDiff / 7);
          const days = daysDiff % 7;
          
          const eddDate = new Date(lmpDate);
          eddDate.setDate(eddDate.getDate() + PREGNANCY_CONSTANTS.STANDARD_PREGNANCY_DAYS);
          
          const trimester = getPregnancyTrimester(weeks);
          const progressPercent = Math.min((weeks / PREGNANCY_CONSTANTS.STANDARD_PREGNANCY_WEEKS) * 100, 100);
          const daysRemaining = Math.max(0, Math.floor((eddDate - currentDate) / (1000 * 60 * 60 * 24)));
          
          return {
            success: true,
            gestationalAge: {
              totalDays: daysDiff,
              weeks,
              days,
              displayText: `${weeks} ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå ${days} ‡∏ß‡∏±‡∏ô`,
              displayTextEN: `${weeks} weeks ${days} days`
            },
            trimester,
            eddDate,
            lmpDate,
            currentDate,
            progressPercent: Math.round(progressPercent),
            daysRemaining,
            weeksRemaining: Math.ceil(daysRemaining / 7),
            milestone: getCurrentPregnancyMilestone(weeks),
            advice: TRIMESTER_ADVICE[trimester.key],
            isFullTerm: weeks >= PREGNANCY_CONSTANTS.NORMAL_DELIVERY_RANGE.early,
            deliveryStatus: getPregnancyDeliveryStatus(weeks)
          };
        }

        function getPregnancyTrimester(weeks) {
          const trimesters = PREGNANCY_CONSTANTS.TRIMESTERS;
          
          if (weeks <= trimesters.first.end) {
            return { ...trimesters.first, key: 'first' };
          } else if (weeks <= trimesters.second.end) {
            return { ...trimesters.second, key: 'second' };
          } else {
            return { ...trimesters.third, key: 'third' };
          }
        }

        function getCurrentPregnancyMilestone(weeks) {
          const milestoneWeeks = Object.keys(PREGNANCY_MILESTONES).map(Number).sort((a, b) => a - b);
          const passedMilestone = milestoneWeeks.filter(week => week <= weeks).pop();
          
          if (passedMilestone) {
            return {
              week: passedMilestone,
              ...PREGNANCY_MILESTONES[passedMilestone]
            };
          }
          
          const nextMilestone = milestoneWeeks.find(week => week > weeks);
          if (nextMilestone) {
            return {
              week: nextMilestone,
              isUpcoming: true,
              ...PREGNANCY_MILESTONES[nextMilestone]
            };
          }
          
          return null;
        }

        function getPregnancyDeliveryStatus(weeks) {
          const { early, late } = PREGNANCY_CONSTANTS.NORMAL_DELIVERY_RANGE;
          
          if (weeks < early) {
            return {
              status: 'preterm',
              message: '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏•‡∏≠‡∏î',
              messageEN: 'Preterm - not yet due',
              color: 'blue'
            };
          } else if (weeks >= early && weeks <= late) {
            return {
              status: 'term',
              message: '‡∏ñ‡∏∂‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏•‡∏≠‡∏î‡πÅ‡∏•‡πâ‡∏ß',
              messageEN: 'Full term - ready for delivery',
              color: 'green'
            };
          } else {
            return {
              status: 'overdue',
              message: '‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏•‡∏≠‡∏î',
              messageEN: 'Overdue - past due date',
              color: 'red'
            };
          }
        }

        function getPregnancyCalculatorHTML() {
          const isEnglish = currentLanguage === 'en';
          
          return `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Pregnancy Calculation' : '‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏£‡∏£‡∏†‡πå'}</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium mb-2">
                      ${isEnglish ? 'Calculation Method' : '‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                    </label>
                    <select id="pregnancyMethod" onchange="togglePregnancyInputs()" class="w-full px-3 py-2 border rounded-lg">
                      <option value="lmp">${isEnglish ? 'Last Menstrual Period (LMP)' : '‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ (LMP)'}</option>
                      <option value="conception">${isEnglish ? 'Conception Date' : '‡∏ß‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏£‡∏†‡πå/‡∏ú‡∏™‡∏°'}</option>
                    </select>
                  </div>
                  
                  <div id="lmpInput">
                    <label class="block text-sm font-medium mb-2">
                      ${isEnglish ? 'Last Menstrual Period Date' : '‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢'}
                    </label>
                    <input type="date" id="lmpDate" class="w-full px-3 py-2 border rounded-lg">
                    <p class="text-xs text-gray-500 mt-1">
                      ${isEnglish ? 'Select the first day of your last menstrual period' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢'}
                    </p>
                  </div>
                  
                  <div id="conceptionInput" style="display: none;">
                    <label class="block text-sm font-medium mb-2">
                      ${isEnglish ? 'Conception/Fertilization Date' : '‡∏ß‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏£‡∏†‡πå/‡∏ú‡∏™‡∏°'}
                    </label>
                    <input type="date" id="conceptionDate" class="w-full px-3 py-2 border rounded-lg">
                    <p class="text-xs text-gray-500 mt-1">
                      ${isEnglish ? 'Select the estimated conception date' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏£‡∏†‡πå'}
                    </p>
                  </div>
                  
                  <button onclick="calculatePregnancy()" class="w-full px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700">
                    ${isEnglish ? 'Calculate Pregnancy Age' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏£‡∏£‡∏†‡πå'}
                  </button>
                  
                  <div class="text-xs text-gray-500 space-y-1">
                    <p>${isEnglish ? '‚Ä¢ Results are estimates for information only' : '‚Ä¢ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô'}</p>
                    <p>${isEnglish ? '‚Ä¢ Consult your doctor for accurate information' : '‚Ä¢ ‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥'}</p>
                  </div>
                </div>
              </div>
              
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Pregnancy Information' : '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏£‡∏†‡πå'}</h3>
                <div id="pregnancyResults" class="text-center py-8 text-gray-500">
                  ${isEnglish ? 'Enter your last menstrual period date and calculate' : '‡πÉ‡∏™‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </div>
              </div>
            </div>
          `;
        }

        function togglePregnancyInputs() {
          const method = document.getElementById('pregnancyMethod').value;
          const lmpInput = document.getElementById('lmpInput');
          const conceptionInput = document.getElementById('conceptionInput');
          
          if (method === 'lmp') {
            lmpInput.style.display = 'block';
            conceptionInput.style.display = 'none';
          } else {
            lmpInput.style.display = 'none';
            conceptionInput.style.display = 'block';
          }
        }

        function calculatePregnancy() {
          const method = document.getElementById('pregnancyMethod').value;
          const results = document.getElementById('pregnancyResults');
          const isEnglish = currentLanguage === 'en';
          
          let inputDate;
          if (method === 'lmp') {
            const lmpDateValue = document.getElementById('lmpDate').value;
            if (!lmpDateValue) {
              results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please select your last menstrual period date' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢'}</p>`;
              return;
            }
            inputDate = new Date(lmpDateValue);
          } else {
            const conceptionDateValue = document.getElementById('conceptionDate').value;
            if (!conceptionDateValue) {
              results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please select conception date' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏£‡∏†‡πå'}</p>`;
              return;
            }
            inputDate = new Date(conceptionDateValue);
            // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô LMP ‡πÇ‡∏î‡∏¢‡∏•‡∏ö 14 ‡∏ß‡∏±‡∏ô
            inputDate.setDate(inputDate.getDate() - 14);
          }
          
          const result = calculatePregnancyFromLMP(inputDate);
          
          if (result.error) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? result.errorEN : result.error}</p>`;
            return;
          }
          
          const { gestationalAge, trimester, eddDate, progressPercent, daysRemaining, milestone, advice, deliveryStatus } = result;
          
          results.innerHTML = `
            <div class="space-y-4 text-left">
              <!-- ‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏£‡∏£‡∏†‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô -->
              <div class="p-4 bg-pink-50 rounded-lg border-l-4 border-pink-400">
                <h4 class="font-semibold text-lg mb-2">${isEnglish ? 'Current Gestational Age' : '‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏£‡∏£‡∏†‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô'}</h4>
                <div class="text-2xl font-bold text-pink-600 mb-2">
                  ${isEnglish ? gestationalAge.displayTextEN : gestationalAge.displayText}
                </div>
                <div class="text-sm text-gray-600">
                  ${isEnglish ? trimester.nameEN : trimester.name} ‚Ä¢ ${progressPercent}% ${isEnglish ? 'complete' : '‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß'}
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                  <div class="bg-pink-600 h-2 rounded-full" style="width: ${progressPercent}%"></div>
                </div>
              </div>
              
              <!-- ‡∏ß‡∏±‡∏ô‡∏Ñ‡∏•‡∏≠‡∏î‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå -->
              <div class="p-4 bg-blue-50 rounded-lg">
                <h4 class="font-semibold mb-2">${isEnglish ? 'Estimated Due Date' : '‡∏ß‡∏±‡∏ô‡∏Ñ‡∏•‡∏≠‡∏î‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå'}</h4>
                <div class="text-lg font-semibold text-blue-600">
                  ${eddDate.toLocaleDateString(isEnglish ? 'en-US' : 'th-TH', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                  })}
                </div>
                <div class="text-sm text-gray-600 mt-1">
                  ${isEnglish ? `${daysRemaining} days remaining` : `‡∏≠‡∏µ‡∏Å ${daysRemaining} ‡∏ß‡∏±‡∏ô`}
                  ${result.weeksRemaining > 0 ? ` (${result.weeksRemaining} ${isEnglish ? 'weeks' : '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå'})` : ''}
                </div>
                <div class="mt-2">
                  <span class="inline-block px-2 py-1 text-xs rounded-full bg-${deliveryStatus.color}-100 text-${deliveryStatus.color}-800">
                    ${isEnglish ? deliveryStatus.messageEN : deliveryStatus.message}
                  </span>
                </div>
              </div>
              
              <!-- ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£ -->
              ${milestone ? `
              <div class="p-4 bg-purple-50 rounded-lg">
                <h4 class="font-semibold mb-2">${isEnglish ? 'Development Milestone' : '‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£'}</h4>
                <div class="text-sm">
                  <strong>${isEnglish ? 'Week' : '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà'} ${milestone.week}:</strong>
                  ${milestone.isUpcoming ? `<span class="text-orange-600">(${isEnglish ? 'Upcoming' : '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏°‡∏≤‡∏ñ‡∏∂‡∏á'})</span>` : ''}
                </div>
                <div class="text-sm mt-1">
                  ${isEnglish ? milestone.en : milestone.th}
                </div>
              </div>
              ` : ''}
              
              <!-- ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ -->
              <div class="p-4 bg-green-50 rounded-lg">
                <h4 class="font-semibold mb-2">${isEnglish ? 'Recommendations' : '‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥'}</h4>
                <ul class="text-sm space-y-1">
                  ${(isEnglish ? advice.en : advice.th).map(tip => `<li>${tip}</li>`).join('')}
                </ul>
              </div>
              
              <!-- ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
              <div class="p-3 bg-yellow-50 rounded-lg text-sm border-l-4 border-yellow-400">
                <strong>${isEnglish ? 'Important:' : '‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:'}</strong>
                ${isEnglish ? 'This calculator provides estimates only. Always consult your healthcare provider for accurate information and personalized care.' : '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•'}
              </div>
            </div>
          `;
        }

        // ======================
        // INTEREST CALCULATOR
        // ======================

        // Interest constants (inline version)
        const INTEREST_CONSTANTS_INLINE = {
          COMPOUNDING_FREQUENCIES: {
            annually: 1,
            semiannually: 2,
            quarterly: 4,
            monthly: 12,
            weekly: 52,
            daily: 365
          },
          
          MARKET_RATES: {
            savings: { min: 0.1, max: 1.5, name: '‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏≠‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå', nameEN: 'Savings Account' },
            fixed: { min: 1.0, max: 2.5, name: '‡∏ù‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏à‡∏≥', nameEN: 'Fixed Deposit' },
            loan: { min: 5.0, max: 20.0, name: '‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠', nameEN: 'Personal Loan' },
            mortgage: { min: 3.0, max: 6.0, name: '‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡πâ‡∏≤‡∏ô', nameEN: 'Mortgage' },
            credit: { min: 18.0, max: 28.0, name: '‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï', nameEN: 'Credit Card' }
          }
        };

        function calculateSimpleInterestInline(principal, rate, time) {
          if (principal <= 0 || rate < 0 || time <= 0) {
            return {
              error: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0, ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏•‡∏ö',
              errorEN: 'Invalid input: Principal and time must be > 0, rate must be ‚â• 0'
            };
          }
          
          const rateDecimal = rate / 100;
          const interest = principal * rateDecimal * time;
          const totalAmount = principal + interest;
          
          return {
            success: true,
            type: 'simple',
            calculation: {
              principal,
              rate,
              time,
              interest: Math.round(interest * 100) / 100,
              totalAmount: Math.round(totalAmount * 100) / 100
            }
          };
        }

        function calculateCompoundInterestInline(principal, rate, time, compoundFrequency = 12) {
          if (principal <= 0 || rate < 0 || time <= 0 || compoundFrequency <= 0) {
            return {
              error: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á',
              errorEN: 'Invalid input'
            };
          }
          
          const rateDecimal = rate / 100;
          const totalAmount = principal * Math.pow(1 + rateDecimal / compoundFrequency, compoundFrequency * time);
          const compoundInterest = totalAmount - principal;
          const simpleInterest = principal * rateDecimal * time;
          const extraInterest = compoundInterest - simpleInterest;
          
          return {
            success: true,
            type: 'compound',
            calculation: {
              principal,
              rate,
              time,
              compoundFrequency,
              compoundInterest: Math.round(compoundInterest * 100) / 100,
              totalAmount: Math.round(totalAmount * 100) / 100,
              simpleInterest: Math.round(simpleInterest * 100) / 100,
              extraInterest: Math.round(extraInterest * 100) / 100
            }
          };
        }

        function calculateMonthlySavingsInline(monthlyAmount, rate, years, initialAmount = 0) {
          if (monthlyAmount < 0 || rate < 0 || years <= 0 || initialAmount < 0) {
            return {
              error: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á',
              errorEN: 'Invalid input'
            };
          }
          
          const monthlyRate = rate / 100 / 12;
          const totalMonths = years * 12;
          
          const initialWithInterest = initialAmount * Math.pow(1 + monthlyRate, totalMonths);
          
          let monthlySavingsTotal = 0;
          if (monthlyAmount > 0 && rate > 0) {
            monthlySavingsTotal = monthlyAmount * ((Math.pow(1 + monthlyRate, totalMonths) - 1) / monthlyRate);
          } else if (monthlyAmount > 0) {
            monthlySavingsTotal = monthlyAmount * totalMonths;
          }
          
          const totalContributions = initialAmount + (monthlyAmount * totalMonths);
          const totalAmount = initialWithInterest + monthlySavingsTotal;
          const totalInterest = totalAmount - totalContributions;
          
          return {
            success: true,
            type: 'savings',
            calculation: {
              monthlyAmount,
              rate,
              years,
              initialAmount,
              totalContributions: Math.round(totalContributions * 100) / 100,
              totalInterest: Math.round(totalInterest * 100) / 100,
              totalAmount: Math.round(totalAmount * 100) / 100
            }
          };
        }

        function calculateLoanPaymentInline(loanAmount, rate, years) {
          if (loanAmount <= 0 || rate < 0 || years <= 0) {
            return {
              error: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á',
              errorEN: 'Invalid input'
            };
          }
          
          const monthlyRate = rate / 100 / 12;
          const totalMonths = years * 12;
          
          let monthlyPayment;
          if (rate === 0) {
            monthlyPayment = loanAmount / totalMonths;
          } else {
            monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, totalMonths)) / 
                            (Math.pow(1 + monthlyRate, totalMonths) - 1);
          }
          
          const totalPayment = monthlyPayment * totalMonths;
          const totalInterest = totalPayment - loanAmount;
          
          return {
            success: true,
            type: 'loan',
            calculation: {
              loanAmount,
              rate,
              years,
              monthlyPayment: Math.round(monthlyPayment * 100) / 100,
              totalPayment: Math.round(totalPayment * 100) / 100,
              totalInterest: Math.round(totalInterest * 100) / 100
            }
          };
        }

        function getInterestCalculatorHTML() {
          const isEnglish = currentLanguage === 'en';
          
          return `
            <div class="space-y-6">
              <!-- Calculator Type Selection -->
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Calculator Type' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                  <button onclick="switchInterestType('simple')" id="btn-simple" class="p-3 text-sm border rounded-lg hover:bg-blue-50 transition-colors">
                    <div class="font-medium">${isEnglish ? 'Simple Interest' : '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤'}</div>
                    <div class="text-xs text-gray-500">${isEnglish ? 'Basic calculation' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô'}</div>
                  </button>
                  <button onclick="switchInterestType('compound')" id="btn-compound" class="p-3 text-sm border rounded-lg hover:bg-blue-50 transition-colors">
                    <div class="font-medium">${isEnglish ? 'Compound Interest' : '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏ö‡∏ï‡πâ‡∏ô'}</div>
                    <div class="text-xs text-gray-500">${isEnglish ? 'With compounding' : '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏ö‡∏ï‡πâ‡∏ô'}</div>
                  </button>
                  <button onclick="switchInterestType('savings')" id="btn-savings" class="p-3 text-sm border rounded-lg hover:bg-blue-50 transition-colors">
                    <div class="font-medium">${isEnglish ? 'Monthly Savings' : '‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô'}</div>
                    <div class="text-xs text-gray-500">${isEnglish ? 'Regular deposits' : '‡∏ù‡∏≤‡∏Å‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠'}</div>
                  </button>
                  <button onclick="switchInterestType('loan')" id="btn-loan" class="p-3 text-sm border rounded-lg hover:bg-blue-50 transition-colors">
                    <div class="font-medium">${isEnglish ? 'Loan Payment' : '‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞'}</div>
                    <div class="text-xs text-gray-500">${isEnglish ? 'Monthly payments' : '‡∏ú‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô'}</div>
                  </button>
                </div>
              </div>
              
              <!-- Input Forms -->
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-gray-50 p-4 rounded-lg">
                  <div id="interestInputs">
                    <!-- Dynamic content will be loaded here -->
                  </div>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg">
                  <h3 class="font-semibold mb-4">${isEnglish ? 'Calculation Results' : '‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}</h3>
                  <div id="interestResults" class="text-center py-8 text-gray-500">
                    ${isEnglish ? 'Select calculation type and enter values' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'}
                  </div>
                </div>
              </div>
            </div>
          `;
        }

        let currentInterestType = 'simple';

        function switchInterestType(type) {
          currentInterestType = type;
          
          // Update button styles
          document.querySelectorAll('[id^="btn-"]').forEach(btn => {
            btn.className = 'p-3 text-sm border rounded-lg hover:bg-blue-50 transition-colors';
          });
          document.getElementById('btn-' + type).className = 'p-3 text-sm border-2 border-blue-500 bg-blue-50 rounded-lg';
          
          loadInterestInputs(type);
          clearInterestResults();
        }

        function loadInterestInputs(type) {
          const isEnglish = currentLanguage === 'en';
          const inputsDiv = document.getElementById('interestInputs');
          
          if (type === 'simple') {
            inputsDiv.innerHTML = `
              <h3 class="font-semibold mb-4">${isEnglish ? 'Simple Interest' : '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤'}</h3>
              <div class="space-y-3">
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Principal Amount (‡∏ø)' : '‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô (‡∏ö‡∏≤‡∏ó)'}</label>
                  <input type="number" id="simplePrincipal" placeholder="${isEnglish ? 'Enter amount' : '‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô'}" class="w-full px-3 py-2 border rounded-lg" min="1" step="1">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Interest Rate (% per year)' : '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (% ‡∏ï‡πà‡∏≠‡∏õ‡∏µ)'}</label>
                  <input type="number" id="simpleRate" placeholder="${isEnglish ? 'e.g., 5.5' : '‡πÄ‡∏ä‡πà‡∏ô 5.5'}" class="w-full px-3 py-2 border rounded-lg" min="0" step="0.1">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Time Period (years)' : '‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡∏õ‡∏µ)'}</label>
                  <input type="number" id="simpleTime" placeholder="${isEnglish ? 'e.g., 2.5' : '‡πÄ‡∏ä‡πà‡∏ô 2.5'}" class="w-full px-3 py-2 border rounded-lg" min="0.1" step="0.1">
                </div>
                <button onclick="calculateInterest()" class="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                  ${isEnglish ? 'Calculate' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </button>
              </div>
            `;
          } else if (type === 'compound') {
            inputsDiv.innerHTML = `
              <h3 class="font-semibold mb-4">${isEnglish ? 'Compound Interest' : '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏ö‡∏ï‡πâ‡∏ô'}</h3>
              <div class="space-y-3">
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Principal Amount (‡∏ø)' : '‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô (‡∏ö‡∏≤‡∏ó)'}</label>
                  <input type="number" id="compoundPrincipal" placeholder="${isEnglish ? 'Enter amount' : '‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô'}" class="w-full px-3 py-2 border rounded-lg" min="1" step="1">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Interest Rate (% per year)' : '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (% ‡∏ï‡πà‡∏≠‡∏õ‡∏µ)'}</label>
                  <input type="number" id="compoundRate" placeholder="${isEnglish ? 'e.g., 5.5' : '‡πÄ‡∏ä‡πà‡∏ô 5.5'}" class="w-full px-3 py-2 border rounded-lg" min="0" step="0.1">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Time Period (years)' : '‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡∏õ‡∏µ)'}</label>
                  <input type="number" id="compoundTime" placeholder="${isEnglish ? 'e.g., 2.5' : '‡πÄ‡∏ä‡πà‡∏ô 2.5'}" class="w-full px-3 py-2 border rounded-lg" min="0.1" step="0.1">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Compounding Frequency' : '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏¥‡∏î‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢'}</label>
                  <select id="compoundFreq" class="w-full px-3 py-2 border rounded-lg">
                    <option value="12">${isEnglish ? 'Monthly' : '‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô'}</option>
                    <option value="4">${isEnglish ? 'Quarterly' : '‡∏£‡∏≤‡∏¢‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™'}</option>
                    <option value="2">${isEnglish ? 'Semi-annually' : '‡∏£‡∏≤‡∏¢ 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô'}</option>
                    <option value="1">${isEnglish ? 'Annually' : '‡∏£‡∏≤‡∏¢‡∏õ‡∏µ'}</option>
                    <option value="365">${isEnglish ? 'Daily' : '‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô'}</option>
                  </select>
                </div>
                <button onclick="calculateInterest()" class="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                  ${isEnglish ? 'Calculate' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </button>
              </div>
            `;
          } else if (type === 'savings') {
            inputsDiv.innerHTML = `
              <h3 class="font-semibold mb-4">${isEnglish ? 'Monthly Savings' : '‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô'}</h3>
              <div class="space-y-3">
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Initial Amount (‡∏ø)' : '‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏ö‡∏≤‡∏ó)'}</label>
                  <input type="number" id="savingsInitial" placeholder="${isEnglish ? 'Starting amount' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô'}" class="w-full px-3 py-2 border rounded-lg" min="0" step="1" value="0">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Monthly Deposit (‡∏ø)' : '‡∏ù‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ö‡∏≤‡∏ó)'}</label>
                  <input type="number" id="savingsMonthly" placeholder="${isEnglish ? 'Monthly amount' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô'}" class="w-full px-3 py-2 border rounded-lg" min="0" step="1">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Interest Rate (% per year)' : '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (% ‡∏ï‡πà‡∏≠‡∏õ‡∏µ)'}</label>
                  <input type="number" id="savingsRate" placeholder="${isEnglish ? 'e.g., 2.5' : '‡πÄ‡∏ä‡πà‡∏ô 2.5'}" class="w-full px-3 py-2 border rounded-lg" min="0" step="0.1">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Time Period (years)' : '‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡∏õ‡∏µ)'}</label>
                  <input type="number" id="savingsTime" placeholder="${isEnglish ? 'e.g., 5' : '‡πÄ‡∏ä‡πà‡∏ô 5'}" class="w-full px-3 py-2 border rounded-lg" min="0.1" step="0.1">
                </div>
                <button onclick="calculateInterest()" class="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                  ${isEnglish ? 'Calculate' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </button>
              </div>
            `;
          } else if (type === 'loan') {
            inputsDiv.innerHTML = `
              <h3 class="font-semibold mb-4">${isEnglish ? 'Loan Payment' : '‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞'}</h3>
              <div class="space-y-3">
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Loan Amount (‡∏ø)' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏π‡πâ (‡∏ö‡∏≤‡∏ó)'}</label>
                  <input type="number" id="loanAmount" placeholder="${isEnglish ? 'Total loan amount' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏π‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'}" class="w-full px-3 py-2 border rounded-lg" min="1" step="1">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Interest Rate (% per year)' : '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (% ‡∏ï‡πà‡∏≠‡∏õ‡∏µ)'}</label>
                  <input type="number" id="loanRate" placeholder="${isEnglish ? 'e.g., 7.5' : '‡πÄ‡∏ä‡πà‡∏ô 7.5'}" class="w-full px-3 py-2 border rounded-lg" min="0" step="0.1">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">${isEnglish ? 'Loan Term (years)' : '‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡πà‡∏≠‡∏ô (‡∏õ‡∏µ)'}</label>
                  <input type="number" id="loanTime" placeholder="${isEnglish ? 'e.g., 3' : '‡πÄ‡∏ä‡πà‡∏ô 3'}" class="w-full px-3 py-2 border rounded-lg" min="0.1" step="0.1">
                </div>
                <button onclick="calculateInterest()" class="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                  ${isEnglish ? 'Calculate' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </button>
              </div>
            `;
          }
        }

        function calculateInterest() {
          const results = document.getElementById('interestResults');
          const isEnglish = currentLanguage === 'en';
          
          let result;
          
          if (currentInterestType === 'simple') {
            const principal = parseFloat(document.getElementById('simplePrincipal').value);
            const rate = parseFloat(document.getElementById('simpleRate').value);
            const time = parseFloat(document.getElementById('simpleTime').value);
            
            if (!principal || !rate || !time) {
              results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please fill in all fields' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö'}</p>`;
              return;
            }
            
            result = calculateSimpleInterestInline(principal, rate, time);
          } else if (currentInterestType === 'compound') {
            const principal = parseFloat(document.getElementById('compoundPrincipal').value);
            const rate = parseFloat(document.getElementById('compoundRate').value);
            const time = parseFloat(document.getElementById('compoundTime').value);
            const freq = parseInt(document.getElementById('compoundFreq').value);
            
            if (!principal || !rate || !time) {
              results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please fill in all fields' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö'}</p>`;
              return;
            }
            
            result = calculateCompoundInterestInline(principal, rate, time, freq);
          } else if (currentInterestType === 'savings') {
            const initial = parseFloat(document.getElementById('savingsInitial').value) || 0;
            const monthly = parseFloat(document.getElementById('savingsMonthly').value);
            const rate = parseFloat(document.getElementById('savingsRate').value);
            const time = parseFloat(document.getElementById('savingsTime').value);
            
            if (!monthly || !rate || !time) {
              results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please fill in required fields' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô'}</p>`;
              return;
            }
            
            result = calculateMonthlySavingsInline(monthly, rate, time, initial);
          } else if (currentInterestType === 'loan') {
            const amount = parseFloat(document.getElementById('loanAmount').value);
            const rate = parseFloat(document.getElementById('loanRate').value);
            const time = parseFloat(document.getElementById('loanTime').value);
            
            if (!amount || !rate || !time) {
              results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please fill in all fields' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö'}</p>`;
              return;
            }
            
            result = calculateLoanPaymentInline(amount, rate, time);
          }
          
          if (result.error) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? result.errorEN : result.error}</p>`;
            return;
          }
          
          displayInterestResults(result);
        }

        function displayInterestResults(result) {
          const results = document.getElementById('interestResults');
          const isEnglish = currentLanguage === 'en';
          const calc = result.calculation;
          
          if (result.type === 'simple') {
            results.innerHTML = `
              <div class="space-y-4 text-left">
                <div class="p-4 bg-green-50 rounded-lg">
                  <h4 class="font-semibold text-lg mb-2">${isEnglish ? 'Simple Interest Results' : '‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤'}</h4>
                  <div class="space-y-2">
                    <div class="flex justify-between">
                      <span>${isEnglish ? 'Principal:' : '‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô:'}</span>
                      <span class="font-medium">‡∏ø${calc.principal.toLocaleString()}</span>
                    </div>
                    <div class="flex justify-between">
                      <span>${isEnglish ? 'Interest:' : '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢:'}</span>
                      <span class="font-medium text-green-600">‡∏ø${calc.interest.toLocaleString()}</span>
                    </div>
                    <hr>
                    <div class="flex justify-between text-lg font-bold">
                      <span>${isEnglish ? 'Total Amount:' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°:'}</span>
                      <span class="text-green-600">‡∏ø${calc.totalAmount.toLocaleString()}</span>
                    </div>
                  </div>
                </div>
                
                <div class="p-3 bg-blue-50 rounded text-sm">
                  <strong>${isEnglish ? 'Formula:' : '‡∏™‡∏π‡∏ï‡∏£:'}</strong><br>
                  ${isEnglish ? 'Interest' : '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢'} = ${calc.principal.toLocaleString()} √ó ${calc.rate}% √ó ${calc.time} ${isEnglish ? 'years' : '‡∏õ‡∏µ'}
                </div>
              </div>
            `;
          } else if (result.type === 'compound') {
            results.innerHTML = `
              <div class="space-y-4 text-left">
                <div class="p-4 bg-purple-50 rounded-lg">
                  <h4 class="font-semibold text-lg mb-2">${isEnglish ? 'Compound Interest Results' : '‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏ö‡∏ï‡πâ‡∏ô'}</h4>
                  <div class="space-y-2">
                    <div class="flex justify-between">
                      <span>${isEnglish ? 'Principal:' : '‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô:'}</span>
                      <span class="font-medium">‡∏ø${calc.principal.toLocaleString()}</span>
                    </div>
                    <div class="flex justify-between">
                      <span>${isEnglish ? 'Compound Interest:' : '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏ö‡∏ï‡πâ‡∏ô:'}</span>
                      <span class="font-medium text-purple-600">‡∏ø${calc.compoundInterest.toLocaleString()}</span>
                    </div>
                    <div class="flex justify-between text-sm text-gray-600">
                      <span>${isEnglish ? 'vs Simple Interest:' : '‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤:'}</span>
                      <span>‡∏ø${calc.simpleInterest.toLocaleString()}</span>
                    </div>
                    <div class="flex justify-between text-sm text-green-600">
                      <span>${isEnglish ? 'Extra from Compounding:' : '‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏ö‡∏ï‡πâ‡∏ô:'}</span>
                      <span>+‡∏ø${calc.extraInterest.toLocaleString()}</span>
                    </div>
                    <hr>
                    <div class="flex justify-between text-lg font-bold">
                      <span>${isEnglish ? 'Total Amount:' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°:'}</span>
                      <span class="text-purple-600">‡∏ø${calc.totalAmount.toLocaleString()}</span>
                    </div>
                  </div>
                </div>
                
                <div class="p-3 bg-blue-50 rounded text-sm">
                  <strong>${isEnglish ? 'Compounding:' : '‡∏Å‡∏≤‡∏£‡∏ó‡∏ö‡∏ï‡πâ‡∏ô:'}</strong>
                  ${calc.compoundFrequency} ${isEnglish ? 'times per year' : '‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠‡∏õ‡∏µ'}
                </div>
              </div>
            `;
          } else if (result.type === 'savings') {
            results.innerHTML = `
              <div class="space-y-4 text-left">
                <div class="p-4 bg-blue-50 rounded-lg">
                  <h4 class="font-semibold text-lg mb-2">${isEnglish ? 'Savings Results' : '‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô'}</h4>
                  <div class="space-y-2">
                    <div class="flex justify-between">
                      <span>${isEnglish ? 'Total Contributions:' : '‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ù‡∏≤‡∏Å‡∏£‡∏ß‡∏°:'}</span>
                      <span class="font-medium">‡∏ø${calc.totalContributions.toLocaleString()}</span>
                    </div>
                    <div class="flex justify-between">
                      <span>${isEnglish ? 'Interest Earned:' : '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ:'}</span>
                      <span class="font-medium text-blue-600">‡∏ø${calc.totalInterest.toLocaleString()}</span>
                    </div>
                    <hr>
                    <div class="flex justify-between text-lg font-bold">
                      <span>${isEnglish ? 'Final Amount:' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢:'}</span>
                      <span class="text-blue-600">‡∏ø${calc.totalAmount.toLocaleString()}</span>
                    </div>
                  </div>
                </div>
                
                <div class="p-3 bg-green-50 rounded text-sm">
                  <div><strong>${isEnglish ? 'Monthly deposit:' : '‡∏ù‡∏≤‡∏Å‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:'}</strong> ‡∏ø${calc.monthlyAmount.toLocaleString()}</div>
                  <div><strong>${isEnglish ? 'For:' : '‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤:'}</strong> ${calc.years} ${isEnglish ? 'years' : '‡∏õ‡∏µ'} (${calc.years * 12} ${isEnglish ? 'months' : '‡πÄ‡∏î‡∏∑‡∏≠‡∏ô'})</div>
                </div>
              </div>
            `;
          } else if (result.type === 'loan') {
            results.innerHTML = `
              <div class="space-y-4 text-left">
                <div class="p-4 bg-orange-50 rounded-lg">
                  <h4 class="font-semibold text-lg mb-2">${isEnglish ? 'Loan Payment Results' : '‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞'}</h4>
                  <div class="space-y-2">
                    <div class="flex justify-between">
                      <span>${isEnglish ? 'Loan Amount:' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏π‡πâ:'}</span>
                      <span class="font-medium">‡∏ø${calc.loanAmount.toLocaleString()}</span>
                    </div>
                    <div class="flex justify-between text-lg font-bold text-orange-600">
                      <span>${isEnglish ? 'Monthly Payment:' : '‡∏ä‡∏≥‡∏£‡∏∞‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:'}</span>
                      <span>‡∏ø${calc.monthlyPayment.toLocaleString()}</span>
                    </div>
                    <div class="flex justify-between">
                      <span>${isEnglish ? 'Total Interest:' : '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏£‡∏ß‡∏°:'}</span>
                      <span class="font-medium text-red-600">‡∏ø${calc.totalInterest.toLocaleString()}</span>
                    </div>
                    <hr>
                    <div class="flex justify-between text-lg font-bold">
                      <span>${isEnglish ? 'Total Payment:' : '‡∏ä‡∏≥‡∏£‡∏∞‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:'}</span>
                      <span class="text-orange-600">‡∏ø${calc.totalPayment.toLocaleString()}</span>
                    </div>
                  </div>
                </div>
                
                <div class="p-3 bg-yellow-50 rounded text-sm">
                  <div><strong>${isEnglish ? 'Loan term:' : '‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡πà‡∏≠‡∏ô:'}</strong> ${calc.years} ${isEnglish ? 'years' : '‡∏õ‡∏µ'} (${calc.years * 12} ${isEnglish ? 'months' : '‡πÄ‡∏î‡∏∑‡∏≠‡∏ô'})</div>
                  <div><strong>${isEnglish ? 'Suggested income:' : '‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:'}</strong> ‡∏ø${Math.round(calc.monthlyPayment / 0.3).toLocaleString()}/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (30% rule)</div>
                </div>
              </div>
            `;
          }
        }

        function clearInterestResults() {
          const isEnglish = currentLanguage === 'en';
          document.getElementById('interestResults').innerHTML = `
            <div class="text-center py-8 text-gray-500">
              ${isEnglish ? 'Enter values and calculate to see results' : '‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå'}
            </div>
          `;
        }

        // Initialize with simple interest when page loads
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(() => {
            if (currentInterestType === 'simple' && document.getElementById('interestInputs')) {
              switchInterestType('simple');
            }
          }, 100);
        });

        </script>

  <!-- Netlify Analytics -->
  <script defer src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </body>
</html>