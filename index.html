<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4Calc - ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans Thai', sans-serif; }
        .calculator-card:hover { transform: translateY(-2px); transition: transform 0.2s ease; }
        .lang-btn { position: relative; }
        .lang-dropdown { display: none; position: absolute; top: 100%; right: 0; background: white; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); z-index: 50; min-width: 120px; }
        .lang-dropdown.show { display: block; }
    </style>

<!-- 4Calc v1.1.0 -->
<!-- Built: 2025-07-05T02:15:00.000Z -->
<!-- Environment: production -->
<!-- Branch: main -->
<!-- Commit: enhanced-mrt-calculator -->
<!-- Deployed on Netlify -->
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-6">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-gray-900">
                        <span class="text-blue-600">4</span>Calc
                    </h1>
                    <span id="siteSubtitle" class="ml-2 text-sm text-gray-500">
                        ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô
                    </span>
                </div>
                <div class="flex items-center space-x-4">
                    <nav class="hidden md:flex space-x-8">
                        <a href="#" id="nav-home" class="text-gray-700 hover:text-blue-600 transition-colors">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
                        <a href="#" id="nav-categories" class="text-gray-700 hover:text-blue-600 transition-colors">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</a>
                        <a href="#" id="nav-about" class="text-gray-700 hover:text-blue-600 transition-colors">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a>
                    </nav>
                    
                    <!-- Language Switcher -->
                    <div class="lang-btn">
                        <button id="langButton" class="flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 transition-colors">
                            <span id="currentFlag">üáπüá≠</span>
                            <span id="currentLang">‡πÑ‡∏ó‡∏¢</span>
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div id="langDropdown" class="lang-dropdown">
                            <button onclick="switchLanguage('th')" class="w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 transition-colors rounded-t-lg">
                                <span>üáπüá≠</span>
                                <span>‡πÑ‡∏ó‡∏¢</span>
                            </button>
                            <button onclick="switchLanguage('en')" class="w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 transition-colors rounded-b-lg">
                                <span>üá∫üá∏</span>
                                <span>English</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- Header Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                <span id="welcomeText">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà</span> <span class="text-blue-600">4Calc</span>
            </h1>
            <p id="welcomeDescription" class="text-xl text-gray-600 mb-8">
                ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            </p>
            
            <!-- Search Bar -->
            <div class="max-w-md mx-auto mb-8">
                <input
                    type="text"
                    id="searchInput"
                    placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç..."
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
            </div>
        </div>

        <!-- Categories -->
        <div class="flex flex-wrap justify-center gap-2 mb-8" id="categoryButtons">
            <button class="category-btn px-4 py-2 bg-blue-600 text-white border border-blue-600 rounded-lg hover:bg-blue-700 transition-colors" data-category="all">
                <span class="mr-2">üîç</span>
                <span>‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="transportation">
                <span class="mr-2">üöó</span>
                <span>‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏°</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="health">
                <span class="mr-2">üè•</span>
                <span>‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="finance">
                <span class="mr-2">üí≥</span>
                <span>‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="utilities">
                <span class="mr-2">üè†</span>
                <span>‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏π‡∏õ‡πÇ‡∏†‡∏Ñ</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="geography">
                <span class="mr-2">üåç</span>
                <span>‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</span>
            </button>
        </div>
        
        <!-- Calculator Grid -->
        <div id="calculatorGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Calculators will be populated by JavaScript -->
        </div>

        <!-- No Results -->
        <div id="noResults" class="text-center py-12 hidden">
            <div class="text-4xl mb-4">üîç</div>
            <h3 class="text-xl font-semibold mb-2">‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç</h3>
            <p class="text-gray-600">‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏≠‡∏∑‡πà‡∏ô</p>
        </div>

        <!-- Add Calculator Card -->
        <div class="mt-8 bg-white p-6 rounded-lg shadow-md border-2 border-dashed border-gray-300">
            <div class="text-center">
                <div class="text-3xl mb-4">‚ûï</div>
                <h3 id="needNewCalc" class="text-lg font-semibold mb-2">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà?</h3>
                <p id="newCalcDesc" class="text-gray-600 mb-4">
                    ‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                </p>
                <button id="requestCalcBtn" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    ‡∏Ç‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-100 border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <p id="footerText" class="text-gray-600">
                    ¬© 2024 4Calc ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏π‡πà‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
                </p>
            </div>
        </div>
    </footer>

    <!-- Calculator Modal -->
    <div id="calculatorModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg max-w-4xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 id="modalTitle" class="text-2xl font-bold"></h2>
                    <button onclick="closeCalculator()" class="text-gray-500 hover:text-gray-700 text-2xl">√ó</button>
                </div>
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <script>
        // Import MRT Station Data
        const MRT_LINES = {
          blue: {
            id: 'blue',
            nameTH: '‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô',
            nameEN: 'Blue Line',
            color: '#0066CC',
            stations: [
              { id: 'LAK', nameTH: '‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≠‡∏á', nameEN: 'Lak Song', code: 'BL01' },
              { id: 'PHO', nameTH: '‡πÇ‡∏û‡∏ò‡∏¥‡πå‡∏ô‡∏¥‡∏°‡∏¥‡∏ï‡∏£', nameEN: 'Pho Nimit', code: 'BL02' },
              { id: 'TAL', nameTH: '‡∏ï‡∏•‡∏≤‡∏î‡∏û‡∏•‡∏π', nameEN: 'Talad Phlu', code: 'BL03' },
              { id: 'WUT', nameTH: '‡∏ß‡∏∏‡∏í‡∏≤‡∏Å‡∏≤‡∏®', nameEN: 'Wutthakat', code: 'BL04' },
              { id: 'BNG', nameTH: '‡∏ö‡∏≤‡∏á‡πÑ‡∏ú‡πà', nameEN: 'Bang Phai', code: 'BL05' },
              { id: 'BAW', nameTH: '‡∏ö‡∏≤‡∏á‡∏´‡∏ß‡πâ‡∏≤', nameEN: 'Bang Wa', code: 'BL06' },
              { id: 'PET', nameTH: '‡πÄ‡∏û‡∏ä‡∏£‡πÄ‡∏Å‡∏©‡∏° 48', nameEN: 'Phetkasem 48', code: 'BL07' },
              { id: 'BKM', nameTH: '‡∏ö‡∏≤‡∏á‡πÅ‡∏Ñ-‡∏´‡∏°‡∏≠‡∏ä‡∏¥‡∏ï', nameEN: 'Bang Khae', code: 'BL08' },
              { id: 'LAT', nameTH: '‡∏•‡∏≤‡∏î‡∏¢‡∏≤‡∏ß', nameEN: 'Lat Yao', code: 'BL09' },
              { id: 'BAN', nameTH: '‡∏ö‡∏≤‡∏á‡∏ã‡∏∑‡πà‡∏≠', nameEN: 'Bang Sue', code: 'BL10' },
              { id: 'KAM', nameTH: '‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£', nameEN: 'Kamphaeng Phet', code: 'BL11' },
              { id: 'CHA', nameTH: '‡∏à‡∏ï‡∏∏‡∏à‡∏±‡∏Å‡∏£', nameEN: 'Chatuchak Park', code: 'BL12' },
              { id: 'PAH', nameTH: '‡∏û‡∏´‡∏•‡πÇ‡∏¢‡∏ò‡∏¥‡∏ô', nameEN: 'Phahon Yothin', code: 'BL13' },
              { id: 'LAD', nameTH: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß', nameEN: 'Lat Phrao', code: 'BL14' },
              { id: 'RAT', nameTH: '‡∏£‡∏±‡∏ä‡∏î‡∏≤‡∏†‡∏¥‡πÄ‡∏©‡∏Å', nameEN: 'Ratchadaphisek', code: 'BL15' },
              { id: 'SUT', nameTH: '‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏™‡∏≤‡∏£', nameEN: 'Sutthisan', code: 'BL16' },
              { id: 'HUA', nameTH: '‡∏´‡πâ‡∏ß‡∏¢‡∏Ç‡∏ß‡∏≤‡∏á', nameEN: 'Huai Khwang', code: 'BL17' },
              { id: 'CUL', nameTH: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡πÅ‡∏´‡πà‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢', nameEN: 'Thailand Cultural Centre', code: 'BL18' },
              { id: 'PRA', nameTH: '‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏° 9', nameEN: 'Phra Ram 9', code: 'BL19' },
              { id: 'PET2', nameTH: '‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Phetchaburi', code: 'BL20' },
              { id: 'SUK', nameTH: '‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó', nameEN: 'Sukhumvit', code: 'BL21' },
              { id: 'QSI', nameTH: '‡∏Ñ‡∏ß‡∏µ‡∏ô‡∏™‡∏¥‡∏£‡∏¥‡∏Å‡∏¥‡∏ï‡∏¥‡πå', nameEN: 'Queen Sirikit', code: 'BL22' },
              { id: 'KLO', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢', nameEN: 'Khlong Toei', code: 'BL23' },
              { id: 'LUM', nameTH: '‡∏•‡∏∏‡∏°‡∏û‡∏¥‡∏ô‡∏µ', nameEN: 'Lumphini', code: 'BL24' },
              { id: 'SIL', nameTH: '‡∏™‡∏µ‡∏•‡∏°', nameEN: 'Silom', code: 'BL25' },
              { id: 'SAM', nameTH: '‡∏™‡∏≤‡∏°‡∏¢‡πà‡∏≤‡∏ô', nameEN: 'Sam Yan', code: 'BL26' },
              { id: 'HUL', nameTH: '‡∏´‡∏±‡∏ß‡∏•‡∏≥‡πÇ‡∏û‡∏á', nameEN: 'Hua Lamphong', code: 'BL27' },
              { id: 'WAT', nameTH: '‡∏ß‡∏±‡∏î‡∏°‡∏±‡∏á‡∏Å‡∏£', nameEN: 'Wat Mangkon', code: 'BL28' },
              { id: 'SAY', nameTH: '‡∏™‡∏≤‡∏°‡∏¢‡∏≠‡∏î', nameEN: 'Sam Yot', code: 'BL29' },
              { id: 'SAN', nameTH: '‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏ä‡∏¢', nameEN: 'Sanam Chai', code: 'BL30' },
              { id: 'ISA', nameTH: '‡∏≠‡∏¥‡∏™‡∏£‡∏†‡∏≤‡∏û', nameEN: 'Itsaraphap', code: 'BL31' },
              { id: 'THO', nameTH: '‡∏ò‡∏ô‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Thonburi', code: 'BL32' },
              { id: 'WON', nameTH: '‡∏ß‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏ç‡πà', nameEN: 'Wongwian Yai', code: 'BL33' },
              { id: 'KRU', nameTH: '‡∏Å‡∏£‡∏∏‡∏á‡∏ò‡∏ô‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Krung Thon Buri', code: 'BL34' }
            ]
          },
          purple: {
            id: 'purple',
            nameTH: '‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á',
            nameEN: 'Purple Line',
            color: '#663399',
            stations: [
              { id: 'KLO2', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡πÑ‡∏ú‡πà', nameEN: 'Khlong Bang Phai', code: 'PP01' },
              { id: 'TAL2', nameTH: '‡∏ï‡∏•‡∏≤‡∏î‡∏ö‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà', nameEN: 'Talad Bang Yai', code: 'PP02' },
              { id: 'SAM2', nameTH: '‡∏™‡∏≤‡∏°‡πÅ‡∏¢‡∏Å‡∏ö‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà', nameEN: 'Sam Yaek Bang Yai', code: 'PP03' },
              { id: 'BAN2', nameTH: '‡∏ö‡∏≤‡∏á‡∏û‡∏•‡∏π', nameEN: 'Bang Phlu', code: 'PP04' },
              { id: 'BAN3', nameTH: '‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å‡πÉ‡∏´‡∏ç‡πà', nameEN: 'Bang Rak Yai', code: 'PP05' },
              { id: 'BAN4', nameTH: '‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å‡∏ô‡πâ‡∏≠‡∏¢-‡∏ó‡πà‡∏≤‡∏≠‡∏¥‡∏ê', nameEN: 'Bang Rak Noi Tha It', code: 'PP06' },
              { id: 'SAI', nameTH: '‡πÑ‡∏ó‡∏£‡∏°‡πâ‡∏≤', nameEN: 'Sai Ma', code: 'PP07' },
              { id: 'PLI', nameTH: '‡∏û‡∏•‡∏µ‡πÄ‡∏û‡∏•‡∏¥‡∏ô', nameEN: 'Pli Ploen', code: 'PP08' },
              { id: 'MAN', nameTH: '‡∏°‡∏±‡∏¢‡∏•‡∏≤‡∏†', nameEN: 'Mai Lap', code: 'PP09' },
              { id: 'NON', nameTH: '‡∏´‡∏ô‡∏≠‡∏á‡∏õ‡∏£‡∏∑‡∏≠', nameEN: 'Nong Prue', code: 'PP10' },
              { id: 'YAE', nameTH: '‡πÅ‡∏¢‡∏Å‡∏ï‡∏¥‡∏ß‡∏≤‡∏ô‡∏ô‡∏ó‡πå', nameEN: 'Yaek Tiwanon', code: 'PP11' },
              { id: 'TIW', nameTH: '‡∏ï‡∏¥‡∏ß‡∏≤‡∏ô‡∏ô‡∏ó‡πå', nameEN: 'Tiwanon', code: 'PP12' },
              { id: 'THA', nameTH: '‡∏ó‡πà‡∏≤‡∏≠‡∏¥‡∏ê', nameEN: 'Tha It', code: 'PP13' },
              { id: 'PAK', nameTH: '‡∏õ‡∏≤‡∏Å‡πÄ‡∏Å‡∏£‡πá‡∏î', nameEN: 'Pak Kret', code: 'PP14' },
              { id: 'KHA', nameTH: '‡πÅ‡∏Ç‡∏ß‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏á‡∏û‡∏≤', nameEN: 'Khaeng Wiang Pha', code: 'PP15' },
              { id: 'TAO', nameTH: '‡πÄ‡∏ï‡∏≤‡∏õ‡∏π‡∏ô', nameEN: 'Tao Pun', code: 'PP16' }
            ]
          }
        };

        const INTERCHANGE_STATIONS = [
          { station: '‡∏ö‡∏≤‡∏á‡∏ã‡∏∑‡πà‡∏≠', lines: ['blue', 'red'], codes: ['BL10', 'RL10'] },
          { station: '‡∏à‡∏ï‡∏∏‡∏à‡∏±‡∏Å‡∏£', lines: ['blue', 'red'], codes: ['BL12', 'RL08'] },
          { station: '‡∏ß‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏ç‡πà', lines: ['blue', 'red'], codes: ['BL33', 'RL11'] }
        ];

        const TRAVEL_INFO = {
          averageTimePerStation: 2,
          averageWaitTime: 3,
          baseFare: 16,
          farePerStation: 2,
          maxFare: 42
        };

        function calculateDistance(fromStationId, toStationId, lineId) {
          const line = MRT_LINES[lineId];
          if (!line || !line.stations) return null;
          
          const fromIndex = line.stations.findIndex(station => station.id === fromStationId);
          const toIndex = line.stations.findIndex(station => station.id === toStationId);
          
          if (fromIndex === -1 || toIndex === -1) return null;
          
          return Math.abs(toIndex - fromIndex);
        }

        function calculateFare(distance) {
          if (distance === 0) return 0;
          
          const fare = TRAVEL_INFO.baseFare + (distance * TRAVEL_INFO.farePerStation);
          return Math.min(fare, TRAVEL_INFO.maxFare);
        }

        function calculateTravelTime(distance, isPeakHour = false) {
          if (distance === 0) return 0;
          
          const travelTime = (distance * TRAVEL_INFO.averageTimePerStation) + TRAVEL_INFO.averageWaitTime;
          const peakMultiplier = isPeakHour ? 1.3 : 1;
          
          return Math.round(travelTime * peakMultiplier);
        }

        let currentLanguage = localStorage.getItem('language') || 'th'; 
        let selectedCategory = null; 
        
        const translations = { 
          th: { 
            siteSubtitle: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô', 
            welcomeText: '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà', 
            welcomeDescription: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì', 
            searchPlaceholder: '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç...', 
            navHome: '‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å', 
            navCategories: '‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà', 
            navAbout: '‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤', 
            allCategories: '‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà', 
            transportation: '‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏°', 
            health: '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û', 
            finance: '‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô', 
            utilities: '‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏π‡∏õ‡πÇ‡∏†‡∏Ñ', 
            geography: '‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', 
            needNewCalc: '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà?', 
            newCalcDesc: '‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ', 
            requestCalcBtn: '‡∏Ç‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç', 
            footerText: '¬© 2024 4Calc ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏π‡πà‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì', 
            noResultsTitle: '‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç', 
            noResultsDesc: '‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏≠‡∏∑‡πà‡∏ô' 
          }, 
          en: { 
            siteSubtitle: 'All-in-One Calculator Hub', 
            welcomeText: 'Welcome to', 
            welcomeDescription: 'Your comprehensive calculator hub for all your daily calculations', 
            searchPlaceholder: 'Search calculators...', 
            navHome: 'Home', 
            navCategories: 'Categories', 
            navAbout: 'About', 
            allCategories: 'All Categories', 
            transportation: 'Transportation', 
            health: 'Health', 
            finance: 'Finance', 
            utilities: 'Utilities', 
            geography: 'Geography', 
            needNewCalc: 'Need a New Calculator?', 
            newCalcDesc: "We're constantly adding new calculators based on user needs", 
            requestCalcBtn: 'Request Calculator', 
            footerText: '¬© 2024 4Calc. All rights reserved. Your trusted calculator companion', 
            noResultsTitle: 'No calculators found', 
            noResultsDesc: 'Try adjusting your search or selecting a different category' 
          } 
        }; const calculators = { th: [ { id: 'mrt-time', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á MRT', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ MRT', emoji: 'üöá', category: 'transportation' }, { id: 'taxi-fare', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤', emoji: 'üöï', category: 'transportation' }, { id: 'pregnancy', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏£‡∏£‡∏†‡πå', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏•‡∏≠‡∏î‡πÅ‡∏•‡∏∞ milestone ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç', emoji: 'ü§±', category: 'health' }, { id: 'interest', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ó‡∏ö‡∏ï‡πâ‡∏ô', emoji: 'üí∞', category: 'finance' }, { id: 'btu', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BTU', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ BTU ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®', emoji: '‚ùÑÔ∏è', category: 'utilities' }, { id: 'distance', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏≠‡∏á‡∏à‡∏∏‡∏î', emoji: 'üìç', category: 'geography' } ], en: [ { id: 'mrt-time', name: 'MRT Time Calculator', description: 'Calculate travel time between MRT stations', emoji: 'üöá', category: 'transportation' }, { id: 'taxi-fare', name: 'Taxi Fare Calculator', description: 'Calculate taxi fare based on distance and time', emoji: 'üöï', category: 'transportation' }, { id: 'pregnancy', name: 'Pregnancy Calculator', description: 'Calculate due date and pregnancy milestones', emoji: 'ü§±', category: 'health' }, { id: 'interest', name: 'Interest Calculator', description: 'Calculate simple and compound interest', emoji: 'üí∞', category: 'finance' }, { id: 'btu', name: 'BTU Calculator', description: 'Calculate BTU requirements for air conditioning', emoji: '‚ùÑÔ∏è', category: 'utilities' }, { id: 'distance', name: 'Distance Calculator', description: 'Calculate distance between two points', emoji: 'üìç', category: 'geography' } ] }; document.addEventListener('DOMContentLoaded', function() { updateLanguage(); renderCalculators(); setupEventListeners(); }); function setupEventListeners() { document.getElementById('langButton').addEventListener('click', function() { const dropdown = document.getElementById('langDropdown'); dropdown.classList.toggle('show'); }); document.addEventListener('click', function(event) { if (!event.target.closest('.lang-btn')) { document.getElementById('langDropdown').classList.remove('show'); } }); document.getElementById('searchInput').addEventListener('input', function(e) { renderCalculators(e.target.value); }); document.querySelectorAll('.category-btn').forEach(btn => { btn.addEventListener('click', function() { const category = this.dataset.category; document.querySelectorAll('.category-btn').forEach(b => { b.className = 'category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors'; }); this.className = 'category-btn px-4 py-2 bg-blue-600 text-white border border-blue-600 rounded-lg hover:bg-blue-700 transition-colors'; selectedCategory = category === 'all' ? null : category; renderCalculators(); }); }); } function switchLanguage(lang) { currentLanguage = lang; localStorage.setItem('language', lang); const flagMap = { th: 'üáπüá≠', en: 'üá∫üá∏' }; const nameMap = { th: '‡πÑ‡∏ó‡∏¢', en: 'English' }; document.getElementById('currentFlag').textContent = flagMap[lang]; document.getElementById('currentLang').textContent = nameMap[lang]; document.getElementById('langDropdown').classList.remove('show'); updateLanguage(); renderCalculators(); } function updateLanguage() { const t = translations[currentLanguage]; document.getElementById('siteSubtitle').textContent = t.siteSubtitle; document.getElementById('welcomeText').textContent = t.welcomeText; document.getElementById('welcomeDescription').textContent = t.welcomeDescription; document.getElementById('searchInput').placeholder = t.searchPlaceholder; document.getElementById('nav-home').textContent = t.navHome; document.getElementById('nav-categories').textContent = t.navCategories; document.getElementById('nav-about').textContent = t.navAbout; document.getElementById('needNewCalc').textContent = t.needNewCalc; document.getElementById('newCalcDesc').textContent = t.newCalcDesc; document.getElementById('requestCalcBtn').textContent = t.requestCalcBtn; document.getElementById('footerText').textContent = t.footerText; const categoryTexts = [t.allCategories, t.transportation, t.health, t.finance, t.utilities, t.geography]; document.querySelectorAll('.category-btn span:last-child').forEach((span, index) => { span.textContent = categoryTexts[index]; }); } function renderCalculators(searchTerm = '') { const grid = document.getElementById('calculatorGrid'); const noResults = document.getElementById('noResults'); const currentCalculators = calculators[currentLanguage]; let filtered = currentCalculators.filter(calc => { const matchesSearch = calc.name.toLowerCase().includes(searchTerm.toLowerCase()) || calc.description.toLowerCase().includes(searchTerm.toLowerCase()); const matchesCategory = !selectedCategory || calc.category === selectedCategory; return matchesSearch && matchesCategory; }); if (filtered.length === 0) { grid.classList.add('hidden'); noResults.classList.remove('hidden'); return; } grid.classList.remove('hidden'); noResults.classList.add('hidden'); grid.innerHTML = filtered.map(calc => ` <div class="calculator-card bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer" onclick="showCalculator('${calc.id}')"> <div class="text-3xl mb-4">${calc.emoji}</div> <h3 class="text-lg font-semibold mb-2">${calc.name}</h3> <p class="text-gray-600 mb-3">${calc.description}</p> <span class="text-sm text-blue-600 font-medium"> ${translations[currentLanguage][calc.category]} </span> </div> `).join(''); } function showCalculator(type) { const modal = document.getElementById('calculatorModal'); const title = document.getElementById('modalTitle'); const content = document.getElementById('modalContent'); modal.classList.remove('hidden'); modal.classList.add('flex'); if (type === 'mrt-time') { title.textContent = currentLanguage === 'th' ? 'üöá ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á MRT' : 'üöá MRT Time Calculator'; content.innerHTML = getMRTCalculatorHTML(); } else { title.textContent = currentLanguage === 'th' ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤!' : 'Calculator Coming Soon!'; content.innerHTML = `<p class="text-center py-8 text-gray-500">${currentLanguage === 'th' ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á!' : 'This calculator is under development. Please check back later!'}</p>`; } } function closeCalculator() { const modal = document.getElementById('calculatorModal'); modal.classList.add('hidden'); modal.classList.remove('flex'); } function getMRTCalculatorHTML() {
          const isEnglish = currentLanguage === 'en';
          
          // Generate station options from comprehensive data
          let stationOptions = '';
          Object.keys(MRT_LINES).forEach(lineKey => {
            const line = MRT_LINES[lineKey];
            if (line.stations) {
              stationOptions += `<optgroup label="${isEnglish ? line.nameEN : line.nameTH}">`;
              line.stations.forEach(station => {
                const stationName = isEnglish ? station.nameEN : station.nameTH;
                stationOptions += `<option value="${station.id}" data-line="${lineKey}">${station.code} - ${stationName}</option>`;
              });
              stationOptions += '</optgroup>';
            }
          });
          
          return `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Trip Details' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á'}</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'From Station' : '‡∏à‡∏≤‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</label>
                    <select id="fromStation" class="w-full px-3 py-2 border rounded-lg">
                      <option value="">${isEnglish ? 'Select departure station' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á'}</option>
                      ${stationOptions}
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'To Station' : '‡πÑ‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</label>
                    <select id="toStation" class="w-full px-3 py-2 border rounded-lg">
                      <option value="">${isEnglish ? 'Select destination station' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á'}</option>
                      ${stationOptions}
                    </select>
                  </div>
                  <div>
                    <label class="flex items-center">
                      <input type="checkbox" id="isPeakHour" class="mr-2">
                      <span class="text-sm">${isEnglish ? 'Peak hours (Rush hour)' : '‡∏ä‡πà‡∏ß‡∏á‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô'}</span>
                    </label>
                  </div>
                  <button onclick="calculateMRT()" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    ${isEnglish ? 'Calculate' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                  </button>
                </div>
              </div>
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Results' : '‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå'}</h3>
                <div id="mrtResults" class="text-center py-8 text-gray-500">
                  ${isEnglish ? 'Select stations and click calculate' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </div>
              </div>
            </div>
          `;
        } function calculateMRT() {
          const fromStationId = document.getElementById('fromStation').value;
          const toStationId = document.getElementById('toStation').value;
          const isPeakHour = document.getElementById('isPeakHour').checked;
          const results = document.getElementById('mrtResults');
          const isEnglish = currentLanguage === 'en';
          
          if (!fromStationId || !toStationId) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please select both stations' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á'}</p>`;
            return;
          }
          
          if (fromStationId === toStationId) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please select different stations' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô'}</p>`;
            return;
          }
          
          // Find stations and their lines
          let fromStation = null, toStation = null;
          let fromLine = null, toLine = null;
          
          Object.keys(MRT_LINES).forEach(lineKey => {
            const line = MRT_LINES[lineKey];
            if (line.stations) {
              const foundFrom = line.stations.find(s => s.id === fromStationId);
              const foundTo = line.stations.find(s => s.id === toStationId);
              
              if (foundFrom) {
                fromStation = foundFrom;
                fromLine = lineKey;
              }
              if (foundTo) {
                toStation = foundTo;
                toLine = lineKey;
              }
            }
          });
          
          if (!fromStation || !toStation) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Station not found' : '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</p>`;
            return;
          }
          
          // Calculate if same line or need transfer
          let distance = 0;
          let transferInfo = '';
          
          if (fromLine === toLine) {
            // Same line - direct calculation
            distance = calculateDistance(fromStationId, toStationId, fromLine);
          } else {
            // Different lines - need transfer (simplified calculation)
            // For now, we'll calculate approximate distance via interchange stations
            distance = 8; // Estimated average for cross-line transfers
            transferInfo = isEnglish 
              ? `<div class="p-2 bg-yellow-100 rounded text-sm"><strong>Note:</strong> Transfer required between lines</div>`
              : `<div class="p-2 bg-yellow-100 rounded text-sm"><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢</div>`;
          }
          
          const time = calculateTravelTime(distance, isPeakHour);
          const fare = calculateFare(distance);
          
          const fromName = isEnglish ? fromStation.nameEN : fromStation.nameTH;
          const toName = isEnglish ? toStation.nameEN : toStation.nameTH;
          const fromLineDisplay = isEnglish ? MRT_LINES[fromLine].nameEN : MRT_LINES[fromLine].nameTH;
          const toLineDisplay = isEnglish ? MRT_LINES[toLine].nameEN : MRT_LINES[toLine].nameTH;
          
          results.innerHTML = `
            <div class="space-y-3 text-left">
              <div class="p-3 bg-blue-50 rounded">
                <strong>${isEnglish ? 'From:' : '‡∏à‡∏≤‡∏Å:'}</strong> ${fromStation.code} - ${fromName}<br>
                <small class="text-gray-600">${fromLineDisplay}</small><br>
                <strong>${isEnglish ? 'To:' : '‡πÑ‡∏õ:'}</strong> ${toStation.code} - ${toName}<br>
                <small class="text-gray-600">${toLineDisplay}</small>
              </div>
              ${transferInfo}
              <div class="p-3 bg-green-50 rounded">
                <strong>${isEnglish ? 'Travel Time:' : '‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á:'}</strong> ${time} ${isEnglish ? 'minutes' : '‡∏ô‡∏≤‡∏ó‡∏µ'}
                ${isPeakHour ? `<br><small class="text-gray-600">${isEnglish ? '(Including peak hour delay)' : '(‡∏£‡∏ß‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤‡∏ä‡πà‡∏ß‡∏á‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô)'}</small>` : ''}
              </div>
              <div class="p-3 bg-yellow-50 rounded">
                <strong>${isEnglish ? 'Distance:' : '‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á:'}</strong> ${distance} ${isEnglish ? 'stations' : '‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}
              </div>
              <div class="p-3 bg-purple-50 rounded">
                <strong>${isEnglish ? 'Fare:' : '‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£:'}</strong> ‡∏ø${fare}
              </div>
            </div>
          `;
        }</script>

  <!-- Netlify Analytics -->
  <script defer src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </body>
</html>