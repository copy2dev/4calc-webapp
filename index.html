<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4Calc - ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans Thai', sans-serif; }
        .calculator-card:hover { transform: translateY(-2px); transition: transform 0.2s ease; }
        .lang-btn { position: relative; }
        .lang-dropdown { display: none; position: absolute; top: 100%; right: 0; background: white; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); z-index: 50; min-width: 120px; }
        .lang-dropdown.show { display: block; }
    </style>

<!-- 4Calc v1.1.0 -->
<!-- Built: 2025-07-05T02:15:00.000Z -->
<!-- Environment: production -->
<!-- Branch: main -->
<!-- Commit: enhanced-mrt-calculator -->
<!-- Deployed on Netlify -->
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-6">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-gray-900">
                        <span class="text-blue-600">4</span>Calc
                    </h1>
                    <span id="siteSubtitle" class="ml-2 text-sm text-gray-500">
                        ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô
                    </span>
                </div>
                <div class="flex items-center space-x-4">
                    <nav class="hidden md:flex space-x-8">
                        <a href="#" id="nav-home" class="text-gray-700 hover:text-blue-600 transition-colors">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
                        <a href="#" id="nav-categories" class="text-gray-700 hover:text-blue-600 transition-colors">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</a>
                        <a href="#" id="nav-about" class="text-gray-700 hover:text-blue-600 transition-colors">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a>
                    </nav>
                    
                    <!-- Language Switcher -->
                    <div class="lang-btn">
                        <button id="langButton" class="flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 transition-colors">
                            <span id="currentFlag">üáπüá≠</span>
                            <span id="currentLang">‡πÑ‡∏ó‡∏¢</span>
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div id="langDropdown" class="lang-dropdown">
                            <button onclick="switchLanguage('th')" class="w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 transition-colors rounded-t-lg">
                                <span>üáπüá≠</span>
                                <span>‡πÑ‡∏ó‡∏¢</span>
                            </button>
                            <button onclick="switchLanguage('en')" class="w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 transition-colors rounded-b-lg">
                                <span>üá∫üá∏</span>
                                <span>English</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- Header Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                <span id="welcomeText">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà</span> <span class="text-blue-600">4Calc</span>
            </h1>
            <p id="welcomeDescription" class="text-xl text-gray-600 mb-8">
                ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            </p>
            
            <!-- Search Bar -->
            <div class="max-w-md mx-auto mb-8">
                <input
                    type="text"
                    id="searchInput"
                    placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç..."
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
            </div>
        </div>

        <!-- Categories -->
        <div class="flex flex-wrap justify-center gap-2 mb-8" id="categoryButtons">
            <button class="category-btn px-4 py-2 bg-blue-600 text-white border border-blue-600 rounded-lg hover:bg-blue-700 transition-colors" data-category="all">
                <span class="mr-2">üîç</span>
                <span>‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="transportation">
                <span class="mr-2">üöó</span>
                <span>‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏°</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="health">
                <span class="mr-2">üè•</span>
                <span>‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="finance">
                <span class="mr-2">üí≥</span>
                <span>‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="utilities">
                <span class="mr-2">üè†</span>
                <span>‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏π‡∏õ‡πÇ‡∏†‡∏Ñ</span>
            </button>
            <button class="category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-category="geography">
                <span class="mr-2">üåç</span>
                <span>‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</span>
            </button>
        </div>
        
        <!-- Calculator Grid -->
        <div id="calculatorGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Calculators will be populated by JavaScript -->
        </div>

        <!-- No Results -->
        <div id="noResults" class="text-center py-12 hidden">
            <div class="text-4xl mb-4">üîç</div>
            <h3 class="text-xl font-semibold mb-2">‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç</h3>
            <p class="text-gray-600">‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏≠‡∏∑‡πà‡∏ô</p>
        </div>

        <!-- Add Calculator Card -->
        <div class="mt-8 bg-white p-6 rounded-lg shadow-md border-2 border-dashed border-gray-300">
            <div class="text-center">
                <div class="text-3xl mb-4">‚ûï</div>
                <h3 id="needNewCalc" class="text-lg font-semibold mb-2">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà?</h3>
                <p id="newCalcDesc" class="text-gray-600 mb-4">
                    ‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                </p>
                <button id="requestCalcBtn" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    ‡∏Ç‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-100 border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <p id="footerText" class="text-gray-600">
                    ¬© 2024 4Calc ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏π‡πà‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
                </p>
            </div>
        </div>
    </footer>

    <!-- Calculator Modal -->
    <div id="calculatorModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg max-w-4xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 id="modalTitle" class="text-2xl font-bold"></h2>
                    <button onclick="closeCalculator()" class="text-gray-500 hover:text-gray-700 text-2xl">√ó</button>
                </div>
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <script>
        // Import MRT Station Data - Updated 2024
        const MRT_LINES = {
          blue: {
            id: 'blue',
            nameTH: '‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô',
            nameEN: 'Blue Line (Chaloem Ratchamongkhon)',
            color: '#0066CC',
            totalStations: 38,
            operational: true,
            stations: [
              { id: 'THA', nameTH: '‡∏ó‡πà‡∏≤‡∏û‡∏£‡∏∞', nameEN: 'Tha Phra', code: 'BL01' },
              { id: 'CHA1', nameTH: '‡∏à‡∏£‡∏±‡∏•‡∏™‡∏ô‡∏¥‡∏ó‡∏ß‡∏á‡∏®‡πå 13', nameEN: 'Charan Sanit Wong 13', code: 'BL02' },
              { id: 'FAR', nameTH: '‡∏ü‡∏≤‡∏£‡πå‡∏±‡∏ô ‡∏û‡∏á‡∏©‡πå', nameEN: 'Faran Phong', code: 'BL03' },
              { id: 'KHB', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡πÑ‡∏ú‡πà', nameEN: 'Khlong Bang Phai', code: 'BL04' },
              { id: 'BAN7', nameTH: '‡∏ö‡∏≤‡∏á‡∏¢‡∏µ‡πà‡∏Ç‡∏±‡∏ô', nameEN: 'Bang Yi Khan', code: 'BL05' },
              { id: 'SIR', nameTH: '‡∏®‡∏¥‡∏£‡∏¥‡∏£‡∏≤‡∏ä', nameEN: 'Siriraj', code: 'BL06' },
              { id: 'THO1', nameTH: '‡∏ò‡∏ô‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Thonburi', code: 'BL07' },
              { id: 'ISA1', nameTH: '‡∏≠‡∏¥‡∏™‡∏£‡∏†‡∏≤‡∏û', nameEN: 'Itsaraphap', code: 'BL08' },
              { id: 'SAN1', nameTH: '‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏ä‡∏¢', nameEN: 'Sanam Chai', code: 'BL09' },
              { id: 'SAY1', nameTH: '‡∏™‡∏≤‡∏°‡∏¢‡∏≠‡∏î', nameEN: 'Sam Yot', code: 'BL10' },
              { id: 'WAT1', nameTH: '‡∏ß‡∏±‡∏î‡∏°‡∏±‡∏á‡∏Å‡∏£', nameEN: 'Wat Mangkon', code: 'BL11' },
              { id: 'HUL1', nameTH: '‡∏´‡∏±‡∏ß‡∏•‡∏≥‡πÇ‡∏û‡∏á', nameEN: 'Hua Lamphong', code: 'BL12' },
              { id: 'SAM1', nameTH: '‡∏™‡∏≤‡∏°‡∏¢‡πà‡∏≤‡∏ô', nameEN: 'Sam Yan', code: 'BL13' },
              { id: 'SIL1', nameTH: '‡∏™‡∏µ‡∏•‡∏°', nameEN: 'Silom', code: 'BL14' },
              { id: 'LUM1', nameTH: '‡∏•‡∏∏‡∏°‡∏û‡∏¥‡∏ô‡∏µ', nameEN: 'Lumphini', code: 'BL15' },
              { id: 'KLO1', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢', nameEN: 'Khlong Toei', code: 'BL16' },
              { id: 'QSI1', nameTH: '‡∏Ñ‡∏ß‡∏µ‡∏ô‡∏™‡∏¥‡∏£‡∏¥‡∏Å‡∏¥‡∏ï‡∏¥‡πå', nameEN: 'Queen Sirikit', code: 'BL17' },
              { id: 'SUK1', nameTH: '‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó', nameEN: 'Sukhumvit', code: 'BL18' },
              { id: 'PET1', nameTH: '‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Phetchaburi', code: 'BL19' },
              { id: 'PRA1', nameTH: '‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏° 9', nameEN: 'Phra Ram 9', code: 'BL20' },
              { id: 'CUL1', nameTH: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°', nameEN: 'Thailand Cultural Centre', code: 'BL21' },
              { id: 'HUA1', nameTH: '‡∏´‡πâ‡∏ß‡∏¢‡∏Ç‡∏ß‡∏≤‡∏á', nameEN: 'Huai Khwang', code: 'BL22' },
              { id: 'SUT1', nameTH: '‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏™‡∏≤‡∏£', nameEN: 'Sutthisan', code: 'BL23' },
              { id: 'RAT1', nameTH: '‡∏£‡∏±‡∏ä‡∏î‡∏≤‡∏†‡∏¥‡πÄ‡∏©‡∏Å', nameEN: 'Ratchadaphisek', code: 'BL24' },
              { id: 'LAD1', nameTH: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß', nameEN: 'Lat Phrao', code: 'BL25' },
              { id: 'PAH1', nameTH: '‡∏û‡∏´‡∏•‡πÇ‡∏¢‡∏ò‡∏¥‡∏ô', nameEN: 'Phahon Yothin', code: 'BL26' },
              { id: 'CHA2', nameTH: '‡∏à‡∏ï‡∏∏‡∏à‡∏±‡∏Å‡∏£', nameEN: 'Chatuchak Park', code: 'BL27' },
              { id: 'KAM1', nameTH: '‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£', nameEN: 'Kamphaeng Phet', code: 'BL28' },
              { id: 'BAN1', nameTH: '‡∏ö‡∏≤‡∏á‡∏ã‡∏∑‡πà‡∏≠', nameEN: 'Bang Sue', code: 'BL29' },
              { id: 'LAT1', nameTH: '‡∏•‡∏≤‡∏î‡∏¢‡∏≤‡∏ß', nameEN: 'Lat Yao', code: 'BL30' },
              { id: 'BKM1', nameTH: '‡∏ö‡∏≤‡∏á‡πÅ‡∏Ñ', nameEN: 'Bang Khae', code: 'BL31' },
              { id: 'PET2', nameTH: '‡πÄ‡∏û‡∏ä‡∏£‡πÄ‡∏Å‡∏©‡∏° 48', nameEN: 'Phetkasem 48', code: 'BL32' },
              { id: 'BAW1', nameTH: '‡∏ö‡∏≤‡∏á‡∏´‡∏ß‡πâ‡∏≤', nameEN: 'Bang Wa', code: 'BL33' },
              { id: 'BNG1', nameTH: '‡∏ö‡∏≤‡∏á‡πÑ‡∏ú‡πà', nameEN: 'Bang Phai', code: 'BL34' },
              { id: 'WUT1', nameTH: '‡∏ß‡∏∏‡∏í‡∏≤‡∏Å‡∏≤‡∏®', nameEN: 'Wutthakat', code: 'BL35' },
              { id: 'TAL1', nameTH: '‡∏ï‡∏•‡∏≤‡∏î‡∏û‡∏•‡∏π', nameEN: 'Talad Phlu', code: 'BL36' },
              { id: 'PHO1', nameTH: '‡πÇ‡∏û‡∏ò‡∏¥‡πå‡∏ô‡∏¥‡∏°‡∏¥‡∏ï‡∏£', nameEN: 'Pho Nimit', code: 'BL37' },
              { id: 'LAK1', nameTH: '‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≠‡∏á', nameEN: 'Lak Song', code: 'BL38' }
            ]
          },
          purple: {
            id: 'purple',
            nameTH: '‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á',
            nameEN: 'Purple Line (Chaloem Ratchadham)',
            color: '#663399',
            totalStations: 16,
            operational: true,
            stations: [
              { id: 'KLO2', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡πÑ‡∏ú‡πà', nameEN: 'Khlong Bang Phai', code: 'PP01' },
              { id: 'TAL2', nameTH: '‡∏ï‡∏•‡∏≤‡∏î‡∏ö‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà', nameEN: 'Talad Bang Yai', code: 'PP02' },
              { id: 'SAM2', nameTH: '‡∏™‡∏≤‡∏°‡πÅ‡∏¢‡∏Å‡∏ö‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà', nameEN: 'Sam Yaek Bang Yai', code: 'PP03' },
              { id: 'BAN2', nameTH: '‡∏ö‡∏≤‡∏á‡∏û‡∏•‡∏π', nameEN: 'Bang Phlu', code: 'PP04' },
              { id: 'BAN3', nameTH: '‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å‡πÉ‡∏´‡∏ç‡πà', nameEN: 'Bang Rak Yai', code: 'PP05' },
              { id: 'BAN4', nameTH: '‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å‡∏ô‡πâ‡∏≠‡∏¢-‡∏ó‡πà‡∏≤‡∏≠‡∏¥‡∏ê', nameEN: 'Bang Rak Noi Tha It', code: 'PP06' },
              { id: 'SAI', nameTH: '‡πÑ‡∏ó‡∏£‡∏°‡πâ‡∏≤', nameEN: 'Sai Ma', code: 'PP07' },
              { id: 'PLI', nameTH: '‡∏û‡∏•‡∏µ‡πÄ‡∏û‡∏•‡∏¥‡∏ô', nameEN: 'Pli Ploen', code: 'PP08' },
              { id: 'MAN', nameTH: '‡∏°‡∏±‡∏¢‡∏•‡∏≤‡∏†', nameEN: 'Mai Lap', code: 'PP09' },
              { id: 'NON', nameTH: '‡∏´‡∏ô‡∏≠‡∏á‡∏õ‡∏£‡∏∑‡∏≠', nameEN: 'Nong Prue', code: 'PP10' },
              { id: 'YAE', nameTH: '‡πÅ‡∏¢‡∏Å‡∏ï‡∏¥‡∏ß‡∏≤‡∏ô‡∏ô‡∏ó‡πå', nameEN: 'Yaek Tiwanon', code: 'PP11' },
              { id: 'TIW', nameTH: '‡∏ï‡∏¥‡∏ß‡∏≤‡∏ô‡∏ô‡∏ó‡πå', nameEN: 'Tiwanon', code: 'PP12' },
              { id: 'THA2', nameTH: '‡∏ó‡πà‡∏≤‡∏≠‡∏¥‡∏ê', nameEN: 'Tha It', code: 'PP13' },
              { id: 'PAK', nameTH: '‡∏õ‡∏≤‡∏Å‡πÄ‡∏Å‡∏£‡πá‡∏î', nameEN: 'Pak Kret', code: 'PP14' },
              { id: 'KHA', nameTH: '‡πÅ‡∏Ç‡∏ß‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏á‡∏û‡∏≤', nameEN: 'Khaeng Wiang Pha', code: 'PP15' },
              { id: 'TAO', nameTH: '‡πÄ‡∏ï‡∏≤‡∏õ‡∏π‡∏ô', nameEN: 'Tao Poon', code: 'PP16' }
            ]
          },
          
          yellow: {
            id: 'yellow',
            nameTH: '‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á',
            nameEN: 'Yellow Line (Nakhon Phiphat)',
            color: '#FFD700',
            totalStations: 23,
            operational: true,
            stations: [
              { id: 'LAD2', nameTH: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß', nameEN: 'Lat Phrao', code: 'YL01' },
              { id: 'PHW', nameTH: '‡∏û‡∏´‡∏•‡πÇ‡∏¢‡∏ò‡∏¥‡∏ô 24', nameEN: 'Phahon Yothin 24', code: 'YL02' },
              { id: 'CHO', nameTH: '‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏±‡∏¢ 4', nameEN: 'Chok Chai 4', code: 'YL03' },
              { id: 'LAD3', nameTH: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß 71', nameEN: 'Lat Phrao 71', code: 'YL04' },
              { id: 'LAD4', nameTH: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß 83', nameEN: 'Lat Phrao 83', code: 'YL05' },
              { id: 'MAL', nameTH: '‡∏°‡∏≤‡∏•‡∏±‡∏¢‡πÅ‡∏°‡∏ô', nameEN: 'Malai Man', code: 'YL06' },
              { id: 'RAM', nameTH: '‡∏£‡∏≤‡∏°‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏≤ 4 ‡∏Å‡∏°.', nameEN: 'Ram Inthra Km.4', code: 'YL07' },
              { id: 'LAD5', nameTH: '‡∏•‡∏≤‡∏î‡∏õ‡∏•‡∏≤‡πÄ‡∏Ñ‡πâ‡∏≤', nameEN: 'Lat Plakhao', code: 'YL08' },
              { id: 'RAM2', nameTH: '‡∏£‡∏≤‡∏°‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏≤ 6 ‡∏Å‡∏°.', nameEN: 'Ram Inthra Km.6', code: 'YL09' },
              { id: 'KRU2', nameTH: '‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Å‡∏£‡∏µ‡∏ë‡∏≤', nameEN: 'Krungthep Kreetha', code: 'YL10' },
              { id: 'HUA2', nameTH: '‡∏´‡∏±‡∏ß‡∏´‡∏°‡∏≤‡∏Å', nameEN: 'Hua Mak', code: 'YL11' },
              { id: 'RAM3', nameTH: '‡∏£‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏´‡∏á', nameEN: 'Ram Khamhaeng', code: 'YL12' },
              { id: 'RAJ', nameTH: '‡∏£‡∏≤‡∏ä‡∏°‡∏±‡∏á‡∏Ñ‡∏•‡∏≤‡∏Å‡∏µ‡∏¨‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô', nameEN: 'Rajamangala Stadium', code: 'YL13' },
              { id: 'SRI', nameTH: '‡∏®‡∏£‡∏µ‡∏ô‡∏ß‡∏•', nameEN: 'Si Nuan', code: 'YL14' },
              { id: 'HUA3', nameTH: '‡∏´‡∏±‡∏ß‡∏ï‡∏∞‡πÄ‡∏Ç‡πâ', nameEN: 'Hua Takhe', code: 'YL15' },
              { id: 'BAN8', nameTH: '‡∏ö‡∏≤‡∏á‡∏≠‡πâ‡∏≠', nameEN: 'Bang O', code: 'YL16' },
              { id: 'SAM4', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á', nameEN: 'Samrong Klang', code: 'YL17' },
              { id: 'SAM5', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á', nameEN: 'Samrong', code: 'YL18' },
              { id: 'SAM6', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á ‡∏Å‡∏°.3', nameEN: 'Samrong Km.3', code: 'YL19' },
              { id: 'SAM7', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á ‡∏Å‡∏°.6', nameEN: 'Samrong Km.6', code: 'YL20' },
              { id: 'SAM8', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á ‡∏Å‡∏°.9', nameEN: 'Samrong Km.9', code: 'YL21' },
              { id: 'SAM9', nameTH: '‡∏™‡∏≥‡πÇ‡∏£‡∏á ‡∏Å‡∏°.12', nameEN: 'Samrong Km.12', code: 'YL22' },
              { id: 'KEH', nameTH: '‡πÄ‡∏Ñ‡∏´‡∏∞', nameEN: 'Kheha', code: 'YL23' }
            ]
          },
          
          pink: {
            id: 'pink',
            nameTH: '‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π',
            nameEN: 'Pink Line',
            color: '#FF1493',
            totalStations: 32,
            operational: true,
            stations: [
              { id: 'KHR', nameTH: '‡πÅ‡∏Ñ‡∏£‡∏≤‡∏¢', nameEN: 'Khae Rai', code: 'PK01' },
              { id: 'MUT', nameTH: '‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á‡∏ò‡∏≤‡∏ô‡∏µ', nameEN: 'Muang Thong Thani', code: 'PK02' },
              { id: 'IMP', nameTH: '‡∏≠‡∏¥‡∏°‡πÅ‡∏û‡πá‡∏Ñ ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á‡∏ò‡∏≤‡∏ô‡∏µ', nameEN: 'IMPACT Muang Thong Thani', code: 'PK03' },
              { id: 'COS', nameTH: '‡∏Ñ‡∏≠‡∏™‡πÇ‡∏°‡∏ö‡∏≤‡∏ã‡∏≤‡∏£‡πå', nameEN: 'Cosmo Bazaar', code: 'PK04' },
              { id: 'GOV', nameTH: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Government Complex', code: 'PK05' },
              { id: 'MIN', nameTH: '‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç', nameEN: 'Ministry of Public Health', code: 'PK06' },
              { id: 'YAE2', nameTH: '‡πÅ‡∏¢‡∏Å‡∏ï‡∏¥‡∏ß‡∏≤‡∏ô‡∏ô‡∏ó‡πå', nameEN: 'Yaek Tiwanon', code: 'PK07' },
              { id: 'SAM10', nameTH: '‡∏™‡∏≤‡∏°‡∏±‡∏Ñ‡∏Ñ‡∏µ', nameEN: 'Samakkhi', code: 'PK08' },
              { id: 'ROY', nameTH: '‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏£‡∏≤‡∏ä‡∏ß‡∏¥‡∏ñ‡∏µ', nameEN: 'Rajavithi Hospital', code: 'PK09' },
              { id: 'RAN2', nameTH: '‡∏£‡∏≤‡∏á‡∏ô‡πâ‡∏≥', nameEN: 'Rang Nam', code: 'PK10' },
              { id: 'PRA2', nameTH: '‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏ô‡πâ‡∏≥', nameEN: 'Pratunam', code: 'PK11' },
              { id: 'RAT2', nameTH: '‡∏£‡∏≤‡∏ä‡∏õ‡∏£‡∏≤‡∏£‡∏†', nameEN: 'Ratchaprarop', code: 'PK12' },
              { id: 'MAK', nameTH: '‡∏°‡∏±‡∏Å‡∏Å‡∏∞‡∏™‡∏±‡∏ô', nameEN: 'Makkasan', code: 'PK13' },
              { id: 'RAM4', nameTH: '‡∏£‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏´‡∏á 12', nameEN: 'Ram Khamhaeng 12', code: 'PK14' },
              { id: 'LAM', nameTH: '‡∏•‡∏≤‡∏î‡∏°‡∏∞‡∏¢‡∏°', nameEN: 'Lad Mayom', code: 'PK15' },
              { id: 'RAM5', nameTH: '‡∏£‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏´‡∏á 34', nameEN: 'Ram Khamhaeng 34', code: 'PK16' },
              { id: 'WAT3', nameTH: '‡∏ß‡∏±‡∏î‡πÄ‡∏ó‡∏û‡∏•‡∏µ‡∏•‡∏≤', nameEN: 'Wat Thep Lila', code: 'PK17' },
              { id: 'KLO3', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡πâ‡∏≤', nameEN: 'Khlong Ban Ma', code: 'PK18' },
              { id: 'HIP', nameTH: '‡∏Æ‡∏¥‡∏õ‡πÇ‡∏õ‡πÇ‡∏î‡∏£‡∏°', nameEN: 'Hippodrome', code: 'PK19' },
              { id: 'CHO2', nameTH: '‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏ô‡∏ó‡∏£‡∏µ', nameEN: 'Chong Nonsi', code: 'PK20' },
              { id: 'KLO4', nameTH: '‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢', nameEN: 'Khlong Toei', code: 'PK21' },
              { id: 'WAT4', nameTH: '‡∏ß‡∏±‡∏î‡∏ó‡∏∞‡πÄ‡∏•‡∏ó‡∏≠‡∏á', nameEN: 'Wat Tha Le Thong', code: 'PK22' },
              { id: 'MIN2', nameTH: '‡∏°‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ', nameEN: 'Min Buri', code: 'PK23' },
              { id: 'MIN3', nameTH: '‡∏°‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ ‡∏Å‡∏°.7', nameEN: 'Min Buri Km.7', code: 'PK24' },
              { id: 'MIN4', nameTH: '‡∏°‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ ‡∏Å‡∏°.8', nameEN: 'Min Buri Km.8', code: 'PK25' },
              { id: 'LAT6', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á', nameEN: 'Lat Krabang', code: 'PK26' },
              { id: 'LAT7', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á ‡∏Å‡∏°.2', nameEN: 'Lat Krabang Km.2', code: 'PK27' },
              { id: 'LAT8', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á ‡∏Å‡∏°.4.5', nameEN: 'Lat Krabang Km.4.5', code: 'PK28' },
              { id: 'LAT9', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á ‡∏Å‡∏°.7.5', nameEN: 'Lat Krabang Km.7.5', code: 'PK29' },
              { id: 'LAT10', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á ‡∏Å‡∏°.10', nameEN: 'Lat Krabang Km.10', code: 'PK30' },
              { id: 'LAT11', nameTH: '‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á ‡∏Å‡∏°.12', nameEN: 'Lat Krabang Km.12', code: 'PK31' },
              { id: 'MIN5', nameTH: '‡∏°‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ ‡∏Å‡∏°.14', nameEN: 'Min Buri Km.14', code: 'PK32' }
            ]
          }
        };

        const INTERCHANGE_STATIONS = [
          { station: '‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß', lines: ['blue', 'yellow'], codes: ['BL25', 'YL01'] },
          { station: '‡πÄ‡∏ï‡∏≤‡∏õ‡∏π‡∏ô', lines: ['purple'], codes: ['PP16'] },
          { station: '‡πÅ‡∏¢‡∏Å‡∏ï‡∏¥‡∏ß‡∏≤‡∏ô‡∏ô‡∏ó‡πå', lines: ['purple', 'pink'], codes: ['PP11', 'PK07'] }
        ];

        const TRAVEL_INFO = {
          averageTimePerStation: 2,
          averageWaitTime: 3,
          baseFare: 16,
          farePerStation: 2,
          maxFare: 42
        };

        function calculateDistance(fromStationId, toStationId, lineId) {
          const line = MRT_LINES[lineId];
          if (!line || !line.stations) return null;
          
          const fromIndex = line.stations.findIndex(station => station.id === fromStationId);
          const toIndex = line.stations.findIndex(station => station.id === toStationId);
          
          if (fromIndex === -1 || toIndex === -1) return null;
          
          return Math.abs(toIndex - fromIndex);
        }
        
        function getRouteStations(fromStationId, toStationId, lineId) {
          const line = MRT_LINES[lineId];
          if (!line || !line.stations) return [];
          
          const fromIndex = line.stations.findIndex(s => s.id === fromStationId);
          const toIndex = line.stations.findIndex(s => s.id === toStationId);
          
          if (fromIndex === -1 || toIndex === -1) return [];
          
          const start = Math.min(fromIndex, toIndex);
          const end = Math.max(fromIndex, toIndex);
          
          const routeStations = line.stations.slice(start, end + 1);
          
          // ‡∏´‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö
          if (fromIndex > toIndex) {
            routeStations.reverse();
          }
          
          return routeStations;
        }

        function calculateFare(distance) {
          if (distance === 0) return 0;
          
          const fare = TRAVEL_INFO.baseFare + (distance * TRAVEL_INFO.farePerStation);
          return Math.min(fare, TRAVEL_INFO.maxFare);
        }

        function calculateTravelTime(distance, isPeakHour = false) {
          if (distance === 0) return 0;
          
          const travelTime = (distance * TRAVEL_INFO.averageTimePerStation) + TRAVEL_INFO.averageWaitTime;
          const peakMultiplier = isPeakHour ? 1.3 : 1;
          
          return Math.round(travelTime * peakMultiplier);
        }

        let currentLanguage = localStorage.getItem('language') || 'th'; 
        let selectedCategory = null; 
        
        const translations = { 
          th: { 
            siteSubtitle: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô', 
            welcomeText: '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà', 
            welcomeDescription: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì', 
            searchPlaceholder: '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç...', 
            navHome: '‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å', 
            navCategories: '‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà', 
            navAbout: '‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤', 
            allCategories: '‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà', 
            transportation: '‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏°', 
            health: '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û', 
            finance: '‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô', 
            utilities: '‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏π‡∏õ‡πÇ‡∏†‡∏Ñ', 
            geography: '‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', 
            needNewCalc: '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà?', 
            newCalcDesc: '‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ', 
            requestCalcBtn: '‡∏Ç‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç', 
            footerText: '¬© 2024 4Calc ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏π‡πà‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì', 
            noResultsTitle: '‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç', 
            noResultsDesc: '‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏≠‡∏∑‡πà‡∏ô' 
          }, 
          en: { 
            siteSubtitle: 'All-in-One Calculator Hub', 
            welcomeText: 'Welcome to', 
            welcomeDescription: 'Your comprehensive calculator hub for all your daily calculations', 
            searchPlaceholder: 'Search calculators...', 
            navHome: 'Home', 
            navCategories: 'Categories', 
            navAbout: 'About', 
            allCategories: 'All Categories', 
            transportation: 'Transportation', 
            health: 'Health', 
            finance: 'Finance', 
            utilities: 'Utilities', 
            geography: 'Geography', 
            needNewCalc: 'Need a New Calculator?', 
            newCalcDesc: "We're constantly adding new calculators based on user needs", 
            requestCalcBtn: 'Request Calculator', 
            footerText: '¬© 2024 4Calc. All rights reserved. Your trusted calculator companion', 
            noResultsTitle: 'No calculators found', 
            noResultsDesc: 'Try adjusting your search or selecting a different category' 
          } 
        }; const calculators = { th: [ { id: 'mrt-time', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á MRT', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ MRT', emoji: 'üöá', category: 'transportation' }, { id: 'taxi-fare', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤', emoji: 'üöï', category: 'transportation' }, { id: 'pregnancy', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏£‡∏£‡∏†‡πå', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏•‡∏≠‡∏î‡πÅ‡∏•‡∏∞ milestone ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç', emoji: 'ü§±', category: 'health' }, { id: 'interest', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ó‡∏ö‡∏ï‡πâ‡∏ô', emoji: 'üí∞', category: 'finance' }, { id: 'btu', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BTU', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ BTU ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®', emoji: '‚ùÑÔ∏è', category: 'utilities' }, { id: 'distance', name: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á', description: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏≠‡∏á‡∏à‡∏∏‡∏î', emoji: 'üìç', category: 'geography' } ], en: [ { id: 'mrt-time', name: 'MRT Time Calculator', description: 'Calculate travel time between MRT stations', emoji: 'üöá', category: 'transportation' }, { id: 'taxi-fare', name: 'Taxi Fare Calculator', description: 'Calculate taxi fare based on distance and time', emoji: 'üöï', category: 'transportation' }, { id: 'pregnancy', name: 'Pregnancy Calculator', description: 'Calculate due date and pregnancy milestones', emoji: 'ü§±', category: 'health' }, { id: 'interest', name: 'Interest Calculator', description: 'Calculate simple and compound interest', emoji: 'üí∞', category: 'finance' }, { id: 'btu', name: 'BTU Calculator', description: 'Calculate BTU requirements for air conditioning', emoji: '‚ùÑÔ∏è', category: 'utilities' }, { id: 'distance', name: 'Distance Calculator', description: 'Calculate distance between two points', emoji: 'üìç', category: 'geography' } ] }; document.addEventListener('DOMContentLoaded', function() { updateLanguage(); renderCalculators(); setupEventListeners(); }); function setupEventListeners() { document.getElementById('langButton').addEventListener('click', function() { const dropdown = document.getElementById('langDropdown'); dropdown.classList.toggle('show'); }); document.addEventListener('click', function(event) { if (!event.target.closest('.lang-btn')) { document.getElementById('langDropdown').classList.remove('show'); } }); document.getElementById('searchInput').addEventListener('input', function(e) { renderCalculators(e.target.value); }); document.querySelectorAll('.category-btn').forEach(btn => { btn.addEventListener('click', function() { const category = this.dataset.category; document.querySelectorAll('.category-btn').forEach(b => { b.className = 'category-btn px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors'; }); this.className = 'category-btn px-4 py-2 bg-blue-600 text-white border border-blue-600 rounded-lg hover:bg-blue-700 transition-colors'; selectedCategory = category === 'all' ? null : category; renderCalculators(); }); }); } function switchLanguage(lang) { currentLanguage = lang; localStorage.setItem('language', lang); const flagMap = { th: 'üáπüá≠', en: 'üá∫üá∏' }; const nameMap = { th: '‡πÑ‡∏ó‡∏¢', en: 'English' }; document.getElementById('currentFlag').textContent = flagMap[lang]; document.getElementById('currentLang').textContent = nameMap[lang]; document.getElementById('langDropdown').classList.remove('show'); updateLanguage(); renderCalculators(); } function updateLanguage() { const t = translations[currentLanguage]; document.getElementById('siteSubtitle').textContent = t.siteSubtitle; document.getElementById('welcomeText').textContent = t.welcomeText; document.getElementById('welcomeDescription').textContent = t.welcomeDescription; document.getElementById('searchInput').placeholder = t.searchPlaceholder; document.getElementById('nav-home').textContent = t.navHome; document.getElementById('nav-categories').textContent = t.navCategories; document.getElementById('nav-about').textContent = t.navAbout; document.getElementById('needNewCalc').textContent = t.needNewCalc; document.getElementById('newCalcDesc').textContent = t.newCalcDesc; document.getElementById('requestCalcBtn').textContent = t.requestCalcBtn; document.getElementById('footerText').textContent = t.footerText; const categoryTexts = [t.allCategories, t.transportation, t.health, t.finance, t.utilities, t.geography]; document.querySelectorAll('.category-btn span:last-child').forEach((span, index) => { span.textContent = categoryTexts[index]; }); } function renderCalculators(searchTerm = '') { const grid = document.getElementById('calculatorGrid'); const noResults = document.getElementById('noResults'); const currentCalculators = calculators[currentLanguage]; let filtered = currentCalculators.filter(calc => { const matchesSearch = calc.name.toLowerCase().includes(searchTerm.toLowerCase()) || calc.description.toLowerCase().includes(searchTerm.toLowerCase()); const matchesCategory = !selectedCategory || calc.category === selectedCategory; return matchesSearch && matchesCategory; }); if (filtered.length === 0) { grid.classList.add('hidden'); noResults.classList.remove('hidden'); return; } grid.classList.remove('hidden'); noResults.classList.add('hidden'); grid.innerHTML = filtered.map(calc => ` <div class="calculator-card bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer" onclick="showCalculator('${calc.id}')"> <div class="text-3xl mb-4">${calc.emoji}</div> <h3 class="text-lg font-semibold mb-2">${calc.name}</h3> <p class="text-gray-600 mb-3">${calc.description}</p> <span class="text-sm text-blue-600 font-medium"> ${translations[currentLanguage][calc.category]} </span> </div> `).join(''); } function showCalculator(type) { const modal = document.getElementById('calculatorModal'); const title = document.getElementById('modalTitle'); const content = document.getElementById('modalContent'); modal.classList.remove('hidden'); modal.classList.add('flex'); if (type === 'mrt-time') { title.textContent = currentLanguage === 'th' ? 'üöá ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á MRT' : 'üöá MRT Time Calculator'; content.innerHTML = getMRTCalculatorHTML(); } else { title.textContent = currentLanguage === 'th' ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤!' : 'Calculator Coming Soon!'; content.innerHTML = `<p class="text-center py-8 text-gray-500">${currentLanguage === 'th' ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á!' : 'This calculator is under development. Please check back later!'}</p>`; } } function closeCalculator() { const modal = document.getElementById('calculatorModal'); modal.classList.add('hidden'); modal.classList.remove('flex'); } function getMRTCalculatorHTML() {
          const isEnglish = currentLanguage === 'en';
          
          // Generate station options from comprehensive data
          let stationOptions = '';
          Object.keys(MRT_LINES).forEach(lineKey => {
            const line = MRT_LINES[lineKey];
            if (line.stations) {
              stationOptions += `<optgroup label="${isEnglish ? line.nameEN : line.nameTH}">`;
              line.stations.forEach(station => {
                const stationName = isEnglish ? station.nameEN : station.nameTH;
                stationOptions += `<option value="${station.id}" data-line="${lineKey}">${station.code} - ${stationName}</option>`;
              });
              stationOptions += '</optgroup>';
            }
          });
          
          return `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Trip Details' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á'}</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'From Station' : '‡∏à‡∏≤‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</label>
                    <select id="fromStation" class="w-full px-3 py-2 border rounded-lg">
                      <option value="">${isEnglish ? 'Select departure station' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á'}</option>
                      ${stationOptions}
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'To Station' : '‡πÑ‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</label>
                    <select id="toStation" class="w-full px-3 py-2 border rounded-lg">
                      <option value="">${isEnglish ? 'Select destination station' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á'}</option>
                      ${stationOptions}
                    </select>
                  </div>
                  <div>
                    <label class="flex items-center">
                      <input type="checkbox" id="isPeakHour" class="mr-2">
                      <span class="text-sm">${isEnglish ? 'Peak hours (Rush hour)' : '‡∏ä‡πà‡∏ß‡∏á‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô'}</span>
                    </label>
                  </div>
                  <button onclick="calculateMRT()" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    ${isEnglish ? 'Calculate' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                  </button>
                </div>
              </div>
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Results' : '‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå'}</h3>
                <div id="mrtResults" class="text-center py-8 text-gray-500">
                  ${isEnglish ? 'Select stations and click calculate' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </div>
              </div>
            </div>
          `;
        }

        // Global variables to store current route data
        let currentRouteData = null;
        
        function toggleRouteDetails() {
          // ‡∏´‡∏≤ elements ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ innerHTML ‡∏≠‡∏≤‡∏à‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
          const routeContainer = document.getElementById('routeDetails');
          const toggleIcon = document.getElementById('routeToggleIcon');
          const isEnglish = currentLanguage === 'en';
          
          if (!routeContainer) {
            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
            return;
          }
          
          if (!currentRouteData) {
            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô');
            return;
          }
          
          // Check if route is currently expanded
          const isExpanded = routeContainer.style.maxHeight !== '0px' && routeContainer.style.maxHeight !== '';
          
          if (!isExpanded) {
            // Expand route details
            const { fromStationId, toStationId, lineId } = currentRouteData;
            const routeStations = getRouteStations(fromStationId, toStationId, lineId);
            
            if (routeStations.length === 0) {
              const innerDiv = routeContainer.querySelector('div');
              if (innerDiv) {
                innerDiv.innerHTML = `<p class="text-red-500">${isEnglish ? 'Unable to calculate route' : '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏î‡πâ'}</p>`;
              }
              return;
            }
              
              let routeHTML = `
                <div class="bg-white p-4 rounded border">
                  <h4 class="font-semibold mb-3 text-gray-800">${isEnglish ? 'Route Details' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á'}</h4>
                  <div class="space-y-2">
              `;
              
              routeStations.forEach((station, index) => {
                const stationName = isEnglish ? station.nameEN : station.nameTH;
                const lineInfo = MRT_LINES[lineId];
                const lineColor = lineInfo.color;
                
                let timeInfo = '';
                if (index > 0) {
                  const timeFromPrevious = 2; // 2 minutes per station
                  timeInfo = `<span class="text-sm text-gray-500 ml-2">(+${timeFromPrevious} ${isEnglish ? 'min' : '‡∏ô‡∏≤‡∏ó‡∏µ'})</span>`;
                } else {
                  timeInfo = `<span class="text-sm text-gray-500 ml-2">(${isEnglish ? 'Start' : '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô'})</span>`;
                }
                
                const isStart = index === 0;
                const isEnd = index === routeStations.length - 1;
                
                routeHTML += `
                  <div class="flex items-center py-2 ${isStart ? 'bg-green-50' : isEnd ? 'bg-red-50' : 'bg-blue-50'} rounded px-3">
                    <div class="w-3 h-3 rounded-full mr-3" style="background-color: ${lineColor}"></div>
                    <div class="flex-1">
                      <strong>${station.code}</strong> - ${stationName}
                      ${timeInfo}
                    </div>
                    ${isStart ? '<span class="text-green-600 text-sm font-medium">üöá ' + (isEnglish ? 'Start' : '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô') + '</span>' : ''}
                    ${isEnd ? '<span class="text-red-600 text-sm font-medium">üèÅ ' + (isEnglish ? 'End' : '‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á') + '</span>' : ''}
                  </div>
                `;
              });
              
              routeHTML += `
                  </div>
                  <div class="mt-3 p-2 bg-gray-100 rounded text-sm">
                    <strong>${isEnglish ? 'Total stations:' : '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏£‡∏ß‡∏°:'}</strong> ${routeStations.length}<br>
                    <strong>${isEnglish ? 'Estimated time:' : '‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì:'}</strong> ${(routeStations.length - 1) * 2 + 3} ${isEnglish ? 'minutes' : '‡∏ô‡∏≤‡∏ó‡∏µ'}
                  </div>
                </div>
              `;
              
              // Set content first
              const innerDiv = routeContainer.querySelector('div');
              if (innerDiv) {
                innerDiv.innerHTML = routeHTML;
              } else {
                return;
              }
              
              // Force reflow to calculate actual height
              routeContainer.style.maxHeight = 'none';
              const actualHeight = routeContainer.scrollHeight;
              routeContainer.style.maxHeight = '0px';
              
              // Trigger expansion with slight delay for smooth animation
              setTimeout(() => {
                routeContainer.style.maxHeight = actualHeight + 'px';
              }, 10);
              
              // Rotate icon
              if (toggleIcon) {
                toggleIcon.style.transform = 'rotate(180deg)';
              }
          } else {
            // Collapse route details
            routeContainer.style.maxHeight = '0px';
            
            // Rotate icon back
            if (toggleIcon) {
              toggleIcon.style.transform = 'rotate(0deg)';
            }
          }
        }

        function calculateMRT() {
          const fromStationId = document.getElementById('fromStation').value;
          const toStationId = document.getElementById('toStation').value;
          const isPeakHour = document.getElementById('isPeakHour').checked;
          const results = document.getElementById('mrtResults');
          const isEnglish = currentLanguage === 'en';
          
          // Reset route details state
          currentRouteData = null;
          
          if (!fromStationId || !toStationId) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please select both stations' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á'}</p>`;
            return;
          }
          
          if (fromStationId === toStationId) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please select different stations' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô'}</p>`;
            return;
          }
          
          // Find stations and their lines
          let fromStation = null, toStation = null;
          let fromLine = null, toLine = null;
          
          Object.keys(MRT_LINES).forEach(lineKey => {
            const line = MRT_LINES[lineKey];
            if (line.stations) {
              const foundFrom = line.stations.find(s => s.id === fromStationId);
              const foundTo = line.stations.find(s => s.id === toStationId);
              
              if (foundFrom) {
                fromStation = foundFrom;
                fromLine = lineKey;
              }
              if (foundTo) {
                toStation = foundTo;
                toLine = lineKey;
              }
            }
          });
          
          if (!fromStation || !toStation) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Station not found' : '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</p>`;
            return;
          }
          
          // Calculate if same line or need transfer
          let distance = 0;
          let transferInfo = '';
          
          if (fromLine === toLine) {
            // Same line - direct calculation
            distance = calculateDistance(fromStationId, toStationId, fromLine);
            
            // Store route data for toggle function
            currentRouteData = {
              fromStationId: fromStationId,
              toStationId: toStationId,
              lineId: fromLine
            };
          } else {
            // Different lines - need transfer (simplified calculation)
            // For now, we'll calculate approximate distance via interchange stations
            distance = 8; // Estimated average for cross-line transfers
            transferInfo = isEnglish 
              ? `<div class="p-2 bg-yellow-100 rounded text-sm"><strong>Note:</strong> Transfer required between lines</div>`
              : `<div class="p-2 bg-yellow-100 rounded text-sm"><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢</div>`;
              
            // Store route data for toggle function (use primary line for now)
            currentRouteData = {
              fromStationId: fromStationId,
              toStationId: toStationId,
              lineId: fromLine
            };
          }
          
          const time = calculateTravelTime(distance, isPeakHour);
          const fare = calculateFare(distance);
          
          const fromName = isEnglish ? fromStation.nameEN : fromStation.nameTH;
          const toName = isEnglish ? toStation.nameEN : toStation.nameTH;
          const fromLineDisplay = isEnglish ? MRT_LINES[fromLine].nameEN : MRT_LINES[fromLine].nameTH;
          const toLineDisplay = isEnglish ? MRT_LINES[toLine].nameEN : MRT_LINES[toLine].nameTH;
          
          results.innerHTML = `
            <div class="space-y-3 text-left">
              <div class="p-3 bg-blue-50 rounded">
                <strong>${isEnglish ? 'From:' : '‡∏à‡∏≤‡∏Å:'}</strong> ${fromStation.code} - ${fromName}<br>
                <small class="text-gray-600">${fromLineDisplay}</small><br>
                <strong>${isEnglish ? 'To:' : '‡πÑ‡∏õ:'}</strong> ${toStation.code} - ${toName}<br>
                <small class="text-gray-600">${toLineDisplay}</small>
              </div>
              ${transferInfo}
              <div class="p-3 bg-green-50 rounded">
                <strong>${isEnglish ? 'Travel Time:' : '‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á:'}</strong> ${time} ${isEnglish ? 'minutes' : '‡∏ô‡∏≤‡∏ó‡∏µ'}
                ${isPeakHour ? `<br><small class="text-gray-600">${isEnglish ? '(Including peak hour delay)' : '(‡∏£‡∏ß‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤‡∏ä‡πà‡∏ß‡∏á‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô)'}</small>` : ''}
              </div>
              <div class="p-3 bg-yellow-50 rounded cursor-pointer hover:bg-yellow-100 transition-colors" onclick="toggleRouteDetails()">
                <div class="flex items-center justify-between">
                  <div>
                    <strong>${isEnglish ? 'Distance:' : '‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á:'}</strong> 
                    <span class="text-blue-600 hover:text-blue-800 underline">${distance} ${isEnglish ? 'stations' : '‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ'}</span>
                  </div>
                  <div class="flex items-center">
                    <span class="text-sm text-gray-500 mr-2">(${isEnglish ? 'Click to view route' : '‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏π‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á'})</span>
                    <svg id="routeToggleIcon" class="w-5 h-5 text-gray-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                  </div>
                </div>
              </div>
              <div id="routeDetails" class="overflow-hidden transition-all duration-300 ease-in-out" style="max-height: 0;">
                <div class="p-3 bg-gray-50 rounded border mt-3">
                  <!-- Route details will be inserted here -->
                </div>
              </div>
              <div class="p-3 bg-purple-50 rounded">
                <strong>${isEnglish ? 'Fare:' : '‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£:'}</strong> ‡∏ø${fare}
              </div>
            </div>
          `;
        }

        // ======================
        // TAXI FARE CALCULATOR
        // ======================

        // Import taxi calculator functions (inline version)
        const TAXI_RATES = {
          regular: {
            name: '‡∏£‡∏ñ‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏Å‡∏ï‡∏¥',
            nameEN: 'Regular Size Taxi',
            baseFare: 35.00,
            rates: [
              { min: 1.01, max: 10, rate: 6.50 },
              { min: 10.01, max: 20, rate: 7.00 },
              { min: 20.01, max: 40, rate: 8.00 },
              { min: 40.01, max: 60, rate: 8.50 },
              { min: 60.01, max: 80, rate: 9.00 },
              { min: 80.01, max: Infinity, rate: 10.50 }
            ]
          },
          large: {
            name: '‡∏£‡∏ñ‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà',
            nameEN: 'Large Size Taxi',
            baseFare: 40.00,
            rates: [
              { min: 1.01, max: 10, rate: 6.50 },
              { min: 10.01, max: 20, rate: 7.00 },
              { min: 20.01, max: 40, rate: 8.00 },
              { min: 40.01, max: 60, rate: 8.50 },
              { min: 60.01, max: 80, rate: 9.00 },
              { min: 80.01, max: Infinity, rate: 10.50 }
            ]
          }
        };

        const WAITING_RATE = {
          ratePerMinute: 3.00,
          speedThreshold: 6
        };

        const ADDITIONAL_CHARGES = {
          appBooking: 20,
          airportSurcharge: 50
        };

        function calculateDistanceFare(distance, taxiType = 'regular') {
          if (distance <= 0) return 0;
          
          const rateConfig = TAXI_RATES[taxiType];
          if (!rateConfig) return 0;
          
          let totalFare = rateConfig.baseFare;
          
          if (distance <= 1) {
            return totalFare;
          }
          
          let remainingDistance = distance - 1;
          
          for (const rateRange of rateConfig.rates) {
            if (remainingDistance <= 0) break;
            
            const distanceInRange = Math.min(
              remainingDistance,
              rateRange.max - Math.max(rateRange.min - 1, 0)
            );
            
            totalFare += distanceInRange * rateRange.rate;
            remainingDistance -= distanceInRange;
          }
          
          return Math.round(totalFare * 100) / 100;
        }

        function calculateWaitingFare(waitingTimeMinutes) {
          if (waitingTimeMinutes <= 0) return 0;
          return Math.round(waitingTimeMinutes * WAITING_RATE.ratePerMinute * 100) / 100;
        }

        function calculateTaxiFare({
          distance,
          waitingTime = 0,
          taxiType = 'regular',
          isAppBooking = false,
          isAirportPickup = false
        }) {
          if (distance <= 0) {
            return {
              error: '‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0 ‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£',
              errorEN: 'Distance must be greater than 0 kilometers'
            };
          }
          
          const distanceFare = calculateDistanceFare(distance, taxiType);
          const waitingFare = calculateWaitingFare(waitingTime);
          
          let additionalFee = 0;
          const additionalCharges = [];
          
          if (isAppBooking) {
            additionalFee += ADDITIONAL_CHARGES.appBooking;
            additionalCharges.push({
              name: '‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏≠‡∏õ',
              nameEN: 'App Booking Fee',
              amount: ADDITIONAL_CHARGES.appBooking
            });
          }
          
          if (isAirportPickup) {
            additionalFee += ADDITIONAL_CHARGES.airportSurcharge;
            additionalCharges.push({
              name: '‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô',
              nameEN: 'Airport Surcharge',
              amount: ADDITIONAL_CHARGES.airportSurcharge
            });
          }
          
          const totalFare = distanceFare + waitingFare + additionalFee;
          
          return {
            success: true,
            breakdown: {
              distanceFare,
              waitingFare,
              additionalFee,
              additionalCharges
            },
            total: Math.round(totalFare * 100) / 100,
            taxiInfo: TAXI_RATES[taxiType],
            distance,
            waitingTime
          };
        }

        // Update showCalculator function to handle taxi-fare
        const originalShowCalculator = showCalculator;
        showCalculator = function(type) {
          const modal = document.getElementById('calculatorModal');
          const title = document.getElementById('modalTitle');
          const content = document.getElementById('modalContent');
          
          modal.classList.remove('hidden');
          modal.classList.add('flex');
          
          if (type === 'mrt-time') {
            title.textContent = currentLanguage === 'th' ? 'üöá ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á MRT' : 'üöá MRT Time Calculator';
            content.innerHTML = getMRTCalculatorHTML();
          } else if (type === 'taxi-fare') {
            title.textContent = currentLanguage === 'th' ? 'üöï ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà' : 'üöï Taxi Fare Calculator';
            content.innerHTML = getTaxiCalculatorHTML();
          } else {
            title.textContent = currentLanguage === 'th' ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤!' : 'Calculator Coming Soon!';
            content.innerHTML = `<p class="text-center py-8 text-gray-500">${currentLanguage === 'th' ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á!' : 'This calculator is under development. Please check back later!'}</p>`;
          }
        };

        function getTaxiCalculatorHTML() {
          const isEnglish = currentLanguage === 'en';
          
          return `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Trip Details' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á'}</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'Distance (km)' : '‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£)'}</label>
                    <input type="number" id="taxiDistance" placeholder="${isEnglish ? 'Enter distance in kilometers' : '‡πÉ‡∏™‡πà‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£'}" 
                           class="w-full px-3 py-2 border rounded-lg" min="0.1" step="0.1">
                  </div>
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'Traffic Time (minutes)' : '‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏¥‡∏î/‡∏£‡∏≠ (‡∏ô‡∏≤‡∏ó‡∏µ)'}</label>
                    <input type="number" id="taxiWaitTime" placeholder="${isEnglish ? 'Enter waiting time in minutes' : '‡πÉ‡∏™‡πà‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏≤‡∏ó‡∏µ'}" 
                           class="w-full px-3 py-2 border rounded-lg" min="0" step="1" value="0">
                  </div>
                  <div>
                    <label class="block text-sm font-medium mb-2">${isEnglish ? 'Taxi Type' : '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà'}</label>
                    <select id="taxiType" class="w-full px-3 py-2 border rounded-lg">
                      <option value="regular">${isEnglish ? 'Regular Size (‡∏ø35 base)' : '‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (‡∏ø35 ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)'}</option>
                      <option value="large">${isEnglish ? 'Large Size (‡∏ø40 base)' : '‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà (‡∏ø40 ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)'}</option>
                    </select>
                  </div>
                  <div class="space-y-2">
                    <label class="flex items-center">
                      <input type="checkbox" id="isAppBooking" class="mr-2">
                      <span class="text-sm">${isEnglish ? 'App booking (+‡∏ø20)' : '‡∏à‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏õ (+‡∏ø20)'}</span>
                    </label>
                    <label class="flex items-center">
                      <input type="checkbox" id="isAirportPickup" class="mr-2">
                      <span class="text-sm">${isEnglish ? 'Airport pickup (+‡∏ø50)' : '‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô (+‡∏ø50)'}</span>
                    </label>
                  </div>
                  <button onclick="calculateTaxi()" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    ${isEnglish ? 'Calculate Fare' : '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£'}
                  </button>
                </div>
              </div>
              <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-4">${isEnglish ? 'Fare Breakdown' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£'}</h3>
                <div id="taxiResults" class="text-center py-8 text-gray-500">
                  ${isEnglish ? 'Enter distance and click calculate' : '‡πÉ‡∏™‡πà‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'}
                </div>
              </div>
            </div>
          `;
        }

        function calculateTaxi() {
          const distance = parseFloat(document.getElementById('taxiDistance').value);
          const waitingTime = parseInt(document.getElementById('taxiWaitTime').value) || 0;
          const taxiType = document.getElementById('taxiType').value;
          const isAppBooking = document.getElementById('isAppBooking').checked;
          const isAirportPickup = document.getElementById('isAirportPickup').checked;
          const results = document.getElementById('taxiResults');
          const isEnglish = currentLanguage === 'en';
          
          if (!distance || distance <= 0) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? 'Please enter a valid distance' : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'}</p>`;
            return;
          }
          
          const result = calculateTaxiFare({
            distance,
            waitingTime,
            taxiType,
            isAppBooking,
            isAirportPickup
          });
          
          if (result.error) {
            results.innerHTML = `<p class="text-red-500">${isEnglish ? result.errorEN : result.error}</p>`;
            return;
          }
          
          const taxiInfo = result.taxiInfo;
          const breakdown = result.breakdown;
          
          let additionalChargesHTML = '';
          if (breakdown.additionalCharges.length > 0) {
            additionalChargesHTML = breakdown.additionalCharges.map(charge => 
              `<div class="flex justify-between">
                <span>${isEnglish ? charge.nameEN : charge.name}:</span>
                <span>‡∏ø${charge.amount}</span>
              </div>`
            ).join('');
          }
          
          results.innerHTML = `
            <div class="space-y-3 text-left">
              <div class="p-3 bg-blue-50 rounded">
                <strong>${isEnglish ? 'Taxi Type:' : '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ:'}</strong> ${isEnglish ? taxiInfo.nameEN : taxiInfo.name}<br>
                <strong>${isEnglish ? 'Distance:' : '‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á:'}</strong> ${distance} ${isEnglish ? 'km' : '‡∏Å‡∏°.'}<br>
                ${waitingTime > 0 ? `<strong>${isEnglish ? 'Waiting Time:' : '‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠:'}</strong> ${waitingTime} ${isEnglish ? 'minutes' : '‡∏ô‡∏≤‡∏ó‡∏µ'}<br>` : ''}
              </div>
              
              <div class="p-3 bg-green-50 rounded">
                <h4 class="font-semibold mb-2">${isEnglish ? 'Fare Breakdown' : '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£'}</h4>
                <div class="space-y-1 text-sm">
                  <div class="flex justify-between">
                    <span>${isEnglish ? 'Base fare (1st km):' : '‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (1 ‡∏Å‡∏°.‡πÅ‡∏£‡∏Å):'}</span>
                    <span>‡∏ø${taxiInfo.baseFare}</span>
                  </div>
                  ${distance > 1 ? `
                  <div class="flex justify-between">
                    <span>${isEnglish ? 'Distance fare:' : '‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á:'}</span>
                    <span>‡∏ø${(breakdown.distanceFare - taxiInfo.baseFare).toFixed(2)}</span>
                  </div>` : ''}
                  ${breakdown.waitingFare > 0 ? `
                  <div class="flex justify-between">
                    <span>${isEnglish ? 'Waiting fare:' : '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠:'}</span>
                    <span>‡∏ø${breakdown.waitingFare}</span>
                  </div>` : ''}
                  ${additionalChargesHTML}
                  <hr class="my-2">
                  <div class="flex justify-between font-semibold text-lg">
                    <span>${isEnglish ? 'Total Fare:' : '‡∏Ñ‡πà‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏£‡∏ß‡∏°:'}</span>
                    <span class="text-green-600">‡∏ø${result.total}</span>
                  </div>
                </div>
              </div>
              
              <div class="p-3 bg-yellow-50 rounded text-sm">
                <strong>${isEnglish ? 'Note:' : '‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:'}</strong>
                ${isEnglish ? 'Rates according to Ministry of Transport announcement (effective Jan 13, 2023)' : '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏° (‡∏°‡∏µ‡∏ú‡∏•‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ 13 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2566)'}
              </div>
            </div>
          `;
        }

        </script>

  <!-- Netlify Analytics -->
  <script defer src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </body>
</html>